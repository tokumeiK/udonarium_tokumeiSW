(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[6632],{929:(j,H,A)=>{A(9993),Opal.queue(function(l){var C,K,U,f,o,r,h,x,B,M,Z=l.module,z=l.klass,a=l.const_set,m=l.def,b=l.truthy,N=l.to_ary,i=l.rb_plus,Y=l.rb_minus,E=l.eqeq,v=l.rb_gt,L=l.rb_ge,X=[],c=l.nil;return C=X,K=M=[Z(X[0],"BCDice")].concat(C),x=[Z(M[0],"GameSystem")].concat(K),B=l.$r(x),U=x,o=[f=z(x[0],B("Base"),"YearZeroEngine")].concat(U),r=l.$r(o),(h=f.$$prototype).total_success_dice=h.total_botch_dice=h.base_botch_dice=h.push_dice=h.skill_botch_dice=h.gear_botch_dice=h.difficulty=h.randomizer=c,a(o[0],"ID","YearZeroEngine"),a(o[0],"NAME","YearZeroEngine"),a(o[0],"SORT_KEY","\u3044\u3084\u3042\u305b\u308d\u3048\u3093\u3057\u3093"),a(o[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9(nYZEx+x+x)\n  (\u96e3\u6613\u5ea6)YZE(\u80fd\u529b\u30c0\u30a4\u30b9\u6570)+(\u6280\u80fd\u30c0\u30a4\u30b9\u6570)+(\u30a2\u30a4\u30c6\u30e0\u30c0\u30a4\u30b9\u6570)  # (6\u306e\u307f\u3092\u6570\u3048\u308b)\n\n\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9(nMYZx+x+x)\n  (\u96e3\u6613\u5ea6)MYZ(\u80fd\u529b\u30c0\u30a4\u30b9\u6570)+(\u6280\u80fd\u30c0\u30a4\u30b9\u6570)+(\u30a2\u30a4\u30c6\u30e0\u30c0\u30a4\u30b9\u6570)  # (1\u30686\u3092\u6570\u3048\u3001\u30d7\u30c3\u30b7\u30e5\u53ef\u80fd\u6570\u3092\u8868\u793a)\n  (\u96e3\u6613\u5ea6)MYZ(\u80fd\u529b\u30c0\u30a4\u30b9\u6570)-(\u6280\u80fd\u30c0\u30a4\u30b9\u6570)+(\u30a2\u30a4\u30c6\u30e0\u30c0\u30a4\u30b9\u6570)  # (1\u30686\u3092\u6570\u3048\u3001\u30d7\u30c3\u30b7\u30e5\u53ef\u80fd\u6570\u3092\u8868\u793a\u3001\u6280\u80fd\u306e\u30de\u30a4\u30ca\u30b9\u6307\u5b9a)\n\n  \u203b \u96e3\u6613\u5ea6\u3068\u6280\u80fd\u3001\u30a2\u30a4\u30c6\u30e0\u30c0\u30a4\u30b9\u6570\u306f\u7701\u7565\u53ef\u80fd\n"),a(o[0],"DIFFICULTY_INDEX",1),a(o[0],"COMMAND_TYPE_INDEX",2),a(o[0],"ABILITY_INDEX",3),a(o[0],"SKILL_SIGNED_INDEX",5),a(o[0],"SKILL_INDEX",6),a(o[0],"GEAR_INDEX",8),f.$register_prefix("(\\d+)?(YZE|MYZ)"),m(f,"$dice_info_init",function(){var s=this;return s.total_success_dice=0,s.total_botch_dice=0,s.base_botch_dice=0,s.skill_botch_dice=0,s.gear_botch_dice=0,s.push_dice=0,s.difficulty=0}),m(f,"$eval_game_system_specific_command",function(s){var _,t,g,p,e=this,u=c,n=c,$=c,d=c,I=c,k=c,S=c,D=c,w=c;if(u=/^(\d+)?(YZE|MYZ)(\d+)((\+|-)(\d+))?(\+(\d+))?/.$match(s),!b(u))return"";if(e.$dice_info_init(),e.difficulty=u["$[]"](r("DIFFICULTY_INDEX")).$to_i(),g=u["$[]"](r("COMMAND_TYPE_INDEX")),e.total_success_dice=0,n=u["$[]"](r("ABILITY_INDEX")).$to_i(),t=e.$make_dice_roll(n),p=null==(_=N(t))[0]?c:_[0],d=null==_[2]?c:_[2],e.total_success_dice=i(e.total_success_dice,$=null==_[1]?c:_[1]),e.total_botch_dice=i(e.total_botch_dice,d),e.base_botch_dice=i(e.base_botch_dice,d),e.push_dice=i(e.push_dice,Y(n,i($,d))),I="("+n+"D6)",k=p,b(u["$[]"](r("SKILL_INDEX")))){if(n=u["$[]"](r("SKILL_INDEX")).$to_i(),t=e.$make_dice_roll(n),S=null==(_=N(t))[0]?c:_[0],$=null==_[1]?c:_[1],d=null==_[2]?c:_[2],D=u["$[]"](r("SKILL_SIGNED_INDEX")),E(g,"YZE")&&E(D,"-"))return"YZE\u30b3\u30de\u30f3\u30c9\u3067\u306f\u6280\u80fd\u30c0\u30a4\u30b9\u3092\u30de\u30a4\u30ca\u30b9\u6307\u5b9a\u3067\u304d\u307e\u305b\u3093\u3002";e.total_success_dice=E(g,"MYZ")&&E(D,"-")?Y(e.total_success_dice,$):i(e.total_success_dice,$),e.total_botch_dice=i(e.total_botch_dice,d),e.skill_botch_dice=i(e.skill_botch_dice,d),e.push_dice=i(e.push_dice,Y(n,$)),I=i(I,D+"("+n+"D6)"),k=i(k,""+D+S)}return b(u["$[]"](r("GEAR_INDEX")))&&(n=u["$[]"](r("GEAR_INDEX")).$to_i(),t=e.$make_dice_roll(n),w=null==(_=N(t))[0]?c:_[0],d=null==_[2]?c:_[2],e.total_success_dice=i(e.total_success_dice,$=null==_[1]?c:_[1]),e.total_botch_dice=i(e.total_botch_dice,d),e.gear_botch_dice=i(e.gear_botch_dice,d),e.push_dice=i(e.push_dice,Y(n,i($,d))),I=i(I,"+("+n+"D6)"),k=i(k,"+"+w)),e.$make_result_text(g,I,k)}),m(f,"$make_result_text",function(s,_,t){return E(s,"YZE")?this.$make_result_with_yze(_,t):E(s,"MYZ")?this.$make_result_with_myz(_,t):"Error"}),m(f,"$make_result_with_yze",function(s,_){var e,t=this;return e=s+" \uff1e "+_+" \u6210\u529f\u6570:"+t.total_success_dice,b(v(t.difficulty,0))?b(L(t.total_success_dice,t.difficulty))?r("Result").$success(e+" \u96e3\u6613\u5ea6="+t.difficulty+":\u5224\u5b9a\u6210\u529f\uff01"):r("Result").$failure(e+" \u96e3\u6613\u5ea6="+t.difficulty+":\u5224\u5b9a\u5931\u6557\uff01"):e}),m(f,"$make_result_with_myz",function(s,_){var e,u,t=this;return e=s+" \uff1e "+_+" \u6210\u529f\u6570:"+t.total_success_dice,u="\n\u51fa\u76ee1\uff1a[\u80fd\u529b\uff1a"+t.base_botch_dice+",\u6280\u80fd\uff1a"+t.skill_botch_dice+",\u30a2\u30a4\u30c6\u30e0\uff1a"+t.gear_botch_dice+") \u30d7\u30c3\u30b7\u30e5\u53ef\u80fd="+t.push_dice+"\u30c0\u30a4\u30b9",b(v(t.difficulty,0))?b(L(t.total_success_dice,t.difficulty))?r("Result").$success(e+" \u96e3\u6613\u5ea6="+t.difficulty+":\u5224\u5b9a\u6210\u529f\uff01"+u):r("Result").$failure(e+" \u96e3\u6613\u5ea6="+t.difficulty+":\u5224\u5b9a\u5931\u6557\uff01"+u):""+e+u}),m(f,"$make_dice_roll",function(s){var e,u,t=c;return e=(t=this.randomizer.$roll_barabara(s,6)).$count(6),u=t.$count(1),["["+t.$join(",")+"]",e,u]})})}}]);