(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[5620],{8686:(J,Q,C)=>{C(9993),Opal.queue(function(t){var G,P,N,o,m,_,R,F,B,q=t.module,z=t.klass,b=t.const_set,g=t.eqeqeq,h=t.def,A=t.send,E=t.rb_le,x=t.rb_minus,U=t.rb_ge,M=t.rb_plus,w=t.rb_times,I=t.hash2,d=t.truthy,T=t.rb_lt,v=t.eqeq,L=[],e=t.nil;return G=L,P=B=[q(L[0],"BCDice")].concat(G),R=[q(B[0],"GameSystem")].concat(P),F=t.$r(R),N=R,m=[o=z(R[0],F("Base"),"Emoklore")].concat(N),_=t.$r(m),o.$$prototype.randomizer=e,b(m[0],"ID","Emoklore"),b(m[0],"NAME","\u30a8\u30e2\u30af\u30ed\u30a2TRPG"),b(m[0],"SORT_KEY","\u3048\u3082\u304f\u308d\u3042TRPG"),b(m[0],"HELP_MESSAGE",'\u30fb\u6280\u80fd\u5024\u5224\u5b9a\uff08xDM<=y\uff09\n  "(\u500b\u6570)DM<=(\u5224\u5b9a\u5024)"\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n  \u30c0\u30a4\u30b9\u306e\u500b\u6570\u306f\u7701\u7565\u53ef\u80fd\u3067\u3001\u7701\u7565\u3057\u305f\u5834\u54081\u500b\u306b\u306a\u308a\u307e\u3059\u3002\n  \u4f8b\uff092DM<=5 DM<=8\n\u30fb\u6280\u80fd\u5024\u5224\u5b9a\uff08sDAa+z)\n  "(\u6280\u80fd\u30ec\u30d9\u30eb)DA(\u80fd\u529b\u5024)+(\u30dc\u30fc\u30ca\u30b9\u30c0\u30a4\u30b9)"\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n  \u30dc\u30fc\u30ca\u30b9\u30c0\u30a4\u30b9\u306e\u500b\u6570\u306f\u7701\u7565\u53ef\u80fd\u3067\u3001\u7701\u7565\u3057\u305f\u5834\u54080\u306b\u306a\u308a\u307e\u3059\u3002\n  \u6280\u80fd\u30ec\u30d9\u30eb\u306f1\uff5e3\u306e\u6570\u5024\u3001\u307e\u305f\u306f\u30d9\u30fc\u30b9\u6280\u80fd\u306e\u5834\u5408"b"\u304c\u5165\u308a\u307e\u3059\u3002\n  \u30c0\u30a4\u30b9\u306e\u500b\u6570\u306f\u6280\u80fd\u30ec\u30d9\u30eb\u3068\u30dc\u30fc\u30ca\u30b9\u30c0\u30a4\u30b9\u306e\u500b\u6570\u306b\u3088\u308a\u6c7a\u5b9a\u3057\u3001s+z\u500b\u306e\u30c0\u30a4\u30b9\u3092\u632f\u308a\u307e\u3059\u3002\uff08s="b"\u306e\u5834\u5408\u306fs=1\uff09\n  \u5224\u5b9a\u5024\u306fs+a\u3068\u306a\u308a\u307e\u3059\u3002\uff08s="b"\u306e\u5834\u5408\u306fs=0\uff09\n'),o.$register_prefix("\\d*DM<=","(B|\\d*)DA"),b(m[0],"CRITICAL_VALUE",1),b(m[0],"FUMBLE_VALUE",10),h(o,"$eval_game_system_specific_command",function($){var i;return g(/^\d*DM<=\d/,i=$)?this.$roll_dm($):g(/^(B|\d*)DA\d+(\+)?\d*/,i)?this.$roll_da($):e}),o.$private(),h(o,"$dice_roll",function($,r){var a,c,l,f,i=this,s=e,n=e,k=e;return s=i.randomizer.$roll_barabara($,10),n=A(s,"reject",[],function(u){return null==u&&(u=e),E(u,_("CRITICAL_VALUE"))}),a=x(s.$size(),n.$size()),c=A(n,"count",[],function(u){return null==u&&(u=e),E(u,r)}),l=A(n,"count",[],function(u){return null==u&&(u=e),U(u,_("FUMBLE_VALUE"))}),f=x(M(w(2,a),c),l),(k=i.$compare_result(f))["$text="]("["+s.$join(", ")+"] \uff1e "+f+" \uff1e "+i.$translate("Emoklore.success_count",I(["count"],{count:f}))+" "+k.$text()),k}),h(o,"$compare_result",function($){var r=this;return d(T($,0))?_("Result").$fumble(r.$translate("fumble")):v($,0)?_("Result").$failure(r.$translate("failure")):v($,1)?_("Result").$success(r.$translate("success")):v($,2)?_("Result").$critical(r.$translate("Emoklore.double")):v($,3)?_("Result").$critical(r.$translate("Emoklore.triple")):d(E($,9))?_("Result").$critical(r.$translate("Emoklore.miracle")):_("Result").$critical(r.$translate("Emoklore.catastrophe"))}),h(o,"$roll_dm",function($){var r,s=e,n=e,a=e,c=e,l=e;return s=/^(\d+)?DM<=(\d+)$/.$match($),!d(s)||(n=d(a=(r=s["$[]"](1))===e||null==r?e:r.$to_i())?a:1,c=s["$[]"](2).$to_i(),d(E(n,0)))?e:((l=this.$dice_roll(n,c))["$text="]("("+n+"DM<="+c+") \uff1e "+l.$text()),l)}),h(o,"$roll_da",function($){var r,s=e,n=e,a=e,c=e,l=e,f=e;return s=/^(B|\d+)?DA(\d+)(\+\d+)?$/.$match($),d(s)?(n=s["$[]"](3).$to_i(),a=M(v(s["$[]"](1),"B")?1:d(c=(r=s["$[]"](1))===e||null==r?e:r.$to_i())?c:1,n),l=M(s["$[]"](1).$to_i(),s["$[]"](2).$to_i()),(f=this.$dice_roll(a,l))["$text="]("("+$+") \uff1e ("+a+"DM<="+l+") \uff1e "+f.$text()),f):e})})}}]);