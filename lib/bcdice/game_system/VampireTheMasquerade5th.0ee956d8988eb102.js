(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[7115],{6409:(x,ee,q)=>{q(9993),Opal.queue(function(r){var Y,z,Z,f,t,$,h,j,y,k=r.module,B=r.klass,d=r.const_set,c=r.truthy,N=r.to_ary,D=r.rb_plus,b=r.def,I=r.rb_ge,m=r.rb_gt,U=r.rb_minus,X=r.rb_lt,L=r.eqeq,p=r.rb_times,w=r.rb_divide,G=r.send,V=[],e=r.nil;return Y=V,z=y=[k(V[0],"BCDice")].concat(Y),h=[k(y[0],"GameSystem")].concat(z),j=r.$r(h),Z=h,t=[f=B(h[0],j("Base"),"VampireTheMasquerade5th")].concat(Z),$=r.$r(t),f.$$prototype.randomizer=e,d(t[0],"ID","VampireTheMasquerade5th"),d(t[0],"NAME","Vampire: The Masquerade 5th Edition"),d(t[0],"SORT_KEY","\u3046\u3042\u3093\u306f\u3044\u3042\u3055\u307e\u3059\u304b\u308c\u3048\u30685"),d(t[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9(nVMFx+x)\n  \u6ce8\u610f\uff1aHunger\u30c0\u30a4\u30b9\u306f\u5185\u6570\u3068\u3057\u3066\u51e6\u7406\u3059\u308b\u3002\n        \u4f8b\uff1a9\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb\u3067Hunger\u30c0\u30a4\u30b93\u500b\u306a\u3089\u3070\u3001\u901a\u5e38\u30c0\u30a4\u30b96\u500b\u3001Hunger\u30c0\u30a4\u30b93\u500b\u3068\u306a\u308b\u3002\n        \u307e\u305f\u3001\u96e3\u6613\u5ea6\u306f\u5fc5\u8981\u6210\u529f\u6570\u3092\u8868\u3059\u3002\n\n  \u96e3\u6613\u5ea6\u6307\u5b9a\uff1a\u6210\u529f\u6570\u306e\u30ab\u30a6\u30f3\u30c8\u3001\u5224\u5b9a\u6210\u529f\u3068\u5931\u6557\u3001Critical\u51e6\u7406\u3001Critical Win\u306e\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\n             \uff08Hunger\u30c0\u30a4\u30b9\u304c\u3042\u308b\u5834\u5408\uff09Messy Critical\u3068Bestial Failure\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\n  \u4f8b) (\u96e3\u6613\u5ea6)VMF(\u901a\u5e38\u30c0\u30a4\u30b9)+(Hunger\u30c0\u30a4\u30b9)\n      (\u96e3\u6613\u5ea6)VMF(\u901a\u5e38\u30c0\u30a4\u30b9)\n\n  \u96e3\u6613\u5ea6\u7701\u7565\uff1a\u6210\u529f\u6570\u306e\u30ab\u30a6\u30f3\u30c8\u3001\u5224\u5b9a\u5931\u6557\u3001Critical\u51e6\u7406\u3001\uff08Hunger\u30c0\u30a4\u30b9\u304c\u3042\u308b\u5834\u5408\uff09Bestial Failure\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3046\n              \u5224\u5b9a\u6210\u529f\u3001Messy Critical\u306e\u30c1\u30a7\u30c3\u30af\u3092\u884c\u308f\u306a\u3044\n              Critical Win\u3001\uff08Hunger\u30c0\u30a4\u30b9\u304c\u3042\u308b\u5834\u5408\uff09Bestial Failure\u3001Messy Critical\u306e\u30d2\u30f3\u30c8\u3092\u51fa\u529b\n  \u4f8b) VMF(\u901a\u5e38\u30c0\u30a4\u30b9)+(Hunger\u30c0\u30a4\u30b9)\n      VMF(\u901a\u5e38\u30c0\u30a4\u30b9)\n\n  \u96e3\u6613\u5ea60\u6307\u5b9a\uff1aCritical\u51e6\u7406\u3068\u6210\u529f\u6570\u306e\u30ab\u30a6\u30f3\u30c8\u3092\u884c\u3044\u3001\u5168\u3066\u306e\u30c1\u30a7\u30c3\u30af\u3092\u884c\u308f\u306a\u3044\n  \u4f8b) 0VMF(\u901a\u5e38\u30c0\u30a4\u30b9)+(Hunger\u30c0\u30a4\u30b9)\n      0VMF(\u901a\u5e38\u30c0\u30a4\u30b9)\n\n"),d(t[0],"DIFFICULTY_INDEX",1),d(t[0],"DICE_POOL_INDEX",3),d(t[0],"HUNGER_DICE_INDEX",5),d(t[0],"NOT_CHECK_SUCCESS",-1),f.$register_prefix("\\d*VMF"),b(f,"$eval_game_system_specific_command",function(i){var u,n,o,a=this,s=e,_=e,E=e,l=e,g=e,C=e,F=e,R=e,S=e,M=e,H=e,T=e;return s=/^(\d+)?(VMF)(\d+)(\+(\d+))?$/.$match(i),c(s)?(_=s["$[]"]($("DICE_POOL_INDEX")).$to_i(),n=a.$make_dice_roll(_),E=null==(u=N(n))[0]?e:u[0],l=null==u[1]?e:u[1],g=null==u[2]?e:u[2],C="("+_+"D10",F=(u=s["$[]"]($("HUNGER_DICE_INDEX")))===e||null==u?e:u.$to_i(),c(F)?(o=a.$make_dice_roll(F),R=null==(n=N(o))[0]?e:n[0],S=null==n[1]?e:n[1],H=null==n[3]?e:n[3],g=D(g,M=null==n[2]?e:n[2]),l=D(l,S),C=C+"+"+F+"D10) \uff1e ["+E+"]+["+R+"] "):(M=0,H=0,C=C+") \uff1e ["+E+"] "),l=D(l,a.$get_critical_success(g)),T=c(s["$[]"]($("DIFFICULTY_INDEX")))?s["$[]"]($("DIFFICULTY_INDEX")).$to_i():$("NOT_CHECK_SUCCESS"),a.$get_roll_result(C,l,g,M,H,T)):""}),f.$private(),b(f,"$get_roll_result",function(i,u,n,o,a,s){var _;return i=i+" \u6210\u529f\u6570="+u,_=I(n,2),c(m(s,0))?(i=i+" \u96e3\u6613\u5ea6="+s,c(I(u,s))?(i=i+" \u5dee\u5206="+U(u,s),c(m(o,0))&&c(_)?$("Result").$critical(i+"\uff1a\u5224\u5b9a\u6210\u529f! [Messy Critical]"):c(_)?$("Result").$critical(i+"\uff1a\u5224\u5b9a\u6210\u529f! [Critical Win]"):$("Result").$success(i+"\uff1a\u5224\u5b9a\u6210\u529f!")):c(m(a,0))?$("Result").$fumble(i+"\uff1a\u5224\u5b9a\u5931\u6557! [Bestial Failure]"):$("Result").$failure(i+"\uff1a\u5224\u5b9a\u5931\u6557!")):c(X(s,0))?L(u,0)?c(m(a,0))?$("Result").$fumble(i+"\uff1a\u5224\u5b9a\u5931\u6557! [Bestial Failure]"):$("Result").$failure(i+"\uff1a\u5224\u5b9a\u5931\u6557!"):(c(m(a,0))&&(i+="\n\u3000\u5224\u5b9a\u5931\u6557\u306a\u3089 [Bestial Failure]"),c(m(o,0))&&c(_)?i+="\n\u3000\u5224\u5b9a\u6210\u529f\u306a\u3089 [Messy Critical]":c(_)&&(i+="\n\u3000\u5224\u5b9a\u6210\u529f\u306a\u3089 [Critical Win]"),i.$to_s()):i.$to_s()}),b(f,"$get_critical_success",function(i){return p(w(i,2).$to_i(),2)}),b(f,"$make_dice_roll",function(i){var n=e;return[(n=this.randomizer.$roll_barabara(i,10)).$join(","),G(n,"count",[],function(l){return null==l&&(l=e),I(l,6)}),n.$count(10),n.$count(1)]})})}}]);