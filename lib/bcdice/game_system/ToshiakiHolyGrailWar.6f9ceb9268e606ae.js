(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[4957],{1641:(X,Z,L)=>{L(9993),Opal.queue(function(r){var M,N,U,i,_,t,d,q,T,w=r.module,P=r.klass,a=r.const_set,s=r.def,S=r.hash2,$=r.truthy,c=r.rb_plus,D=r.rb_minus,H=r.thrower,R=r.rb_le,j=r.rb_divide,E=[],e=r.nil,f=r.$$$;return M=E,N=T=[w(E[0],"BCDice")].concat(M),d=[w(T[0],"GameSystem")].concat(N),q=r.$r(d),U=d,_=[i=P(d[0],q("Base"),"ToshiakiHolyGrailWar")].concat(U),t=r.$r(_),i.$$prototype.randomizer=e,a(_[0],"ID","ToshiakiHolyGrailWar"),a(_[0],"NAME","\u3068\u3057\u3042\u304d\u306e\u8056\u676f\u6226\u4e89TRPG"),a(_[0],"SORT_KEY","\u3068\u3057\u3042\u304d\u306e\u305b\u3044\u306f\u3044\u305b\u3093\u305d\u3046TRPG"),a(_[0],"HELP_MESSAGE","\u25a0 \u5224\u5b9a (Fx+y-z@a>=t)\n  \u88dc\u6b63\u5024\u30da\u30ca\u30eb\u30c6\u30a3\u3092\u81ea\u52d5\u8a08\u7b97\u3057\u3066\u30c0\u30a4\u30b9\u306e\u9762\u6570\u3092\u6c7a\u5b9a\u3057\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n  \u30c0\u30a4\u30b9\u9762\u6570\u306f2\u4ee5\u4e0a\u300110\u4ee5\u4e0b\u306e\u7bc4\u56f2\u306b\u5236\u9650\u3055\u308c\u307e\u3059\u3002\n  x: \u30b9\u30c6\u30fc\u30bf\u30b9\n  y: \u88dc\u6b63\u5024 (\u4efb\u610f)\n  z: \u30de\u30a4\u30ca\u30b9\u88dc\u6b63\u5024 (\u4efb\u610f)\n  a: \u30c0\u30a4\u30b9\u9762\u6570\u306e\u5897\u91cf (\u4efb\u610f)\n  t: \u76ee\u6a19\u5024 (\u4efb\u610f)\n  \u4f8b)\n    F8+11, F8+11-5, F8+11-5@1, F8+11+9-3-2@-1, F8+11-5>=50, F8\n"),i.$register_prefix("F"),s(i,"$eval_game_system_specific_command",function(u){return this.$roll_f(u)}),i.$private(),s(i,"$roll_f",function(u){try{H("eval_return");var h=this,n=e,o=e,G=e,m=e,y=e,z=e,A=e,p=e,g=e,k=e,l=e,v=e,I=e;return n=f(t("Command"),"Parser").$new(/F(\d+)(\+\d+)*(-\d+)*/,S(["round_type"],{round_type:f(t("RoundType"),"CEIL")})).$disable_modifier().$enable_critical().$parse(u),$(n)&&(o=n.$command().$match(/^F(\d+)((?:\+\d+)+)?((?:-\d+)+)?$/),$(o))?(G=o["$[]"](1).$to_i(),m=$(o["$[]"](2))?t("Arithmetic").$eval(o["$[]"](2),f(t("RoundType"),"CEIL")):0,y=$(o["$[]"](3))?t("Arithmetic").$eval(o["$[]"](3),f(t("RoundType"),"CEIL")):0,z=$(A=n.$critical())?A:0,p=[c(c(G,m),y),0].$max(),g=c(c(D(6,h.$positive_modifier_penalty(m)),h.$negative_modifier_bonus(y)),z).$clamp(2,10),l=(k=h.randomizer.$roll_barabara(p,g)).$sum(),v=$(n.$cmp_op()["$nil?"]())?t("Result").$new():$(l.$send(n.$cmp_op(),n.$target_number()))?t("Result").$success("\u6210\u529f"):t("Result").$failure("\u5931\u6557"),I=[n,"("+p+"D"+g+n.$cmp_op()+n.$target_number()+")",l+"["+k.$join(",")+"]",l,v.$text()].$compact(),v["$text="](I.$join(" \uff1e ")),v):e}catch(F){if(F===r.t_eval_return)return F.$v;throw F}}),s(i,"$positive_modifier_penalty",function(u){return $(R(u,10))?0:j(u,10).$to_i()}),s(i,"$negative_modifier_bonus",function(u){return $(R(u,-5))?1:0})})}}]);