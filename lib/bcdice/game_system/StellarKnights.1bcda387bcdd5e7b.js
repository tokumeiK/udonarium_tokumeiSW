(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[628],{5849:(ne,te,O)=>{O(9993),Opal.modules["bcdice/dice_table/table"]=function(r){var c,F,t,i,E,k,R,M,y,p=r.module,q=r.klass,A=r.hash2,x=r.defs,z=r.truthy,f=r.def,_=r.rb_minus,K=[],Y=r.nil;return c=K,F=y=[p(K[0],"BCDice")].concat(c),t=M=[p(y[0],"DiceTable")].concat(F),E=[i=q(M[0],null,"Table")].concat(t),k=r.$r(E),(R=i.$$prototype).times=R.sides=R.name=R.items=Y,x(i,"$from_i18n",function(g,T){var $=Y;return $=k("I18n").$t(g,A(["locale"],{locale:T})),this.$new($["$[]"]("name"),$["$[]"]("type"),$["$[]"]("items"))}),f(i,"$initialize",function(g,T,S){var $=this,h=Y;return $.name=g,$.items=S.$freeze(),h=/(\d+)D(\d+)/i.$match(T),z(h)||$.$raise(k("ArgumentError"),"Unexpected table type: "+T),$.times=h["$[]"](1).$to_i(),$.sides=h["$[]"](2).$to_i()}),f(i,"$roll",function(g){var S,T=this;return S=g.$roll_sum(T.times,T.sides),T.$choice(S)}),f(i,"$choice",function(g){var S,T=this;return S=_(g,T.times),k("RollResult").$new(T.name,g,T.items["$[]"](S))})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(r){var I,w,i,E,k,R,L,G,C,p=r.module,q=r.klass,A=r.hash2,x=r.defs,z=r.def,f=r.rb_plus,_=r.rb_times,K=r.rb_minus,Y=[],b=r.nil;return I=Y,w=C=[p(Y[0],"BCDice")].concat(I),i=G=[p(C[0],"DiceTable")].concat(w),k=[E=q(G[0],null,"D66GridTable")].concat(i),R=r.$r(k),(L=E.$$prototype).name=L.items=b,x(E,"$from_i18n",function(T,S){var h=b;return h=R("I18n").$t(T,A(["locale","raise"],{locale:S,raise:!0})),this.$new(h["$[]"]("name"),h["$[]"]("items"))}),z(E,"$initialize",function(T,S){return this.name=T,this.items=S.$freeze()}),z(E,"$roll",function(T){var $,h,N,U,J;return $=T.$roll_once(6),h=T.$roll_once(6),N=f(_($,10),h),U=K($,1),J=K(h,1),R("RollResult").$new(this.name,N,this.items["$[]"](U)["$[]"](J))})},Opal.queue(function(r){var k,T,J,d,s,e,m,H,j,$,h,L,p=r.module,q=r.klass,A=r.const_set,x=r.send2,z=r.find_super,f=r.def,_=r.truthy,K=r.eqeq,Y=r.thrower,b=r.rb_plus,c=r.send,I=r.rb_ge,y=r.hash2,C=r.rb_gt,F=r.range,w=r.to_ary,M=r.rb_le,G=r.top,P=[],t=r.nil,i=r.$$$;return G.$require("bcdice/dice_table/table"),G.$require("bcdice/dice_table/d66_grid_table"),k=P,T=L=[p(P[0],"BCDice")].concat(k),$=[p(L[0],"GameSystem")].concat(T),h=r.$r($),J=$,H=[m=q($[0],h("Base"),"StellarKnights")].concat(J),j=r.$r(H),m.$$prototype.randomizer=t,A(H[0],"ID","StellarKnights"),A(H[0],"NAME","\u9280\u5263\u306e\u30b9\u30c6\u30e9\u30ca\u30a4\u30c4"),A(H[0],"SORT_KEY","\u304d\u3093\u3051\u3093\u306e\u3059\u3066\u3089\u306a\u3044\u3064"),A(H[0],"HELP_MESSAGE","\u30fb\u30a2\u30bf\u30c3\u30af\u5224\u5b9a\u3000nSK[d][,k>l,...]\n[]\u5185\u306f\u7701\u7565\u53ef\u80fd\u3002\nn: \u30c0\u30a4\u30b9\u6570\u3001d: \u30a2\u30bf\u30c3\u30af\u5224\u5b9a\u306b\u304a\u3051\u308b\u5bfe\u8c61\u306e\u9632\u5fa1\u529b\u3001k, l: \u30c0\u30a4\u30b9\u306e\u51fa\u76ee\u304ck\u306a\u3089\u3070l\u306b\u5909\u66f4\uff08\u30a2\u30de\u30e9\u30f3\u30b5\u30b9\u306e\u30b9\u30ad\u30eb\u300c\u59cb\u307e\u308a\u306e\u90e8\u5c4b\u300d\u7528\uff09\nd\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u3092\u632f\u3063\u305f\u7d50\u679c\u306e\u307f\u8868\u793a\u3002\uff08nSK\u306fnB6\u3068\u540c\u3058\uff09\n\n4SK: \u30c0\u30a4\u30b9\u30924\u500b\u632f\u3063\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u8868\u793a\n4+2SK: \u30c0\u30a4\u30b9\u30924+2 (=6) \u500b\u632f\u3063\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u8868\u793a\n5/2SK: \u30c0\u30a4\u30b9\u30925\u500b\u306e\u534a\u5206 (=2) \u500b\u632f\u3063\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u8868\u793a\n(5+3)/2SK: \u30c0\u30a4\u30b9\u3092(5+3)\u500b\u306e\u534a\u5206 (=4) \u500b\u632f\u3063\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u8868\u793a\n5SK3: \u3010\u30a2\u30bf\u30c3\u30af\u5224\u5b9a\uff1a5\u30c0\u30a4\u30b9\u3011\u3001\u5bfe\u8c61\u306e\u9632\u5fa1\u529b\u30923\u3068\u3057\u3066\u6210\u529f\u6570\u3092\u8868\u793a\n3SK,1>6: \u30c0\u30a4\u30b9\u30923\u500b\u632f\u308a\u3001\u51fa\u76ee\u304c1\u306e\u30c0\u30a4\u30b9\u3092\u5168\u30666\u306b\u5909\u66f4\u3057\u3001\u305d\u306e\u7d50\u679c\u3092\u8868\u793a\n6SK4,1>6,2>6: \u3010\u30a2\u30bf\u30c3\u30af\u5224\u5b9a\uff1a6\u30c0\u30a4\u30b9\u3011\u3001\u51fa\u76ee\u304c1\u30682\u306e\u30c0\u30a4\u30b9\u3092\u5168\u30666\u306b\u5909\u66f4\u3001\u5bfe\u8c61\u306e\u9632\u5fa1\u529b\u30924\u3068\u3057\u3066\u6210\u529f\u6570\u3092\u8868\u793a\n\n\u30fb\u57fa\u672c\nTT\uff1a\u304a\u984c\u8868\nSTA    \uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868A\uff1a\u6642\u9593 (Situation Table A)\nSTB    \uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868B\uff1a\u5834\u6240 (ST B)\nSTB2[n]\uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868B \u305d\u306e2\uff1a\u5b66\u5712\u7de8 (ST B 2)\n\u3000n: 1(\u30a2\u30fc\u30bb\u30eb\u30c8\u30ec\u30a4), 2(\u30a4\u30c7\u30a2\u30b0\u30ed\u30ea\u30a2), 3(\u30b7\u30c8\u30e9), 4(\u30d5\u30a3\u30ed\u30bd\u30d5\u30a3\u30a2), 5(\u8056\u30a2\u30fc\u30b8\u30a7\u30c6\u30a3\u30a2), 6(SoA)\nSTC    \uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868C\uff1a\u8a71\u984c (ST C)\nALLS   \uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868\u5168\u3066\u3092\u4e00\u62ec\u3067\uff08\u5b66\u5712\u7de8\u9664\u304f\uff09\nGAT\uff1a\u6240\u5c5e\u7d44\u7e54\u6c7a\u5b9a (Gakuen Table)\nHOT\uff1a\u5e0c\u671b\u8868 (Hope Table)\nDET\uff1a\u7d76\u671b\u8868 (Despair Table)\nWIT\uff1a\u9858\u3044\u4e8b\u8868 (Wish Table)\nYST\uff1a\u3042\u306a\u305f\u306e\u7269\u8a9e\u8868 (Your Story Table)\nYSTA\uff1a\u3042\u306a\u305f\u306e\u7269\u8a9e\u8868\uff1a\u7570\u4e16\u754c (YST Another World)\nPET\uff1a\u6027\u683c\u8868 (Personality Table)\n    \u6027\u683c\u8868\u30922\u56de\u632f\u308a\u3001\u6027\u683c\u3092\u6c7a\u5b9a\u3059\u308b\n\n\u30fb\u9727\u3068\u685c\u306e\u30de\u30eb\u30b8\u30ca\u30ea\u30a2\nYSTM\uff1a\u3042\u306a\u305f\u306e\u7269\u8a9e\u8868\uff1a\u30de\u30eb\u30b8\u30ca\u30ea\u30a2\u4e16\u754c (YST Marginalia)\nSTM\uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868\uff1a\u30de\u30eb\u30b8\u30ca\u30ea\u30a2\u4e16\u754c (ST Marginalia)\nYSTL\uff1a\u3042\u306a\u305f\u306e\u7269\u8a9e\u8868\uff1a\u624b\u7d19\u4e16\u754c (YST Letter)\nYSTR\uff1a\u3042\u306a\u305f\u306e\u7269\u8a9e\u8868\uff1a\u30ea\u30b3\u30ec\u30af\u30c8\u30fb\u30c9\u30fc\u30eb (YST Recollect-doll)\nSTBR\uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868B\uff1a\u5834\u6240\uff08\u30ea\u30b3\u30ec\u30af\u30c8\u30fb\u30c9\u30fc\u30eb\uff09 (ST B Recollect-doll)\nSTCR\uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868C\uff1a\u30ea\u30b3\u30ec\u30af\u30c8 (ST C Recollect)\nSTBS\uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868B\uff1a\u30b7\u30c8\u30e9\u30bb\u30c3\u30c6\u30a3\u30f3\u30b0 (ST B Sut Tu Real)\nSTE\uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868\uff1a\u30a8\u30af\u30ea\u30d7\u30b9\u5c02\u7528 (ST Eclipse)\n\n\u30fb\u7d2b\u5f3e\u306e\u30aa\u30eb\u30c8\u30ea\u30f4\u30fc\u30c8\nFT\uff1a\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u8868 (Fragment Table)\n    \u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u8868\u3092\uff15\u56de\u632f\u308b\nFTx\uff1a\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u8868\u3092x\u56de\u632f\u308b\nYSTB\uff1a\u3042\u306a\u305f\u306e\u7269\u8a9e\u8868\uff1a\u30d6\u30ea\u30f3\u30ac\u30fc (YST Bringer)\nYSTF\uff1a\u3042\u306a\u305f\u306e\u7269\u8a9e\u8868\uff1a\u30d5\u30a9\u30fc\u30b8 (YST Forge)\nSTAL\uff1a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868\uff1a\u30aa\u30eb\u30c8\u30ea\u30f4\u30fc\u30c8 (ST Alt-Levoot)\n"),f(m,"$initialize",function d(l){var e=this;return d.$$p=null,x(e,z(e,"initialize",d,!1,!0),"initialize",[l],null),e.sort_barabara_dice=!0,e.d66_sort_type=i(j("D66SortType"),"NO_SORT")}),f(m,"$eval_game_system_specific_command",function(l){try{Y("eval_return");var e=this,a=t,n=t,B=t,u=t,o=t;return l=l.$upcase(),_(a=i(e.$class(),"TABLES")["$[]"](l))?a.$roll(e.randomizer):_(n=/([()+\/\d]+)SK(\d)?((,\d>\d)+)?/.$match(l))?(B=j("Arithmetic").$eval(n["$[]"](1),i(j("RoundType"),"FLOOR")),_(B["$nil?"]())?t:e.$resolute_action(B,_(u=n["$[]"](2))?n["$[]"](2).$to_i():u,n["$[]"](3))):K(l,"STB2")?e.$roll_all_situation_b2_tables():K(l,"ALLS")?e.$roll_all_situation_tables():K(l,"PET")?e.$roll_personality_table():_(n=/FT(\d+)?/.$match(l))?(o=(_(u=n["$[]"](1))?u:5).$to_i(),e.$roll_fragment_table(o)):t}catch(v){if(v===r.t_eval_return)return v.$v;throw v}}),m.$private(),f(m,"$resolute_action",function(l,s,e){var B,a=this,n=t,u=t,o=t,v=t,V=t,X=t;return B=(n=a.randomizer.$roll_barabara(l,6).$sort()).$join(","),u="("+a.$remake_command(l,s,e)+") \uff1e "+B,_(n["$empty?"]())?b(u,a.$translate("StellarKnights.SK.no_dice_error")):(o=a.$parse_dice_change_rules(e),c(o,"each",[],function(D){return null==D&&(D=t),c(n,"map!",[],function(Q){return null==Q&&(Q=t),K(Q,D["$[]"]("from"))?D["$[]"]("to"):Q})}),_(o["$empty?"]())||(n["$sort!"](),u=b(u," \uff1e ["+n.$join(",")+"]")),_(s["$nil?"]())?(v=!1,V=!1):(X=c(n,"count",[],function(D){return null==D&&(D=t),I(D,s)}),u=b(u,b(" \uff1e ",a.$translate("StellarKnights.SK.success_num",y(["success_num"],{success_num:X})))),v=C(X,0),V=v["$!"]()),c(j("Result").$new(u),"tap",[],function(D){var W;return null==D&&(D=t),D["$success="](v),c(D,"failure=",W=[V]),W[W.length-1]}))}),f(m,"$remake_command",function(l,s,e){var a=t;return a=l+"SK",_(s["$nil?"]())||(a=b(a,s.$to_s())),_(e["$nil?"]())||(a=b(a,e)),a}),f(m,"$parse_dice_change_rules",function(l){return _(l["$nil?"]())?[]:(l=l["$[]"](F(1,-1,!1)),c(l.$split(","),"map",[],function(e){var a=t;return null==e&&(e=t),a=c(e.$split(">"),"map",[],"to_i".$to_proc()),y(["from","to"],{from:a["$[]"](0),to:a["$[]"](1)})}))}),f(m,"$roll_all_situation_b2_tables",function(){return c(F(1,6,!1),"map",[],function s(e){var a=null==s.$$s?this:s.$$s;return null==a.randomizer&&(a.randomizer=t),null==e&&(e=t),i(a.$class(),"TABLES")["$[]"]("STB2"+e).$roll(a.randomizer)},{$$s:this}).$join("\n")}),f(m,"$roll_all_situation_tables",function(){return c(["STA","STB","STC"],"map",[],function s(e){var a=null==s.$$s?this:s.$$s;return null==a.randomizer&&(a.randomizer=t),null==e&&(e=t),i(a.$class(),"TABLES")["$[]"](e).$roll(a.randomizer)},{$$s:this}).$join("\n")}),f(m,"$roll_personality_table",function(){var l,s,a,n,B,u,e=this;return s=e.$get_table_by_d66(e.$translate("StellarKnights.PET.items")),a=null==(l=w(s))[0]?t:l[0],n=null==l[1]?t:l[1],s=e.$get_table_by_d66(e.$translate("StellarKnights.PET.items")),B=null==(l=w(s))[0]?t:l[0],u=null==l[1]?t:l[1],e.$translate("StellarKnights.PET.name")+"("+n+","+u+") \uff1e "+e.$translate("StellarKnights.PET.result",y(["value1","value2"],{value1:a,value2:B}))}),f(m,"$roll_fragment_table",function(l){var s=this,e=t,a=t,n=t;return _(M(l,0))?t:(e=c(j("Array"),"new",[l],function u(){var o=null==u.$$s?this:u.$$s;return o.$get_table_by_d66(o.$translate("StellarKnights.FT.items"))},{$$s:s}),a=c(e,"map",[],function(o){return null==o&&(o=t),o["$[]"](0)}),n=c(e,"map",[],function(o){return null==o&&(o=t),o["$[]"](1)}),s.$translate("StellarKnights.FT.name")+"("+n.$join(",")+") \uff1e "+a.$join(s.$translate("StellarKnights.FT.sep")))}),s=[d=r.get_singleton_class(m)].concat(H),e=r.$r(s),d.$private(),f(d,"$translate_tables",function(n){return y(["TT","STA","STB","STB21","STB22","STB23","STB24","STB25","STB26","STC","GAT","HOT","DET","WIT","YST","YSTA","YSTM","STM","YSTL","YSTR","STBR","STCR","STBS","STE","YSTB","YSTF","STAL"],{TT:i(e("DiceTable"),"D66GridTable").$from_i18n("StellarKnights.tables.TT",n),STA:i(e("DiceTable"),"Table").$from_i18n("StellarKnights.tables.STA",n),STB:i(e("DiceTable"),"D66OneThirdTable").$from_i18n("StellarKnights.tables.STB",n),STB21:i(e("DiceTable"),"Table").$from_i18n("StellarKnights.tables.STB21",n),STB22:i(e("DiceTable"),"Table").$from_i18n("StellarKnights.tables.STB22",n),STB23:i(e("DiceTable"),"Table").$from_i18n("StellarKnights.tables.STB23",n),STB24:i(e("DiceTable"),"Table").$from_i18n("StellarKnights.tables.STB24",n),STB25:i(e("DiceTable"),"Table").$from_i18n("StellarKnights.tables.STB25",n),STB26:i(e("DiceTable"),"Table").$from_i18n("StellarKnights.tables.STB26",n),STC:i(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.STC",n),GAT:i(e("DiceTable"),"Table").$from_i18n("StellarKnights.tables.GAT",n),HOT:i(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.HOT",n),DET:i(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.DET",n),WIT:i(e("DiceTable"),"D66OneThirdTable").$from_i18n("StellarKnights.tables.WIT",n),YST:i(e("DiceTable"),"D66OneThirdTable").$from_i18n("StellarKnights.tables.YST",n),YSTA:i(e("DiceTable"),"D66OneThirdTable").$from_i18n("StellarKnights.tables.YSTA",n),YSTM:i(e("DiceTable"),"D66OneThirdTable").$from_i18n("StellarKnights.tables.YSTM",n),STM:i(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.STM",n),YSTL:i(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.YSTL",n),YSTR:i(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.YSTR",n),STBR:i(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.STBR",n),STCR:i(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.STCR",n),STBS:i(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.STBS",n),STE:i(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.STE",n),YSTB:i(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.YSTB",n),YSTF:i(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.YSTF",n),STAL:i(e("DiceTable"),"D66HalfGridTable").$from_i18n("StellarKnights.tables.STAL",n)})}),A(H[0],"TABLES",m.$translate_tables("ja_jp")),m.$register_prefix("[()+\\/\\d]+SK","STB2","ALLS","PET","FT",j("TABLES").$keys())})}}]);