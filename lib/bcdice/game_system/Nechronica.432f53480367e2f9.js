(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[3532],{8885:(Z,O,Q)=>{Q(9993),Opal.modules["bcdice/dice_table/table"]=function(e){var R,D,g,b,H,w,v,B,T,E=e.module,I=e.klass,N=e.hash2,P=e.defs,F=e.truthy,l=e.def,s=e.rb_minus,p=[],d=e.nil;return R=p,D=T=[E(p[0],"BCDice")].concat(R),g=B=[E(T[0],"DiceTable")].concat(D),H=[b=I(B[0],null,"Table")].concat(g),w=e.$r(H),(v=b.$$prototype).times=v.sides=v.name=v.items=d,P(b,"$from_i18n",function(m,$){var _=d;return _=w("I18n").$t(m,N(["locale"],{locale:$})),this.$new(_["$[]"]("name"),_["$[]"]("type"),_["$[]"]("items"))}),l(b,"$initialize",function(m,$,c){var _=this,x=d;return _.name=m,_.items=c.$freeze(),x=/(\d+)D(\d+)/i.$match($),F(x)||_.$raise(w("ArgumentError"),"Unexpected table type: "+$),_.times=x["$[]"](1).$to_i(),_.sides=x["$[]"](2).$to_i()}),l(b,"$roll",function(m){var c,$=this;return c=m.$roll_sum($.times,$.sides),$.$choice(c)}),l(b,"$choice",function(m){var c,$=this;return c=s(m,$.times),w("RollResult").$new($.name,m,$.items["$[]"](c))})},Opal.queue(function(e){var H,m,W,o,t,n,u,y,h,c,_,v,E=e.module,I=e.klass,N=e.const_set,P=e.send2,F=e.find_super,l=e.def,s=e.truthy,p=e.eqeq,d=e.neqeq,z=e.rb_ge,R=e.send,C=e.rb_le,T=e.rb_gt,q=e.hash2,D=e.rb_plus,S=e.rb_minus,j=[],r=e.nil,g=e.$$$;return e.top.$require("bcdice/dice_table/table"),H=j,m=v=[E(j[0],"BCDice")].concat(H),c=[E(v[0],"GameSystem")].concat(m),_=e.$r(c),W=c,y=[u=I(c[0],_("Base"),"Nechronica")].concat(W),h=e.$r(y),u.$$prototype.randomizer=r,N(y[0],"ID","Nechronica"),N(y[0],"NAME","\u30cd\u30af\u30ed\u30cb\u30ab"),N(y[0],"SORT_KEY","\u306d\u304f\u308d\u306b\u304b"),N(y[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u3000(nNC+m)\n\u3000\u30c0\u30a4\u30b9\u6570n\u3001\u4fee\u6b63\u5024m\u3067\u5224\u5b9a\u30ed\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059(\u7701\u7565=1)\n\u3000\u30c0\u30a4\u30b9\u6570\u304c2\u4ee5\u4e0a\u306e\u6642\u306e\u30d1\u30fc\u30c4\u7834\u640d\u6570\u3082\u8868\u793a\u3057\u307e\u3059\u3002\n\u30fb\u653b\u6483\u5224\u5b9a\u3000(nNA+m)\n\u3000\u30c0\u30a4\u30b9\u6570n\u3001\u4fee\u6b63\u5024m\u3067\u653b\u6483\u5224\u5b9a\u30ed\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059(\u7701\u7565=1)\n\u3000\u547d\u4e2d\u90e8\u4f4d\u3068\u30c0\u30a4\u30b9\u6570\u304c2\u4ee5\u4e0a\u306e\u6642\u306e\u30d1\u30fc\u30c4\u7834\u640d\u6570\u3082\u8868\u793a\u3057\u307e\u3059\u3002\n\n\u8868\n\u30fb\u59c9\u59b9\u3078\u306e\u672a\u7df4\u8868 nm\n\u30fb\u4e2d\u7acb\u8005\u3078\u306e\u672a\u7df4\u8868 nmn\n\u30fb\u6575\u3078\u306e\u672a\u7df4\u8868 nme\n"),l(u,"$initialize",function o(i){var n=this;return o.$$p=null,P(n,F(n,"initialize",o,!1,!0),"initialize",[i],null),n.sort_add_dice=!0,n.sort_barabara_dice=!0,n.default_target_number=6}),l(u,"$eval_game_system_specific_command",function(i){var n,t=this;return s(n=t.$roll_tables(i,g(t.$class(),"TABLES")))?n:t.$nechronica_check(i)}),l(u,"$result_nd10",function(i,t,n,f,a){return d(n.$count(),1)||d(f,">=")||s(a["$nil?"]())||p(a,"?")?r:this.$result_nechronica([i],a)}),u.$private(),l(u,"$result_nechronica",function(i,t){var n=this,f=r,a=r;return s(z(i.$max(),t))?s(z(i.$max(),11))?h("Result").$critical(n.$translate("Nechronica.critical")):h("Result").$success(n.$translate("success")):p(R(i,"count",[],function(k){return null==k&&(k=r),C(k,1)}),0)?h("Result").$failure(n.$translate("failure")):s(T(i.$size(),1))?(f=n.$translate("Nechronica.break_all_parts"),a=n.$translate("Nechronica.fumble"),h("Result").$fumble(a+" \uff1e "+f)):h("Result").$fumble(n.$translate("Nechronica.fumble"))}),l(u,"$r_backward_compatibility",function(i){var t=r;return t=i.$match(/^(\d)?R10([+\-\d]+)?(\[(\d+)\])?$/),s(t)?p(t["$[]"](4),"1")?t["$[]"](1)+"NA"+t["$[]"](2):t["$[]"](1)+"NC"+t["$[]"](2):i}),l(u,"$nechronica_check",function(i){var t=this,n=r,f=r,a=r,M=r,k=r,L=r,K=r,Y=r,G=r,J=r;return i=t.$r_backward_compatibility(i),n=g(h("Command"),"Parser").$new(/N[CA](10)?/,q(["round_type"],{round_type:t.$round_type()})).$enable_prefix_number().$parse(i),s(n)?(f=[1,n.$prefix_number().$to_i()].$max(),a=s(M=n.$modify_number())?M:0,k=t.randomizer.$roll_barabara(f,10).$sort(),K=(L=R(k,"map",[],function(U){return null==U&&(U=r),D(U,a)})).$max(),s(n.$command()["$start_with?"]("NA"))&&(Y=t.$get_hit_location(K)),G=t.$result_nechronica(L,6),J=["("+n+")","["+k.$join(",")+"]"+h("Format").$modifier(a),K+"["+L.$join(",")+"]",G.$text(),Y].$compact(),G["$text="](J.$join(" \uff1e ")),G):r}),l(u,"$get_hit_location",function(i){var f=r;return s(C(i,5))?r:(f=this.$translate("Nechronica.hit_location.table")["$[]"](S(i,6).$clamp(0,5)),s(T(i,10))?D(f,this.$translate("Nechronica.hit_location.additional_damage",q(["damage"],{damage:S(i,10)}))):f)}),t=[o=e.get_singleton_class(u)].concat(y),n=e.$r(t),o.$private(),l(o,"$translate_tables",function(a){return q(["NM","NMN","NME"],{NM:g(n("DiceTable"),"Table").$from_i18n("Nechronica.table.NM",a),NMN:g(n("DiceTable"),"Table").$from_i18n("Nechronica.table.NMN",a),NME:g(n("DiceTable"),"Table").$from_i18n("Nechronica.table.NME",a)})}),N(y[0],"TABLES",u.$translate_tables("ja_jp")),u.$register_prefix("\\d?NC","\\d?NA","\\dR10",h("TABLES").$keys())})}}]);