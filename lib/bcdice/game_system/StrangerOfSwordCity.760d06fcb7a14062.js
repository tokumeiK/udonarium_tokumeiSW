(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[1593],{5214:(V,Y,T)=>{T(9993),Opal.queue(function(r){var G,A,I,s,_,c,R,N,z,h=r.module,w=r.klass,d=r.const_set,D=r.send2,q=r.find_super,o=r.def,u=r.truthy,f=r.rb_plus,x=r.rb_ge,E=r.eqeq,M=r.rb_lt,p=r.send,v=[],$=r.nil,k=r.$$$;return G=v,A=z=[h(v[0],"BCDice")].concat(G),R=[h(z[0],"GameSystem")].concat(A),N=r.$r(R),I=R,_=[s=w(R[0],N("Base"),"StrangerOfSwordCity")].concat(I),c=r.$r(_),s.$$prototype.randomizer=$,d(_[0],"ID","StrangerOfSwordCity"),d(_[0],"NAME","\u5263\u306e\u8857\u306e\u7570\u90a6\u4ebaTRPG"),d(_[0],"SORT_KEY","\u3064\u308b\u304d\u306e\u307e\u3061\u306e\u3044\u307b\u3046\u3057\u3093TRPG"),d(_[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u3000xSR or xSRy or xSR+y or xSR-y or xSR+y>=z\n\u3000x=\u30c0\u30a4\u30b9\u6570\u3001y=\u4fee\u6b63\u5024(\u7701\u7565\u53ef\u3001\xb1\u7701\u7565\u6642\u306f\uff0b\u3068\u3057\u3066\u6271\u3046)\u3001z=\u96e3\u6613\u5ea6(\u7701\u7565\u53ef)\n\u3000\u5224\u5b9a\u6642\u306f\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u30fb\u901a\u5e38\u306enD6\u3067\u306f\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u306f\u884c\u3044\u307e\u305b\u3093\u3002\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),s.$register_prefix("\\d+SR"),o(s,"$initialize",function l(t){var e=this;return l.$$p=null,D(e,q(e,"initialize",l,!1,!0),"initialize",[t],null),e.sort_add_dice=!0,e.d66_sort_type=k(c("D66SortType"),"NO_SORT"),e.round_type=k(c("RoundType"),"FLOOR")}),o(s,"$eval_game_system_specific_command",function(t){var e=$;return this.$debug("eval_game_system_specific_command command",t),t=t.$upcase(),e=this.$checkRoll(t),u(e["$instance_of?"](c("Result")))||u(e["$empty?"]()),e}),o(s,"$checkRoll",function(t){var i=this,e=$,n=$,g=$,m=$,a=$,y=$,b=$,C=$,S=$;return i.$debug("checkRoll begin command",t),(e=c("Result").$new())["$text="](""),u(t["$=~"](/^(\d+)SR([+-]?\d+)?(>=(\d+))?$/i))?(n=c("Regexp").$last_match(1).$to_i(),g=c("Regexp").$last_match(2).$to_i(),u(c("Regexp").$last_match(4))&&(m=c("Regexp").$last_match(4).$to_i()),y=(a=i.randomizer.$roll_barabara(n,6).$sort()).$sum(),b=f(y,g),C=i.$getModifyText(g),e["$text="](f(e.$text(),"("+t+") \uff1e "+y+"["+a.$join(",")+"]"+C+" \uff1e "+b)),S=i.$getCriticalResult(a),u(S["$nil?"]())?u(i.$isFumble(a,n))?(e["$fumble="](!0),e["$failure="](!0),e["$text="](f(e.$text()," \uff1e \u30d5\u30a1\u30f3\u30d6\u30eb")),e):(u(m["$nil?"]())||(u(x(b,m))?(e["$success="](!0),e["$text="](f(e.$text()," \uff1e \u6210\u529f"))):(e["$failure="](!0),e["$text="](f(e.$text()," \uff1e \u5931\u6557")))),e):(e["$critical="](!0),e["$success="](!0),e["$text="](f(e.$text()," \uff1e \u30af\u30ea\u30c6\u30a3\u30ab\u30eb(+"+S+"D6)")),e)):e}),o(s,"$getModifyText",function(t){return E(t,0)?"":u(M(t,0))?t.$to_s():"+"+t}),o(s,"$getCriticalResult",function(t){var i=$;return i=p(t,"select",[],function(n){return null==n&&(n=$),n["$=="](6)}).$size(),u(x(i,2))?i.$to_s():$}),o(s,"$isFumble",function(t,i){return x(p(t,"select",[],function(n){return null==n&&(n=$),n["$=="](1)}).$size(),i)})})}}]);