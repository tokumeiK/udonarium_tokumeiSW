(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[1919],{9894:(O,ee,M)=>{M(9993),Opal.queue(function(i){var P,F,W,m,w,b,j,Q,B,R=i.module,H=i.klass,q=i.const_set,I=i.eqeq,K=i.neqeq,c=i.truthy,y=i.rb_ge,L=i.rb_gt,g=i.rb_times,p=i.rb_divide,z=i.def,f=i.rb_lt,C=i.to_ary,a=i.rb_minus,u=i.rb_plus,A=[],r=i.nil;return P=A,F=B=[R(A[0],"BCDice")].concat(P),j=[R(B[0],"GameSystem")].concat(F),Q=i.$r(j),W=j,w=[m=H(j[0],Q("Base"),"Chill")].concat(W),b=i.$r(w),m.$$prototype.randomizer=r,q(w[0],"ID","Chill"),q(w[0],"NAME","Chill"),q(w[0],"SORT_KEY","\u3061\u308b"),q(w[0],"HELP_MESSAGE",'\u30fb\u30b9\u30c8\u30e9\u30a4\u30af\u30fb\u30e9\u30f3\u30af\u3000(SRx)\n\u3000"SR\u30b9\u30c8\u30e9\u30a4\u30af\u30fb\u30e9\u30f3\u30af"\u306e\u5f62\u3067\u8a18\u5165\u3057\u307e\u3059\u3002\n\u3000\u30b9\u30c8\u30e9\u30a4\u30af\u30fb\u30e9\u30f3\u30af\u30fb\u30c1\u30e3\u30fc\u30c8\u306b\u5f93\u3063\u3066\u81ea\u52d5\u3067\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\n\u3000\u8ca0\u50b7\u3068\u30b9\u30bf\u30df\u30ca\u30ed\u30b9\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002\n\u3000\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3068\u540c\u69d8\u306b\u3001\u4ed6\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\u306b\u96a0\u308c\u3066\u30ed\u30fc\u30eb\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\u3000\u4f8b\uff09SR7\u3000\u3000\u3000sr13\u3000\u3000\u3000SR(7+4)\u3000\u3000\u3000Ssr10\n'),m.$register_prefix("SR"),z(m,"$result_1d100",function(s,e,$,_){return I(_,"?")||K($,"<=")?r:c(y(s,100))?b("Result").$fumble("\u30d5\u30a1\u30f3\u30d6\u30eb"):c(L(s,_))?b("Result").$failure("\u5931\u6557"):c(y(s,g(_,.9)))?b("Result").$success("\uff2c\u6210\u529f"):c(y(s,p(_,2).$to_i()))?b("Result").$success("\uff2d\u6210\u529f"):c(y(s,p(_,10).$to_i()))?b("Result").$success("\uff28\u6210\u529f"):b("Result").$critical("\uff23\u6210\u529f")}),z(m,"$eval_game_system_specific_command",function(s){return this.$roll_strike_rank_result(s)}),z(m,"$roll_strike_rank_result",function(s){var e,$,_=this,l=r,n=r,o=r,t=r,d=r,h=r,D=r,G=r,v=r,k=r,x=r,S=r;return _.$debug("strike_rank begin string",s),l=0,n=0,o="",t="",d="",c(/(^|\s)[sS]?(SR|sr)(\d+)($|\s)/["$=~"](s))?(h=b("Regexp").$last_match(3).$to_i(),c(f(h,14))?($=_.$check_strike_rank(h),n=null==(e=C($))[0]?r:e[0],o=null==e[1]?r:e[1],t=null==e[2]?r:e[2],d=null==e[3]?r:e[3],$=_.$check_strike_rank(a(h,3)),l=null==(e=C($))[0]?r:e[0],D=null==e[1]?r:e[1],G=null==e[2]?r:e[2],v=null==e[3]?r:e[3],o=u(u(o,", "),D),t=u(t,u(", ",G)),d=u(u(d,", "),v)):($=_.$check_strike_rank(13),n=null==(e=C($))[0]?r:e[0],t=null==e[2]?r:e[2],d=null==e[3]?r:e[3],l=(k=_.randomizer.$roll_barabara(4,10)).$sum(),v=k.$join(","),o=u(u("5d10*3, 4d10+",g(a(h,13),2).$to_s()),"d10"),t=u(t,u(", ",l.$to_s())),d=d+", "+v,x=(k=_.randomizer.$roll_barabara(g(a(h,13),2),10)).$sum(),v=k.$join(","),d=u(d,"+"+v),t=u(t,"+"+x),l=u(l,x)),S=d+" \uff1e "+t+" \uff1e \u30b9\u30bf\u30df\u30ca\u640d\u5931"+n+", \u8ca0\u50b7"+l,s=u(s,u(":",o)),c(S["$empty?"]())?"1":(_.$debug("strike_rank end output",S="("+s+") \uff1e "+S),S)):(_.$debug("invalid string",s),"1")}),z(m,"$check_strike_rank",function(s){var e=this,$=r,_=r,l=r,n=r,o=r,t=r;return s=s.$to_i(),$="",_="",l="",n=0,c(f(s,1))?(n=0,l="-",_="-",$="-"):c(f(s,2))?($="0or1",l=(n=e.randomizer.$roll_once(2)).$to_s(),_=(n=a(n,1)).$to_s()):c(f(s,3))?($="1or2",l=(n=e.randomizer.$roll_once(2)).$to_s(),_=n.$to_s()):c(f(s,4))?($="1d5",l=(n=e.randomizer.$roll_once(5)).$to_s(),_=n.$to_s()):c(f(s,10))?($=u(a(s,3).$to_s(),"d10"),_=(n=(o=e.randomizer.$roll_barabara(a(s,3),10)).$sum()).$to_s(),l=o.$join(",")):c(f(s,13))?($=u(a(s,6).$to_s(),"d10*2"),_=(t=(o=e.randomizer.$roll_barabara(a(s,6),10)).$sum())+"*2",n=g(t,2),l="("+o.$join(",")+")*2"):($="5d10*3",_=(t=(o=e.randomizer.$roll_barabara(5,10)).$sum())+"*3",n=g(t,3),l="("+o.$join(",")+")*3"),[n,$,_,l]})})}}]);