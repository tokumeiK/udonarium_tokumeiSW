(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[517],{1329:(n0,$0,Y)=>{Y(9993),Opal.queue(function(i){var W,O,i0,o,q,p,M,T,t0,K,A=i.module,j=i.klass,D=i.const_set,J=i.send2,Q=i.find_super,S=i.def,u=i.truthy,w=i.rb_gt,B=i.rb_lt,d=i.rb_minus,y=i.eqeqeq,s=i.rb_plus,F=i.neqeq,C=i.eqeq,z=i.rb_ge,U=i.send,G=[],t=i.nil;return W=G,O=K=[A(G[0],"BCDice")].concat(W),T=[A(K[0],"GameSystem")].concat(O),t0=i.$r(T),i0=T,q=[o=j(T[0],t0("Base"),"EarthDawn")].concat(i0),p=i.$r(q),(M=o.$$prototype).string=M.isFailed=t,D(q[0],"ID","EarthDawn"),D(q[0],"NAME","\u30a2\u30fc\u30b9\u30c9\u30fc\u30f3"),D(q[0],"SORT_KEY","\u3042\u3042\u3059\u3068\u304a\u3093"),D(q[0],"HELP_MESSAGE","\u30b9\u30c6\u30c3\u30d7\u30c0\u30a4\u30b9\u3000(xEn+k)\n\u30b9\u30c6\u30c3\u30d7x\u3001\u76ee\u6a19\u5024n(\u7701\u7565\u53ef\u80fd\uff09\u3001\u30ab\u30eb\u30de\u30c0\u30a4\u30b9k(D2-D20)\u3067\u30b9\u30c6\u30c3\u30d7\u30c0\u30a4\u30b9\u3092\u30ed\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u632f\u308a\u8db3\u3057\u3082\u81ea\u52d5\u3002\n\u4f8b\uff099E\u300010E8\u300010E+D12\n"),o.$register_prefix("\\d+e"),S(o,"$initialize",function m(g){var r=this;return m.$$p=null,J(r,Q(r,"initialize",m,!1,!0),"initialize",[g],null),r.sort_add_dice=!0}),S(o,"$eval_game_system_specific_command",function(g){return this.$ed_step(g)}),S(o,"$ed_step",function(g){return this.$getStepResult(g)}),S(o,"$getStepResult",function(g){var e=this,r=t,$=t,l=t,c=t,n=t,_=t,a=t,f=t,b=t,h=t,k=t,x=t,R=t,E=t,v=t,N=t,H=t,I=t,L=t,P=t;return!u(/(\d+)E(\d+)?(\+)?(\d+)?(d\d+)?/i["$=~"](g))||(r=0,e.isFailed=!0,$=p("Regexp").$last_match(1).$to_i(),l=0,c=!1,n=0,_=0,u(w($,40))&&($=40),u(p("Regexp").$last_match(2))&&(l=p("Regexp").$last_match(2).$to_i(),u(w(l,43))&&(l=42)),u(p("Regexp").$last_match(3))&&(c=p("Regexp").$last_match(3).$to_i()),u(p("Regexp").$last_match(4))&&(n=p("Regexp").$last_match(4).$to_i()),u(p("Regexp").$last_match(5))&&(_=p("Regexp").$last_match(5)),u(B(l,0)))?t:(f=(a=e.$getStepTable())["$[]"](0)["$[]"](d($,1)),b=a["$[]"](1)["$[]"](d($,1)),h=a["$[]"](2)["$[]"](d($,1)),k=a["$[]"](3)["$[]"](d($,1)),x=a["$[]"](4)["$[]"](d($,1)),R=a["$[]"](5)["$[]"](d($,1)),E=a["$[]"](6)["$[]"](d($,1)),u(c)&&(y(/d20/i,v=_)?b=s(b,n):y(/d12/i,v)?h=s(h,n):y(/d10/i,v)?k=s(k,n):y(/d8/i,v)?x=s(x,n):y(/d6/i,v)?R=s(R,n):y(/d4/i,v)?E=s(E,n):f=s(f,n)),e.string="",e.$debug("d20step, d12step, d10step, d8step, d6step, d4step",b,h,k,x,R,E),r=s(r,e.$rollStep(20,b)),r=s(r,e.$rollStep(12,h)),r=s(r,e.$rollStep(10,k)),r=s(r,e.$rollStep(8,x)),r=s(r,e.$rollStep(6,R)),r=s(r,e.$rollStep(4,E)),u(w(f,0))&&(e.string=s(e.string,"+")),F(f,0)&&(e.string=s(e.string,f.$to_s()),r=s(r,f)),e.string=s(e.string," \uff1e "+r),N="\u30b9\u30c6\u30c3\u30d7"+$+" \uff1e "+e.string,C(l,0)||(e.string=s(e.string," \uff1e "),H=a["$[]"](7)["$[]"](d(l,1)),I=a["$[]"](8)["$[]"](d(l,1)),L=a["$[]"](9)["$[]"](d(l,1)),P=a["$[]"](11)["$[]"](d(l,1)),e.string=u(e.isFailed)?s(e.string,"\u81ea\u52d5\u5931\u6557"):u(z(r,H))?s(e.string,"\u6700\u826f\u6210\u529f"):u(z(r,I))?s(e.string,"\u512a\u6210\u529f"):u(z(r,L))?s(e.string,"\u826f\u6210\u529f"):u(z(r,l))?s(e.string,"\u6210\u529f"):u(B(r,P))?s(e.string,"\u5927\u5931\u6557"):s(e.string,"\u5931\u6557"),N="\u30b9\u30c6\u30c3\u30d7"+$+">="+l+" \uff1e "+e.string),N)}),S(o,"$getStepTable",function(){return[i.large_array_unpack("-2,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0"),i.large_array_unpack("0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,0,0,2,0,0,0,0,0,0,0,0,0,0,0"),i.large_array_unpack("0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1"),i.large_array_unpack("0,0,0,0,0,1,0,0,0,1,1,2,1,0,0,0,1,0,0,0,1,1,2,1,1,1,1,2,1,1,1,2,3,2,1,1,1,2,1,1,0,0,1,0,0,0,1,0,0,0,1,1,2,1"),i.large_array_unpack("0,0,0,0,1,0,0,0,1,0,1,0,0,0,0,1,0,0,0,1,0,1,0,0,1,1,2,1,1,1,2,2,1,1,1,1,2,1,1,1,0,0,1,0,0,1,0,0,0,1,0,1,0,0"),i.large_array_unpack("0,0,0,1,0,0,0,2,1,1,0,0,0,0,1,0,0,0,2,1,1,0,0,0,0,1,0,0,0,2,1,0,0,0,0,1,0,0,0,2,0,0,0,0,1,0,0,0,2,1,1,0,0,0"),i.large_array_unpack("1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0"),i.large_array_unpack("6,8,10,12,14,17,19,20,22,24,25,27,29,32,33,35,37,38,39,41,42,44,45,47,48,49,51,52,54,55,56,58,59,60,62,64,65,67,68,70,71,72"),i.large_array_unpack("4,6,8,10,11,13,15,16,18,19,21,22,24,26,27,29,30,32,33,34,35,37,38,40,41,42,43,45,46,47,48,49,51,52,53,55,56,58,59,60,61,62"),i.large_array_unpack("2,4,6,7,9,10,12,13,14,15,17,18,20,21,22,24,25,26,27,28,29,31,32,33,34,35,36,38,39,40,41,42,43,45,46,47,48,50,51,52,53,54"),i.large_array_unpack("1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42"),i.large_array_unpack("0,1,1,1,1,2,2,3,4,5,5,6,6,7,8,8,9,10,11,12,13,13,14,15,16,17,18,18,18,20,21,22,23,23,24,25,26,26,27,28,29,30")]}),S(o,"$rollStep",function(g,e){var r=this,$=t;return r.$debug("rollStep diceType, diceCount, @string",g,e,r.string),$=0,u(w(e,0))&&(u(r.string["$empty?"]())||(r.string=s(r.string,"+")),r.string=s(r.string,e+"d"+g+"["),r.$debug("rollStep @string",r.string),U(e,"times",[],function l(c){var n=null==l.$$s?this:l.$$s,_=t,a=t;for(null==n.randomizer&&(n.randomizer=t),null==n.string&&(n.string=t),null==c&&(c=t),_=n.randomizer.$roll_once(g),F(_,1)&&(n.isFailed=!1),a=_;C(_,g);)_=n.randomizer.$roll_once(g),a=s(a,_);return $=s($,a),F(c,0)&&(n.string=s(n.string,",")),n.string=s(n.string,a.$to_s())},{$$s:r}),r.string=s(r.string,"]")),$})})}}]);