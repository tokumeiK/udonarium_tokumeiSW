(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[5105],{1647:(re,$e,H)=>{H(9993),Opal.queue(function(e){var U,Z,te,a,v,n,w,V,D,z=e.module,I=e.klass,x=e.const_set,K=e.send2,N=e.find_super,h=e.def,c=e.send,_=e.truthy,E=e.neqeq,d=e.rb_lt,P=e.rb_ge,o=e.rb_plus,G=e.rb_gt,Y=e.rb_times,S=e.rb_minus,C=e.thrower,F=e.eqeq,J=e.rb_divide,T=[],t=e.nil;return U=T,Z=D=[z(T[0],"BCDice")].concat(U),w=[z(D[0],"GameSystem")].concat(Z),V=e.$r(w),te=w,v=[a=I(w[0],V("Base"),"GehennaAn")].concat(te),n=e.$r(v),a.$$prototype.randomizer=t,x(v[0],"ID","GehennaAn"),x(v[0],"NAME","\u30b2\u30d8\u30ca\u30fb\u30a2\u30ca\u30b9\u30bf\u30b7\u30b9"),x(v[0],"SORT_KEY","\u3051\u3078\u306a\u3042\u306a\u3059\u305f\u3057\u3059"),x(v[0],"HELP_MESSAGE","\u6226\u95d8\u5224\u5b9a\u3068\u901a\u5e38\u5224\u5b9a\u306b\u5bfe\u5fdc\u3002\u5e78\u904b\u306e\u52a9\u3051\u3001\u9023\u6483\u5897\u52a0\u5024(\u6226\u95d8\u5224\u5b9a)\u3001\u95d8\u6280\u30c1\u30c3\u30c8(\u6226\u95d8\u5224\u5b9a)\u3092\u81ea\u52d5\u8868\u793a\u3057\u307e\u3059\u3002\n\u30fb\u6226\u95d8\u5224\u5b9a\u3000(nGAt+m)\n\u3000\u30c0\u30a4\u30b9\u6570n\u3001\u76ee\u6a19\u5024t\u3001\u4fee\u6b63\u5024m\u3067\u6226\u95d8\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000\u5e78\u904b\u306e\u52a9\u3051\u3001\u9023\u6483\u5897\u52a0\u5024\u3001\u95d8\u6280\u30c1\u30c3\u30c8\u3092\u81ea\u52d5\u51e6\u7406\u3057\u307e\u3059\u3002\n\u30fb\u901a\u5e38\u5224\u5b9a\u3000(nGt+m)\n\u3000\u30c0\u30a4\u30b9\u6570n\u3001\u76ee\u6a19\u5024t\u3001\u4fee\u6b63\u5024m\u3067\u901a\u5e38\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000\u5e78\u904b\u306e\u52a9\u3051\u3092\u81ea\u52d5\u51e6\u7406\u3057\u307e\u3059\u3002(\u9023\u6483\u5897\u52a0\u5024\u3001\u95d8\u6280\u30c1\u30c3\u30c8\u3092\u8868\u793a\u6291\u5236\u3057\u307e\u3059)\n"),a.$register_prefix("\\d+G\\d+","\\d+GA\\d+","\\d+R6"),h(a,"$initialize",function g(r){var $=this;return g.$$p=null,K($,N($,"initialize",g,!1,!0),"initialize",[r],null),$.sort_add_dice=!0,$.sort_barabara_dice=!0}),a.$private(),h(a,"$replace_text",function(r){return c(c(c(c(r,"gsub",[/(\d+)GA(\d+)([+-][+\-\d]+)/],function(){return n("Regexp").$last_match(1)+"R6"+n("Regexp").$last_match(3)+">="+n("Regexp").$last_match(2)+"[1]"}),"gsub",[/(\d+)GA(\d+)/],function(){return n("Regexp").$last_match(1)+"R6>="+n("Regexp").$last_match(2)+"[1]"}),"gsub",[/(\d+)G(\d+)([+-][+\-\d]+)/],function(){return n("Regexp").$last_match(1)+"R6"+n("Regexp").$last_match(3)+">="+n("Regexp").$last_match(2)+"[0]"}),"gsub",[/(\d+)G(\d+)/],function(){return n("Regexp").$last_match(1)+"R6>="+n("Regexp").$last_match(2)+"[0]"})}),a.$public(),h(a,"$eval_game_system_specific_command",function(r){try{C("eval_return");var $=this,u=t,f=t,k=t,M=t,b=t,q=t,m=t,j=t,A=t,y=t,s=t,R=t,B=t;return r=$.$replace_text(r),_(/(^|\s)S?((\d+)[rR]6([+\-\d]+)?([>=]+(\d+))(\[(\d)\]))(\s|$)/i["$=~"](r))?(r=n("Regexp").$last_match(2),u=n("Regexp").$last_match(3).$to_i(),f=n("Regexp").$last_match(4),k=n("Regexp").$last_match(6).$to_i(),M=n("Regexp").$last_match(8).$to_i(),b=n("ArithmeticEvaluator").$eval(f),q=$.randomizer.$roll_barabara(u,6).$sort(),m=q.$sum(),j=q.$join(","),A="",y=!0,m=0,c(q,"each",[],function(l){return null==l&&(l=t),E(A,"")?(E(A,l)||_(d(l,k)))&&(y=!1):A=l,_(P(l,k))?m=o(m,1):t}),_(y)&&_(G(u,1))&&(m=Y(m,2)),s=m+"["+j+"]",R=o(m,b),_(d(R,0))&&(R=0),B=S(u,m),_(d(B,0))&&(B=0),_(G(b,0))?s=o(s,"+"+b):_(d(b,0))&&(s=o(s,b.$to_s())),s=_(/[^\d\[\]]+/["$=~"](s))?"("+r+") \uff1e "+s+" \uff1e \u6210\u529f"+R+"\u3001\u5931\u6557"+B:"("+r+") \uff1e "+s,s=o(s,$.$getAnastasisBonusText(M,R))):t}catch(p){if(p===e.t_eval_return)return p.$v;throw p}}),a.$private(),h(a,"$getAnastasisBonusText",function(r,i){var u=t,f=t;return F(r,0)?"":(u=J(S(i,1),2).$to_i(),_(G(u,7))&&(u=7),f="",_(G(u,0))&&(f=o(f,"\u9023\u6483[+"+u+"]/"))," \uff1e "+(f=o(f,"\u95d8\u6280["+this.$getTougiBonus(i)+"]")))}),h(a,"$getTougiBonus",function(r){return this.$get_table_by_number(r,[[6,"1"],[13,"2"],[18,"3"],[22,"4"],[99,"5"]])})})}}]);