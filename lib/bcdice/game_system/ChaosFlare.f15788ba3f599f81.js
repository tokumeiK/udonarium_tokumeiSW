(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[1114],{229:(Z,O,R)=>{R(9993),Opal.queue(function(n){var K,J,X,c,d,F,L,g,U,B,E=n.module,G=n.klass,m=n.const_set,p=n.eqeq,t=n.truthy,k=n.rb_le,a=n.rb_minus,A=n.neqeq,w=n.rb_ge,b=n.def,x=n.rb_divide,v=n.not,D=n.range,M=n.hash2,T=n.rb_lt,P=n.rb_plus,z=[],e=n.nil,H=n.$$$;return K=z,J=B=[E(z[0],"BCDice")].concat(K),g=[E(B[0],"GameSystem")].concat(J),U=n.$r(g),X=g,d=[c=G(g[0],U("Base"),"ChaosFlare")].concat(X),F=n.$r(d),(L=c.$$prototype).randomizer=L.cmd=e,m(d[0],"ID","ChaosFlare"),m(d[0],"NAME","\u30ab\u30aa\u30b9\u30d5\u30ec\u30a2"),m(d[0],"SORT_KEY","\u304b\u304a\u3059\u3075\u308c\u3042"),m(d[0],"HELP_MESSAGE","\u5224\u5b9a\nCF\n  \u66f8\u5f0f: [\u30c0\u30a4\u30b9\u306e\u6570]CF[\u4fee\u6b63\u5024][@\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024][#\u30d5\u30a1\u30f3\u30d6\u30eb\u5024][>=\u76ee\u6a19\u5024]\n    CF\u4ee5\u5916\u306f\u5168\u3066\u7701\u7565\u53ef\u80fd\n  \u4f8b:\n  - CF 2D6,\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u502412,\u30d5\u30a1\u30f3\u30d6\u30eb\u50242\u3067\u5224\u5b9a\n  - CF+10@10 \u4fee\u6b63\u5024+10,\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u502410\u3067\u5224\u5b9a\n  - CF+10#3 \u4fee\u6b63\u5024+10,\u30d5\u30a1\u30f3\u30d6\u30eb\u50243\u3067\u5224\u5b9a\n  - CF+10>=10 \u76ee\u6a19\u5024\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u3001\u5dee\u5206\u5024\u3082\u51fa\u529b\u3059\u308b\n  - 3CF+10@10#3>=10 3D6\u3067\u306e\u5224\u5b9a\n  - CF@9#3+8>=10\n\n2D6\n  \u30d5\u30a1\u30f3\u30d6\u30eb\u50242\u3067\u5224\u5b9a\u3059\u308b\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306e\u5224\u5b9a\u306f\u884c\u308f\u308c\u306a\u3044\u3002\n  \u76ee\u6a19\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u305f\u5834\u5408\u3001\u5dee\u5206\u5024\u3092\u51fa\u529b\u3059\u308b\u3002\n  - 2D6+4>=10\n\n\u5404\u7a2e\u8868\n  FT: \u56e0\u7e01\u8868\n  FTx: \u6570\u5024\u3092\u6307\u5b9a\u3059\u308b\u3068\u56e0\u679c\u8868\u306e\u5024\u3092\u51fa\u529b\u3059\u308b\n  - FT -> 11\u304b\u308966\u306e\u9593\u3067\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\n  - FT23 -> 23\u306e\u9805\u76ee\u3092\u51fa\u529b\n  - FT0\n  - FT7\n"),c.$register_prefix("\\d*CF","FT"),b(c,"$result_2d6",function(i,r,o,s,u){var $=e,_=e;return p(s,">=")?($=[],_=F("Result").$new(),t(k(r,2))&&(i=a(i,20),$.$push("\u30d5\u30a1\u30f3\u30d6\u30eb(-20)"),_["$fumble="](!0)),A(u,"?")&&(t(w(i,u))?($.$push("\u6210\u529f"),_["$success="](!0)):($.$push("\u5931\u6557"),_["$failure="](!0)),A(a(i,u),0)&&$.$push("\u5dee\u5206\u5024"+a(i,u))),t($["$empty?"]())?F("Result").$nothing():(_["$text="]($.$join(" \uff1e ")),_)):e}),b(c,"$eval_game_system_specific_command",function(i){return t(i["$start_with?"]("FT"))?this.$roll_fate_table(i):this.$cf_roll(i)}),c.$private(),b(c,"$roll_fate_table",function(i){var _,f,o=e,s=e,u=e,$=e;if(o=/^FT(\d+)?/.$match(i),t(o["$[]"](1))){if(s=o["$[]"](1).$to_i(),t([0,7]["$include?"](s)))return"\u56e0\u679c\u8868("+s+") \uff1e "+F("FATE_TABLE")["$[]"](s)["$[]"](0);if(u=x(s,10).$to_i(),$=s["$%"](10),v(D(1,6,!1)["$include?"](u))||v(D(1,6,!1)["$include?"]($)))return e}else u=this.randomizer.$roll_once(6),$=this.randomizer.$roll_once(6);return _=u,f=a(x($,2).$to_i(),1),"\u56e0\u679c\u8868("+u+$+") \uff1e "+F("FATE_TABLE")["$[]"](_)["$[]"](f)}),b(c,"$cf_roll",function(i){var r=this,o=e,s=e,u=e,$=e,_=e,f=e,h=e,S=e,y=e,q=e,l=e;return o=H(F("Command"),"Parser").$new(/\d*CF/,M(["round_type"],{round_type:r.$round_type()})).$enable_critical().$enable_fumble(),r.cmd=o.$parse(i),!t(r.cmd)||(s=p(r.cmd.$command(),"CF")?2:r.cmd.$command().$to_i(),u=t($=r.cmd.$critical())?$:12,_=t($=r.cmd.$fumble())?$:2,r.cmd["$dollar="](e),t(T(s,0))||v([">=",e]["$include?"](r.cmd.$cmp_op())))?e:(h=(f=r.randomizer.$roll_barabara(s,6)).$sum(),S=f.$join(","),y=w(h,u),q=k(h,_),l=t(y)?30:t(q)?-20:h,l=P(l,r.cmd.$modify_number()),["("+r.cmd.$to_s("after_modify_number")+")",h+"["+S+"]",l.$to_s(),t(T(l,0))?"0":e,t(y)?"\u30af\u30ea\u30c6\u30a3\u30ab\u30eb":e,t(q)?"\u30d5\u30a1\u30f3\u30d6\u30eb":e,t(r.cmd.$target_number())?"\u5dee\u5206\u5024 "+r.$difference(l):e].$compact().$join(" \uff1e "))}),b(c,"$difference",function(i){return t(T(i,0))?this.cmd.$target_number()["$-@"]():a(i,this.cmd.$target_number())}),m(d[0],"FATE_TABLE",[["\u8150\u308c\u7e01"],["\u7d14\u611b","\u89aa\u8fd1\u611f","\u5e87\u8b77"],["\u4fe1\u983c","\u611f\u670d","\u5171\u611f"],["\u53cb\u60c5","\u5c0a\u656c","\u6155\u60c5"],["\u597d\u6575\u624b","\u671f\u5f85","\u501f\u308a"],["\u8208\u5473","\u618e\u60aa","\u60b2\u3057\u307f"],["\u6050\u6016","\u57f7\u7740","\u5229\u7528"],["\u4efb\u610f"]].$freeze())})}}]);