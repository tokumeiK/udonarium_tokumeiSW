(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[4238],{6681:(X,Z,Q)=>{Q(9993),Opal.queue(function(i){var M,K,V,s,b,C,D,Y,A,k=i.module,N=i.klass,m=i.const_set,a=i.truthy,f=i.def,S=i.rb_plus,T=i.eqeq,j=i.thrower,P=i.rb_ge,y=i.rb_minus,E=i.send,H=i.rb_gt,q=i.eqeqeq,z=i.rb_le,w=[],r=i.nil;return M=w,K=A=[k(w[0],"BCDice")].concat(M),D=[k(A[0],"GameSystem")].concat(K),Y=i.$r(D),V=D,b=[s=N(D[0],Y("Base"),"NSSQ")].concat(V),C=i.$r(b),s.$$prototype.randomizer=r,m(b[0],"ID","NSSQ"),m(b[0],"NAME","SRS\u3058\u3083\u306a\u3044\u4e16\u754c\u6a39\u306e\u8ff7\u5baeTRPG"),m(b[0],"SORT_KEY","\u3048\u3059\u3042\u3042\u308b\u3048\u3059\u3057\u3084\u306a\u3044\u305b\u304b\u3044\u3057\u3086\u306e\u3081\u3044\u304d\u3086\u3046TRPG"),m(b[0],"HELP_MESSAGE","\u25a0 \u5224\u5b9a (xSQ\xb1y)\n  xD6\u306e\u5224\u5b9a\u30023\u3064\u4ee5\u4e0a\u632f\u3063\u305f\u3068\u304d\u3001\u51fa\u76ee\u306e\u9ad8\u30442\u3064\u3092\u8868\u793a\u3057\u307e\u3059\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u3082\u8a08\u7b97\u3057\u307e\u3059\u3002\n  \xb1y: y\u306b\u4fee\u6b63\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u30c0\u30e1\u30fc\u30b8\u30ed\u30fc\u30eb (xDR(C)(+)y)\n  xD6\u306e\u30c0\u30e1\u30fc\u30b8\u30ed\u30fc\u30eb\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002C\u3092\u4ed8\u3051\u308b\u3068\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30a2\u30c3\u30d7\u72b6\u614b\u3067\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002+\u3092\u4ed8\u3051\u308b\u3068\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u6642\u306e\u30c0\u30a4\u30b9\u304c8\u500b\u306b\u306a\u308a\u307e\u3059\u3002\n  x: x\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n  y: y\u306b\u8010\u6027\u3092\u5165\u529b\u3002\n  \u4f8b) 5DR3 5DRC4 5DRC+4\n\n\u25a0 \u56de\u5fa9\u30ed\u30fc\u30eb (xHRy)\n  xD6\u306e\u56de\u5fa9\u30ed\u30fc\u30eb\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u304c\u767a\u751f\u3057\u307e\u305b\u3093\u3002\n  x: x\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n  y: y\u306b\u8010\u6027\u3092\u5165\u529b\u3002\u7701\u7565\u3057\u305f\u5834\u54083\u3002\n  \u4f8b) 2HR 10HR2\n\n\u25a0 \u63a1\u53d6\u30ed\u30fc\u30eb (TC\xb1z,SC\xb1z,GC\xb1z)\n  \u3061\u3087\u3063\u3068(T)\u3001\u305d\u3053\u305d\u3053(S)\u3001\u304c\u3063\u3064\u308a(G)\u63a1\u53d6\u63a1\u6398\u4f10\u63a1\u3092\u884c\u3046\u3002\n  z: z\u306b\u8ffd\u52a0\u3067\u30ed\u30fc\u30eb\u3059\u308b\u56de\u6570\u3092\u5165\u529b\u3002\u7701\u7565\u53ef\u80fd\u3002\n  \u4f8b) TC SC+1 GC-1\n"),s.$register_prefix("\\d+SQ[\\+\\-\\d]*","\\d+DR(C)?(\\+)?\\d+","[TSG]C","\\d+HR\\d*"),f(s,"$eval_game_system_specific_command",function($){var n,e,u,t=this;return a(n=a(e=a(u=t.$roll_sq($))?u:t.$damage_roll($))?e:t.$heal_roll($))?n:t.$collecting_roll($)}),s.$private(),f(s,"$roll_sq",function($){try{j("eval_return");var e=r,u=r,_=r,o=r,l=r,c=r,v=r;return e=/(\d+)SQ([+\-\d]+)?/i.$match($),a(e)?(u=e["$[]"](1).$to_i(),_=C("ArithmeticEvaluator").$eval(e["$[]"](2)),l=(o=this.randomizer.$roll_barabara(u,6)).$sort().$reverse().$take(2),c=S(l.$sum(),_),v=T(l,[6,6])?" \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\uff01":T(l,[1,1])?" \u30d5\u30a1\u30f3\u30d6\u30eb\uff01":r,["("+$+")","["+o.$join(",")+"]"+C("Format").$modifier(_),c+"["+l.$join(",")+"]"+v].$join(" \uff1e ")):r}catch(g){if(g===i.t_eval_return)return g.$v;throw g}}),f(s,"$damage_roll",function($){var t=this,n=r,e=r,u=r,_=r,o=r,l=r,c=r,v=r;return n=/(\d+)DR(C)?(\+)?(\d+)/i.$match($),a(n)?(e=n["$[]"](1).$to_i(),u=n["$[]"](2)["$nil?"]()["$!"](),_=n["$[]"](3)["$nil?"]()["$!"](),o=n["$[]"](4).$to_i(),c="("+$+") \uff1e ["+(l=t.randomizer.$roll_barabara(e,6)).$join(",")+"]"+o+" \uff1e "+t.$damage(l,o)+"\u30c0\u30e1\u30fc\u30b8",v=a(u)?1:2,a(P(y(l.$count(6),l.$count(1)),v))&&(c=S(c," \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\uff01\n"),c=S(c,t.$additional_damage_roll(_,o))),c):r}),f(s,"$additional_damage_roll",function($,t){var e,u=r;return"("+(e=a($)?8:4)+"DR"+t+") \uff1e ["+(u=this.randomizer.$roll_barabara(e,6)).$join(",")+"]"+t+" \uff1e "+this.$damage(u,t)+"\u30c0\u30e1\u30fc\u30b8"}),f(s,"$heal_roll",function($){var t,e=r,u=r,_=r,o=r,l=r;return e=/^(\d+)HR(\d+)?$/i.$match($),a(e)?(u=e["$[]"](1).$to_i(),_=a(o=(t=e["$[]"](2))===r||null==t?r:t.$to_i())?o:3,"("+$+") \uff1e ["+(l=this.randomizer.$roll_barabara(u,6)).$join(",")+"]"+_+" \uff1e "+this.$damage(l,_)+"\u56de\u5fa9"):r}),f(s,"$damage",function($,t){return E($,"count",[],function(e){return null==e&&(e=r),H(e,t)})}),f(s,"$collecting_roll",function($){try{j("eval_return");var e=r,u=r,_=r,o=r,l=r,c=r;return e=/([TSG])C([+\-\d]+)?/i.$match($),!a(e)||(u=e["$[]"](1),_=C("ArithmeticEvaluator").$eval(e["$[]"](2)),o=q("T",l=u)?3:q("S",l)?4:q("G",l)?5:r,c=S(y(o,2),_),a(z(c,0)))?r:E(C("Array"),"new",[c],function d(g){var G,R=null==d.$$s?this:d.$$s,x=r;return null==R.randomizer&&(R.randomizer=r),null==g&&(g=r),G=(x=R.randomizer.$roll_barabara(2,6)).$sum(),"("+$+") \uff1e "+G+"["+x.$join(",")+"]: "+R.$result_collecting(g,G,o)},{$$s:this}).$join("\n")}catch(d){if(d===i.t_eval_return)return d.$v;throw d}}),f(s,"$result_collecting",function($,t,n){return a(z(t,n))&&a(H(y(n,2),$))?"\uff01\u3042\u3042\u3063\u3068\uff01":a(z(y(n,2),$))?"\u6210\u529f\uff08\u8ffd\u52a0\u5206\uff09":"\u6210\u529f"})})}}]);