(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[2522],{8554:(I,K,w)=>{w(9993),Opal.queue(function($){var S,P,H,c,h,f,B,T,g,p=$.module,x=$.klass,m=$.const_set,n=$.truthy,a=$.rb_plus,z=$.send,D=$.to_a,b=$.rb_ge,l=$.def,q=$.rb_divide,y=$.rb_gt,E=$.rb_lt,N=[],t=$.nil;return S=N,P=g=[p(N[0],"BCDice")].concat(S),B=[p(g[0],"GameSystem")].concat(P),T=$.$r(B),H=B,h=[c=x(B[0],T("Base"),"BBN")].concat(H),(f=c.$$prototype).randomizer=f.roll_times=f.modify=f.modify_str=f.difficulty=f.critical=f.fumble=t,c.$register_prefix("\\d+BN"),m(h[0],"ID","BBN"),m(h[0],"NAME","BBNTRPG"),m(h[0],"SORT_KEY","\u3072\u3044\u3072\u3044\u3048\u306cTRPG"),m(h[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a(xBN\xb1y>=z[c,f])\n\u3000xD6\u306e\u5224\u5b9a\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u30001D\u306e\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3068\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\u306f1\u30022D\u306e\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3068\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\u306f2\u3002\n\u3000nD\u306e\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3068\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\u306f n/2 \u306e\u5207\u308a\u4e0a\u3052\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3068\u30d5\u30a1\u30f3\u30d6\u30eb\u304c\u540c\u6642\u306b\u767a\u751f\u3057\u305f\u5834\u5408\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3092\u512a\u5148\u3002\n\u3000x\uff1ax\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n\u3000y\uff1ay\u306b\u4fee\u6b63\u5024\u3092\u5165\u529b\u3002\u7701\u7565\u53ef\u80fd\u3002\n  z\uff1az\u306b\u76ee\u6a19\u5024\u3092\u5165\u529b\u3002\u7701\u7565\u53ef\u80fd\u3002\n  c\uff1a\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306b\u5fc5\u8981\u306a\u30c0\u30a4\u30b9\u76ee\u300c6\u300d\u306e\u6570\u306e\u5897\u6e1b\u3002\u7701\u7565\u53ef\u80fd\u3002\n  f\uff1a\u30d5\u30a1\u30f3\u30d6\u30eb\u306b\u5fc5\u8981\u306a\u30c0\u30a4\u30b9\u76ee\u300c1\u300d\u306e\u6570\u306e\u5897\u6e1b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 3BN+4\u30003BN>=8\u30003BN+1>=10[-1] 3BN+1>=10[,1] 3BN+1>=10[1,1]\n"),l(c,"$eval_game_system_specific_command",function(i){var e=this,r=t,s=t,u=t,o=t,_=t;return n(e.$parse(i))?(s=(r=e.randomizer.$roll_barabara(e.roll_times,6)).$sum(),u=r.$join(","),o=a(s,e.modify),_=["("+i+")",s+"["+u+"]"+e.modify_str,o],n(e["$critical_?"](r))?z(_,"push",["\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\uff01"].concat(D(e.$additional_roll(r.$count(6),o)))):n(e["$fumble_?"](r))?_.$push("\u30d5\u30a1\u30f3\u30d6\u30eb\uff01"):n(e.difficulty)&&_.$push(n(b(o,e.difficulty))?"\u6210\u529f":"\u5931\u6557"),_.$join(" \uff1e ")):t}),c.$private(),l(c,"$parse",function(i){var e=this,r=t,s=t,u=t;return r=/^(\d+)BN([+-]\d+)?(>=(([+-]?\d+)))?(\[([+-]?\d+)?(,([+-]?\d+))?\])?/.$match(i),!!n(r)&&(e.roll_times=r["$[]"](1).$to_i(),e.modify_str=n(s=r["$[]"](2))?s:"",e.modify=r["$[]"](2).$to_i(),e.difficulty=n(r["$[]"](4))?r["$[]"](4).$to_i():t,u=e.$critical_base(e.roll_times),e.critical=a(u,r["$[]"](7).$to_i()),e.fumble=a(u,r["$[]"](9).$to_i()),!0)}),l(c,"$critical_base",function(i){switch(i){case 1:case 2:return i;default:return q(i.$to_f(),2).$ceil()}}),l(c,"$critical_?",function(i){return b(i.$count(6),this.critical)}),l(c,"$fumble_?",function(i){return b(i.$count(1),this.fumble)}),l(c,"$additional_roll",function(i,e){var r=this,s=t,u=t,o=t,_=t,v=t,k=t;for(s=[],u=0;n(n(o=y(i,0))?E(u,10):o);)u=a(u,1),v=(_=r.randomizer.$roll_barabara(i,6)).$sum(),k=_.$join(","),i=_.$count(6),s.$push(e+"+"+v+"["+k+"]"),n(y(i,0))&&s.$push("\u8ffd\u52a0\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\uff01"),e=a(e,v);return n(y(i,0))&&s.$push("\u7121\u9650\u30eb\u30fc\u30d7\u9632\u6b62\u306e\u305f\u3081\u4e2d\u65ad"),s.$push(e),n(r.difficulty)&&s.$push(n(b(e,r.difficulty))?"\u6210\u529f":"\u5931\u6557"),s})})}}]);