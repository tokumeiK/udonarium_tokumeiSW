(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[3726],{3350:(O,ee,G)=>{G(9993),Opal.queue(function(n){var L,F,X,v,S,y,A,Q,p,B=n.module,M=n.klass,k=n.const_set,$=n.truthy,P=n.rb_lt,h=n.rb_gt,E=n.to_ary,i=n.rb_plus,W=n.rb_times,H=n.rb_minus,I=n.eqeq,R=n.def,z=n.send,g=n.eqeqeq,C=[],e=n.nil;return L=C,F=p=[B(C[0],"BCDice")].concat(L),A=[B(p[0],"GameSystem")].concat(F),Q=n.$r(A),X=A,S=[v=M(A[0],Q("Base"),"WorldOfDarkness")].concat(X),y=n.$r(S),k(S[0],"ID","WorldOfDarkness"),k(S[0],"NAME","\u30ef\u30fc\u30eb\u30c9\u30fb\u30aa\u30d6\u30fb\u30c0\u30fc\u30af\u30cd\u30b9"),k(S[0],"SORT_KEY","\u308f\u3042\u308b\u3068\u304a\u3075\u305f\u3042\u304f\u306d\u3059"),k(S[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9(xSTn+y or xSTSn+y or xSTAn+y)\n\u3000(\u30c0\u30a4\u30b9\u500b\u6570)ST(\u96e3\u6613\u5ea6)+(\u81ea\u52d5\u6210\u529f)\n\u3000(\u30c0\u30a4\u30b9\u500b\u6570)STS(\u96e3\u6613\u5ea6)+(\u81ea\u52d5\u6210\u529f) \u203b\u51fa\u76ee10\u3067\u632f\u308a\u8db3\u3057\u3001\u632f\u308a\u8db3\u3057\u5206\u306e\u51fa\u76ee1\u3067\u6253\u3061\u6d88\u3055\u308c\u306a\u3044\n\u3000(\u30c0\u30a4\u30b9\u500b\u6570)STB(\u96e3\u6613\u5ea6)+(\u81ea\u52d5\u6210\u529f) \u203b\u51fa\u76ee10\u3067\u632f\u308a\u8db3\u3057\u3001\u632f\u308a\u8db3\u3057\u5206\u306e\u51fa\u76ee1\u3067\u6253\u3061\u6d88\u3055\u308c\u308b\n\u3000(\u30c0\u30a4\u30b9\u500b\u6570)STA(\u96e3\u6613\u5ea6)+(\u81ea\u52d5\u6210\u529f) \u203b\u51fa\u76ee10\u306f2\u6210\u529f [20th\u30eb\u30fc\u30eb]\n\n\u3000\u96e3\u6613\u5ea6=\u7701\u7565\u66426\n\u3000\u81ea\u52d5\u6210\u529f=\u7701\u7565\u66420\u3001\u51fa\u76ee1\u3067\u6253\u3061\u6d88\u3055\u308c\u306a\u3044\u81ea\u52d5\u6210\u529f\u3092\u6307\u5b9a\n"),v.$register_prefix("\\d+ST"),R(v,"$eval_game_system_specific_command",function(D){var s,_,j,t=e,o=e,f=e,a=e,l=e,u=e,c=e,r=e,b=e,x=e,d=e,w=e,q=e;switch(t=6,o=0,f=!1,a=!1,l=!1,j=(u=D.$match(/^(\d+)(ST[SAB]?)(\d+)?([+-]\d+)?/))["$[]"](1).$to_i(),u["$[]"](2)){case"STS":f=!0;break;case"STA":l=!0;break;case"STB":a=!0}if($(u["$[]"](3))&&(t=u["$[]"](3).$to_i()),$(u["$[]"](4))&&(o=u["$[]"](4).$to_i()),$(P(t,2))&&(t=6),(c=[]).$push("DicePool="+j+", Difficulty="+t+", AutomaticSuccess="+o),$(h(t,10))&&(t=10),r=0,b=0,x=!1,_=this.$roll_wod(j,t),d=null==(s=E(_))[1]?e:s[1],w=null==s[2]?e:s[2],q=null==s[3]?e:s[3],c.$push((null==s[0]?e:s[0]).$join(",")),r=i(r,w),b=i(b,q),($(h(w,0))||$(h(d,0)))&&(x=!0),$(l))r=i(r,W(d,2));else if(r=i(r,d),$(f)||$(a))for(;$(h(d,0));)_=this.$roll_wod(d,t),d=null==(s=E(_))[1]?e:s[1],w=null==s[2]?e:s[2],q=null==s[3]?e:s[3],c.$push((null==s[0]?e:s[0]).$join(",")),r=i(r,i(w,d)),$(a)&&(b=i(b,q));return r=H(r,[r,b].$min()),r=i(r,o),$(h(r,0))?(c.$push("\u6210\u529f\u6570"+r),y("Result").$success(c.$join(" \uff1e "))):$(h(b,0))&&I(x,!1)?(c.$push("\u5927\u5931\u6557"),y("Result").$fumble(c.$join(" \uff1e "))):(c.$push("\u5931\u6557"),y("Result").$failure(c.$join(" \uff1e ")))}),R(v,"$roll_wod",function(D,s){var m=e,t=e,o=e,f=e;return(m=z(y("Array"),"new",[D],function a(){var l=null==a.$$s?this:a.$$s;return null==l.randomizer&&(l.randomizer=e),l.randomizer.$roll_once(10)},{$$s:this}))["$sort!"](),t=0,o=0,f=0,z(m,"each",[],function(l){var u;return null==l&&(l=e),g(10,u=l)?f=i(f,1):g(n.Range.$new(s,10,!0),u)?t=i(t,1):g(1,u)?o=i(o,1):e}),[m,f,t,o]})})}}]);