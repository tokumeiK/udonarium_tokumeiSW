(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[1582],{5752:(fe,le,$e)=>{$e(9993),Opal.modules["bcdice/arithmetic_evaluator"]=function(e){var d,_,y,r,R,$,E,m,f=e.module,s=e.ensure_kwargs,u=e.truthy,v=e.thrower,V=e.def,o=[],a=e.nil,l=e.$$$;return d=o,_=m=[f(o[0],"BCDice")].concat(d),E=[$=f(m[0],"ArithmeticEvaluator")].concat(_),r=[y=e.get_singleton_class($)].concat(E),R=e.$r(r),V(y,"$eval",function(w,z){try{v("eval_return");var L,I=a;return null==(L=(z=s(z)).$$smap.round_type)&&(L=l(R("RoundType"),"FLOOR")),u(w)&&u(I=R("Arithmetic").$eval(w,L))?I:0}catch(G){if(G===e.t_eval_return)return G.$v;throw G}},-2)},Opal.modules["bcdice/format"]=function(e){var d,_,$,E,y,m,f=e.module,s=e.eqeqeq,u=e.def,v=e.truthy,V=e.eqeq,o=e.rb_gt,a=[],l=e.nil;return d=a,_=m=[f(a[0],"BCDice")].concat(d),E=[$=f(m[0],"Format")].concat(_),y=e.$r(E),$.$module_function(),u($,"$comparison_operator",function(r){var R;return s("==",R=r)?"=":s("!=",R)?"<>":s(y("Symbol"),R)?r.$to_s():l}),u($,"$modifier",function(r){return v(r["$nil?"]())?l:V(r,0)?"":v(o(r,0))?"+"+r:r.$to_s()})},Opal.modules["bcdice/normalize"]=function(e){var l,m,d,f=e.module,s=e.eqeqeq,u=e.def,v=e.eqeq,V=[],o=e.nil;return l=V,d=[f(V[0],"BCDice")].concat(l),(m=f(d[0],"Normalize")).$module_function(),u(m,"$comparison_operator",function(_){var $;return s(/<=|=</,$=_)?"<=":s(/>=|=>/,$)?">=":s(/<>|!=|=!/,$)?"!=":s(/</,$)?"<":s(/>/,$)?">":s(/=/,$)?"==":o}),u(m,"$target_number",function(_){return v(_,"?")?_:_.$to_i()})},Opal.queue(function(e){var J,L,be,D,N,n,c,S,A,G,ie,z,f=e.module,s=e.klass,u=e.const_set,v=e.send2,V=e.find_super,o=e.def,a=e.truthy,l=e.eqeq,g=e.rb_gt,d=e.send,q=e.rb_plus,m=e.rb_ge,B=e.rb_minus,_=e.thrower,$=e.hash2,E=e.top,y=[],T=e.nil,r=e.$$$;return E.$require("bcdice/arithmetic_evaluator"),E.$require("bcdice/format"),E.$require("bcdice/normalize"),J=y,L=z=[f(y[0],"BCDice")].concat(J),G=[f(z[0],"GameSystem")].concat(L),ie=e.$r(G),be=G,S=[c=s(G[0],ie("Base"),"Amadeus")].concat(be),A=e.$r(S),c.$$prototype.randomizer=T,u(S[0],"ID","Amadeus"),u(S[0],"NAME","\u30a2\u30de\u30c7\u30a6\u30b9"),u(S[0],"SORT_KEY","\u3042\u307e\u3066\u3046\u3059"),u(S[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a(Rx\xb1y@z>=t)\n\u3000\u80fd\u529b\u5024\u306e\u30c0\u30a4\u30b9\u3054\u3068\u306b\u6210\u529f\u30fb\u5931\u6557\u306e\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000x\uff1a\u80fd\u529b\u30e9\u30f3\u30af(S,A\uff5eD)\u3000y\uff1a\u4fee\u6b63\u5024\uff08\u7701\u7565\u53ef\uff09\n\u3000z\uff1a\u30b9\u30da\u30b7\u30e3\u30eb\u6700\u4f4e\u5024\uff08\u7701\u7565\uff1a6\uff09\u3000t\uff1a\u76ee\u6a19\u5024\uff08\u7701\u7565\uff1a4\uff09\n\u3000\u3000\u4f8b\uff09 RA\u3000RB-1\u3000RC>=5\u3000RD+2\u3000RS-1@5>=6\n\u3000\u51fa\u529b\u66f8\u5f0f\u306f\n\u3000\u3000(\u9054\u6210\u5024)_(\u5224\u5b9a\u7d50\u679c)[(\u51fa\u76ee)(\u5bfe\u5fdc\u3059\u308b\u30a4\u30f3\u30ac)]\n\u3000C,D\u30e9\u30f3\u30af\u3067\u306f\u5bfe\u5fdc\u3059\u308b\u30a4\u30f3\u30ac\u306f\u51fa\u529b\u3055\u308c\u307e\u305b\u3093\u3002\n\u3000\u3000\u51fa\u529b\u4f8b)\u30002_\u30d5\u30a1\u30f3\u30d6\u30eb\uff01[1\u9ed2] / 3_\u5931\u6557[3\u9752]\n\u30fb\u5404\u7a2e\u8868\n\u3000\u5883\u9047\u8868 ECT\uff0f\u95a2\u4fc2\u8868 RT\uff0f\u89aa\u5fc3\u8868 PRT\uff0f\u6226\u5834\u8868 BST\uff0f\u4f11\u61a9\u8868 BT\uff0f\n\u3000\u30d5\u30a1\u30f3\u30d6\u30eb\u8868 FT\uff0f\u81f4\u547d\u50b7\u8868 FWT\uff0f\u6226\u679c\u8868 BRT\uff0f\u30e9\u30f3\u30c0\u30e0\u30a2\u30a4\u30c6\u30e0\u8868 RIT\uff0f\n\u3000\u640d\u50b7\u8868 WT\uff0f\u60aa\u5922\u8868 NMT\uff0f\u76ee\u6a19\u8868 TGT\uff0f\u5236\u7d04\u8868 CST\uff0f\n\u3000\u30e9\u30f3\u30c0\u30e0\u30ae\u30d5\u30c8\u8868 RGT\uff0f\u6c7a\u6226\u6226\u679c\u8868 FBT\uff0f\n\u3000\u5e97\u5185\u96f0\u56f2\u6c17\u8868 SAT\uff0f\u7279\u6b8a\u30e1\u30cb\u30e5\u30fc\u8868 SMT\n\u30fb\u8a66\u7df4\u8868\uff08\uff5eVT\uff09\n\u3000\u30ae\u30ea\u30b7\u30e3\u795e\u7fa4 GCVT\uff0f\u30e4\u30de\u30c8\u795e\u7fa4 YCVT\uff0f\u30a8\u30b8\u30d7\u30c8\u795e\u7fa4 ECVT\uff0f\n\u3000\u30af\u30c8\u30a5\u30eb\u30d5\u795e\u7fa4 CCVT\uff0f\u5317\u6b27\u795e\u7fa4 NCVT\uff0f\u4e2d\u83ef\u795e\u7fa4 CHVT\uff0f\n  \u30e9\u30b9\u30c8\u30af\u30ed\u30cb\u30af\u30eb\u795e\u7fa4 LCVT\uff0f\u30b1\u30eb\u30c8\u795e\u7fa4 KCVT\uff0f\u30c0\u30f3\u30b8\u30e7\u30f3 DGVT\uff0f\u65e5\u5e38 DAVT\n\u30fb\u6311\u6226\u30c6\u30fc\u30de\u8868\uff08\uff5eCT\uff09\n\u3000\u6b66\u52c7 PRCT\uff0f\u6280\u8853 TCCT\uff0f\u982d\u8133 INCT\uff0f\u970a\u529b PSCT\uff0f\u611b LVCT\uff0f\u65e5\u5e38 DACT\n"),o(c,"$initialize",function D(h){var n=this;return D.$$p=null,v(n,V(n,"initialize",D,!1,!0),"initialize",[h],null),n.sort_add_dice=!0,n.enabled_d66=!0,n.d66_sort_type=r(A("D66SortType"),"ASC")}),o(c,"$eval_game_system_specific_command",function(h){var n,N=this;return a(n=N.$roll_amadeus(h))?n:N.$roll_tables(h,r(N.$class(),"TABLES"))}),c.$private(),o(c,"$roll_amadeus",function(h){try{_("eval_return");var n=this,C=T,t=T,M=T,k=T,j=T,W=T,X=T,Z=T,p=T,P=T,O=T,ee=T,re=T,ne=T,H=T,Y=T,x=T,te=T,Te=T;return C=/^R([A-DS])([+\-\d]*)(@(\d))?((>=?)([+\-\d]*))?(@(\d))?$/i.$match(h),a(C)?(t=C["$[]"](1),M=A("ArithmeticEvaluator").$eval(C["$[]"](2)),k=a(C["$[]"](6))?A("Normalize").$comparison_operator(C["$[]"](6)):">=",j=a(C["$[]"](7))?A("ArithmeticEvaluator").$eval(C["$[]"](7)):4,W=(a(X=a(Z=C["$[]"](4))?Z:C["$[]"](9))?X:6).$to_i(),p=A("CHECK_DICE_COUNT")["$[]"](t),O=(P=n.randomizer.$roll_barabara(p,6)).$join(","),ee=l(W,6)?"":"@"+W,l(t,"D")&&(P=[P.$min()]),re=g(P.$size(),1),ne=n.$translate("Amadeus.inga_table"),H=!1,Y=!1,x=!1,te=d(P,"map",[],function F(i){var U,b=null==F.$$s?this:F.$$s,K=T;return null==i&&(i=T),K=q(i,M),U=l(i,1)?(x=!0,b.$translate("Amadeus.fumble")):a(m(i,W))?(Y=!0,H=!0,b.$translate("Amadeus.special")):a(K.$send(k,j))?(H=!0,b.$translate("success")):b.$translate("failure"),a(re)?K+"_"+U+"["+i+ne["$[]"](B(i,1))+"]":K+"_"+U+"["+i+"]"},{$$s:n}),Te=["(R"+t+A("Format").$modifier(M)+ee+k+j+")","["+O+"]"+A("Format").$modifier(M),te.$join(" / ")],d(A("Result").$new(),"tap",[],function(i){var b;return null==i&&(i=T),i["$text="](Te.$join(" \uff1e ")),a(H)?(i["$success="](!0),d(i,"critical=",b=[Y]),b[b.length-1]):(i["$failure="](!0),d(i,"fumble=",b=[x]),b[b.length-1])})):T}catch(F){if(F===e.t_eval_return)return F.$v;throw F}}),u(S[0],"CHECK_DICE_COUNT",$(["S","A","B","C","D"],{S:4,A:3,B:2,C:1,D:2}).$freeze()),N=[D=e.get_singleton_class(c)].concat(S),n=e.$r(N),D.$private(),o(D,"$translate_tables",function(t){return $(["ECT","BST","RT","PRT","FT","BT","FWT","BRT","RIT","WT","NMT","TGT","CST","GCVT","YCVT","ECVT","CCVT","NCVT","DGVT","DAVT","PRCT","TCCT","INCT","PSCT","LVCT","DACT","RGT","FBT","CHVT","LCVT","KCVT","SAT","SMT"],{ECT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.ECT",t),BST:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.BST",t),RT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.RT",t),PRT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.PRT",t),FT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.FT",t),BT:r(n("DiceTable"),"D66Table").$from_i18n("Amadeus.table.BT",t),FWT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.FWT",t),BRT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.BRT",t),RIT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.RIT",t),WT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.WT",t),NMT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.NMT",t),TGT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.TGT",t),CST:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.CST",t),GCVT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.GCVT",t),YCVT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.YCVT",t),ECVT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.ECVT",t),CCVT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.CCVT",t),NCVT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.NCVT",t),DGVT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.DGVT",t),DAVT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.DAVT",t),PRCT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.PRCT",t),TCCT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.TCCT",t),INCT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.INCT",t),PSCT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.PSCT",t),LVCT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.LVCT",t),DACT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.DACT",t),RGT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.RGT",t),FBT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.FBT",t),CHVT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.CHVT",t),LCVT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.LCVT",t),KCVT:r(n("DiceTable"),"Table").$from_i18n("Amadeus.table.KCVT",t),SAT:r(n("DiceTable"),"D66Table").$from_i18n("Amadeus.table.SAT",t),SMT:r(n("DiceTable"),"D66Table").$from_i18n("Amadeus.table.SMT",t)})}),u(S[0],"TABLES",c.$translate_tables("ja_jp")),c.$register_prefix("R[A-DS]",A("TABLES").$keys())})}}]);