(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[9886],{573:(W,X,S)=>{S(9993),Opal.queue(function(a){var q,N,U,f,A,c,w,Y,G,h=a.module,j=a.klass,v=a.const_set,e=a.truthy,s=a.def,E=a.rb_le,b=a.rb_plus,_=a.send,C=a.rb_gt,B=a.thrower,D=a.hash2,F=a.rb_ge,L=[],n=a.nil,z=a.$$$;return q=L,N=G=[h(L[0],"BCDice")].concat(q),w=[h(G[0],"GameSystem")].concat(N),Y=a.$r(w),U=w,A=[f=j(w[0],Y("Base"),"Revulture")].concat(U),c=a.$r(A),f.$$prototype.randomizer=n,v(A[0],"ID","Revulture"),v(A[0],"NAME","\u5149\u7815\u306e\u30ea\u30f4\u30a1\u30eb\u30c1\u30e3\u30fc"),v(A[0],"SORT_KEY","\u3053\u3046\u3055\u3044\u306e\u308a\u3046\u3042\u308b\u3061\u3084\u3042"),v(A[0],"HELP_MESSAGE","\u25a0\u30a2\u30bf\u30c3\u30af\u5224\u5b9a\uff08 xAT, xATK, xATTACK \uff09\nx: \u30c0\u30a4\u30b9\u6570\uff08\u52a0\u7b97 + \u3068\u9664\u7b97 / \u3092\u4f7f\u7528\u53ef\u80fd\uff09\n\u4f8b\uff09 3AT, 4ATK, 5+6ATTACK, 15/2AT\n\n\u25a1\u30a2\u30bf\u30c3\u30af\u5224\u5b9a\u3000\u76ee\u6a19\u5024\u3064\u304d\uff08 xAT<=y, xATK<=y, xATTACK<=y \uff09\nx: \u30c0\u30a4\u30b9\u6570\uff08\u52a0\u7b97 + \u3068\u9664\u7b97 / \u3092\u4f7f\u7528\u53ef\u80fd\uff09\ny: \u76ee\u6a19\u5024\uff08 1 \u4ee5\u4e0a 6 \u4ee5\u4e0b\u3002\u52a0\u7b97 + \u3092\u4f7f\u7528\u53ef\u80fd\uff09\n\u4f8b\uff09 3AT<=4, 3AT<=2+1\n\n\u25a1\u30a2\u30bf\u30c3\u30af\u5224\u5b9a\u3000\u76ee\u6a19\u5024\uff06\u8ffd\u52a0\u30c0\u30e1\u30fc\u30b8\u3064\u304d\uff08 xAT<=y[>=a:+b], xATK<=y[>=a:+b], xATTACK<=y[z] \uff09\nx: \u30c0\u30a4\u30b9\u6570\uff08\u52a0\u7b97 + \u3068\u9664\u7b97 / \u3092\u4f7f\u7528\u53ef\u80fd\uff09\ny: \u76ee\u6a19\u5024\uff08 1 \u4ee5\u4e0a 6 \u4ee5\u4e0b\u3002\u52a0\u7b97 + \u3092\u4f7f\u7528\u53ef\u80fd\uff09\nz: \u8ffd\u52a0\u30c0\u30e1\u30fc\u30b8\u306e\u898f\u5247\uff08\u8a73\u7d30\u306f\u5f8c\u8ff0\uff09\uff08\u203b\u8907\u6570\u540c\u6642\u306b\u6307\u5b9a\u53ef\u80fd\uff09\n\n\u25bd\u8ffd\u52a0\u30c0\u30e1\u30fc\u30b8\u306e\u898f\u5247 [a:+b]\na: \u30d2\u30c3\u30c8\u6570\u304c a \u306a\u3089\n\u3000=a\u3000\uff08\u30d2\u30c3\u30c8\u6570\u304c a \u306b\u7b49\u3057\u3044\uff09\n\u3000>=a\u3000\uff08\u30d2\u30c3\u30c8\u6570\u304c a \u4ee5\u4e0a\uff09\nb: \u30c0\u30e1\u30fc\u30b8\u3092 b \u70b9\u8ffd\u52a0\n\n\u4f8b\uff09 3AT<=4[>=2:+3] #\u30eb\u30fc\u30eb\u30d6\u30c3\u30afp056\u300c\u30b0\u30ec\u30f3\u30b0\u30e9\u30f3\u30c8AR\u300d\n\u4f8b\uff09 2AT<=4[=1:+5][>=2:+8] #\u30eb\u30fc\u30eb\u30d6\u30c3\u30afp067\u300c\u30d5\u30a1\u30fc\u30dc\u30eb\u30fb\u30c9\u30e9\u30b4\u30f3\u30d6\u30ec\u30b9\u300d\n"),v(A[0],"ATTACK_ROLL_REG",/^(\d+([+\/]\d+)*)?AT(TACK|K)?(<=([1-6](\+\d)*))?((\[>?=\d+:\+\d+\])+)?/i.$freeze()),f.$register_prefix("\\d+([+\\/]\\d+)*AT"),s(f,"$eval_game_system_specific_command",function(u){var r=n;return e(r=c("ATTACK_ROLL_REG").$match(u))?this.$roll_attack(r["$[]"](1),r["$[]"](5),r["$[]"](7)):n}),f.$private(),s(f,"$roll_attack",function(u,t,r){try{B("eval_return");var o,K,i=this,k=n,R=n,y=n,T=n,p=n,d=n;return o=c("Arithmetic").$eval(u,z(c("RoundType"),"FLOOR")),e(t)&&(k=c("Arithmetic").$eval(t,z(c("RoundType"),"FLOOR")).$clamp(1,6)),K=i.$make_command_text(o,k,r),e(E(o,0))?K+" \uff1e \u30c0\u30a4\u30b9\u6570\u304c 0 \u3067\u3059":e(k["$nil?"]())&&e(r)?K+" \uff1e \u76ee\u6a19\u5024\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u8ffd\u52a0\u30c0\u30e1\u30fc\u30b8\u3092\u7b97\u51fa\u3067\u304d\u307e\u305b\u3093":(R=i.randomizer.$roll_barabara(o,6).$sort(),y=R.$count(1),e(k)&&(T=b(_(R,"count",[],function(l){return null==l&&(l=n),E(l,k)}),y)),p=i.$calc_damage(T,r),(d=[])["$<<"](K),d["$<<"](R.$join(",")),e(C(y,0))&&d["$<<"]("\u30af\u30ea\u30c6\u30a3\u30ab\u30eb "+y),e(T)&&d["$<<"]("\u30d2\u30c3\u30c8\u6570 "+T),e(p)&&d["$<<"]("\u30c0\u30e1\u30fc\u30b8 "+p),_(c("Result").$new(d.$join(" \uff1e ")),"tap",[],function(l){var g;return null==l&&(l=n),e(T)&&l["$condition="](C(T,0)),g=[C(y,0)],_(l,"critical=",g),g[g.length-1]}))}catch(x){if(x===a.t_eval_return)return x.$v;throw x}}),s(f,"$make_command_text",function(u,t,r){var $=n;return $=u+"attack",e(t)&&($=b($,"<="+t)),e(r)&&($=b($,r)),"("+$+")"}),s(f,"$calc_damage",function(u,t){var $=n;return e(t)?($=u,_(this.$parse_additional_damage_rules(t),"each",[],function(o){return null==o&&(o=n),e(o["$[]"]("condition").$call(u))?$=b($,o["$[]"]("additinal_damage")):n}),$):n}),s(f,"$parse_additional_damage_rules",function(u){return _(u.$scan(/\[(>?=)(\d+):\+(\d+)\]/),"map",[],function r($){return null==$&&($=n),D(["condition","additinal_damage"],{condition:(null==r.$$s?this:r.$$s).$make_additional_damage_condition($["$[]"](0),$["$[]"](1).$to_i()),additinal_damage:$["$[]"](2).$to_i()})},{$$s:this})}),s(f,"$make_additional_damage_condition",function(u,t){switch(u){case"=":return _(this,"lambda",[],function(i){return null==i&&(i=n),i["$=="](t)});case">=":return _(this,"lambda",[],function(i){return null==i&&(i=n),F(i,t)});default:return n}})})}}]);