(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[348],{8959:(be,he,me)=>{me(9993),Opal.modules["i18n/backend/fallbacks"]=function(e){var X,$,t,r,a,d,Y=e.module,G=e.class_variable_set,u=e.truthy,N=e.class_variable_get,L=e.def,g=e.send,h=e.send2,D=e.find_super,z=e.hash2,M=e.find_block_super,w=e.neqeq,W=e.thrower,ee=e.return_val,j=[],P=e.nil,S=e.$$$;return X=j,d=[a=Y(j[0],"I18n")].concat(X),G(d[0],"@@fallbacks",P),$=e.get_singleton_class(a),t=[$].concat(d),r=e.$r(t),L($,"$fallbacks",function(){var q=P;return G(t[1],"@@fallbacks",u(null!=t[1].$$cvars["@@fallbacks"]?"class variable":P)&&u(q=N(t[1],"@@fallbacks",!1))?q:S(S(r("I18n"),"Locale"),"Fallbacks").$new()),u(q=r("Thread").$current()["$[]"]("i18n_fallbacks"))?q:N(t[1],"@@fallbacks",!1)}),L($,"$fallbacks=",function(H){var q;return G(t[1],"@@fallbacks",u(H["$is_a?"](r("Array")))?S(S(r("I18n"),"Locale"),"Fallbacks").$new(H):H),q=["i18n_fallbacks",N(t[1],"@@fallbacks",!1)],g(r("Thread").$current(),"[]=",q),q[q.length-1]}),function($,E){var H,q,x,v,r=[Y($,"Backend")].concat(E);return H=r,x=[q=Y(r[0],"Fallbacks")].concat(H),v=e.$r(x),L(q,"$translate",function C(m,p,l){try{var T=W("return"),o=C.$$p||P,U=this,I=P,f=P;return C.$$p=null,null==l&&(l=v("EMPTY_HASH")),u(l.$fetch("fallback",!0))?u(l["$[]"]("fallback_in_progress"))?h(U,D(U,"translate",C,!1,!0),"translate",[m,p,l],o):(u(l["$[]"]("default"))&&(I=U["$extract_non_symbol_default!"](l)),f=l.$merge(z(["fallback_in_progress"],{fallback_in_progress:!0})),g(v("I18n").$fallbacks()["$[]"](m),"each",[],function s(b){var i=null==s.$$s?this:s.$$s;null==b&&(b=P);try{return g(i,"catch",["exception"],function c(){var n=null==c.$$s?this:c.$$s,y=P;if(y=h(n,M(n,"translate",c.$$def||s.$$def||C,!1,!1),"translate",[b,p,f],null),u(y["$nil?"]()))return P;w(m.$to_s(),b.$to_s())&&n.$on_fallback(m,b,p,l),T.$throw(y)},{$$s:i,$$ret:T})}catch(c){if(!e.rescue(c,[S(v("I18n"),"InvalidLocale")]))throw c;try{return P}finally{e.pop_exception()}}},{$$s:U}),u(l["$key?"]("default"))&&u(l["$[]"]("default")["$nil?"]())?P:u(I)?h(U,D(U,"translate",C,!1,!0),"translate",[m,P,l.$merge(z(["default"],{default:I}))],null):U.$throw("exception",S(v("I18n"),"MissingTranslation").$new(m,p,l))):h(U,D(U,"translate",C,!1,!0),"translate",[m,p,l],o)}catch(s){if(s===T)return s.$v;throw s}},-3),L(q,"$extract_non_symbol_default!",function(m){var l,p=P;return p=[m["$[]"]("default")].$flatten(),l=g(p,"detect",[],function(o){return null==o&&(o=P),o["$is_a?"](v("Symbol"))["$!"]()}),u(l)&&m["$[]="]("default",p["$[]"](0,p.$index(l))),l}),L(q,"$exists?",function C(m,p,l){try{var T=W("return"),o=C.$$p||P,U=this;return C.$$p=null,null==l&&(l=v("EMPTY_HASH")),u(l.$fetch("fallback",!0))?(g(v("I18n").$fallbacks()["$[]"](m),"each",[],function I(f){var s=null==I.$$s?this:I.$$s;null==f&&(f=P);try{if(!u(h(s,M(s,"exists?",I.$$def||C,!1,!1),"exists?",[f,p],null)))return P;T.$throw(!0)}catch(b){if(!e.rescue(b,[S(v("I18n"),"InvalidLocale")]))throw b;try{return P}finally{e.pop_exception()}}},{$$s:U,$$ret:T}),!1):h(U,D(U,"exists?",C,!1,!0),"exists?",[m,p,l],o)}catch(I){if(I===T)return I.$v;throw I}},-3),q.$private(),L(q,"$on_fallback",ee(P))}(d[0],d)},Opal.modules["bcdice/randomizer"]=function(e){var a,_,H,q,x,v,$,E,G=e.klass,u=e.const_set,N=e.def,L=e.truthy,g=e.rb_gt,h=e.rb_plus,D=e.rb_le,z=e.send,M=e.rb_minus,w=e.eqeq,W=e.rb_times,ee=e.eqeqeq,j=e.rb_ge,P=[],S=e.nil,J=e.$$$;return a=P,$=[(0,e.module)(P[0],"BCDice")].concat(a),E=e.$r($),_=$,q=[H=G($[0],null,"Randomizer")].concat(_),x=e.$r(q),(v=H.$$prototype).rand_results=v.detailed_rand_results=S,u(q[0],"UPPER_LIMIT_DICE_TIMES",200),u(q[0],"UPPER_LIMIT_DICE_SIDES",1e4),u(q[0],"UPPER_LIMIT_RANDS",1e4),N(H,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),H.$attr_reader("rand_results"),H.$attr_reader("detailed_rand_results"),u(q[0],"DetailedRandResult",x("Struct").$new("kind","sides","value")),N(H,"$roll_barabara",function(m,p){var l=this;return L(g(h(l.rand_results.$size(),m),x("UPPER_LIMIT_RANDS")))&&l.$raise(x("TooManyRandsError")),L(D(m,0))||L(g(m,x("UPPER_LIMIT_DICE_TIMES")))?[]:z(x("Array"),"new",[m],function T(){return(null==T.$$s?this:T.$$s).$roll_once(p)},{$$s:l})}),N(H,"$roll_sum",function(m,p){return this.$roll_barabara(m,p).$sum()}),N(H,"$roll_once",function(m){var l=S;return L(D(m,0))||L(g(m,x("UPPER_LIMIT_DICE_SIDES")))?0:(l=this.$rand_inner(m),this.$push_to_detail("normal",m,l),l)}),N(H,"$roll_index",function(m){return M(this.$roll_once(m),1)}),N(H,"$roll_tens_d10",function(){var l,p=S;return p=this.$rand_inner(10),w(p,10)&&(p=0),l=W(p,10),this.$push_to_detail("tens_d10",10,l),l}),N(H,"$roll_d9",function(){var p;return p=M(this.$rand_inner(10),1),this.$push_to_detail("d9",10,p),p}),N(H,"$roll_d66",function(m){var T,l=S;return l=z(x("Array"),"new",[2],function o(){return(null==o.$$s?this:o.$$s).$roll_once(6)},{$$s:this}),ee(J(x("D66SortType"),"ASC"),T=m)?l["$sort!"]():ee(J(x("D66SortType"),"DESC"),T)&&l["$sort!"]()["$reverse!"](),h(W(l["$[]"](0),10),l["$[]"](1))}),H.$private(),N(H,"$rand_inner",function(m){var l,p=this;return L(j(p.rand_results.$size(),x("UPPER_LIMIT_RANDS")))&&p.$raise(x("TooManyRandsError")),l=p.$random(m),p.rand_results["$<<"]([l,m]),l}),N(H,"$random",function(m){return h(x("Kernel").$rand(m),1)}),N(H,"$push_to_detail",function(m,p,l){var o;return o=x("DetailedRandResult").$new(m,p,l),this.detailed_rand_results.$push(o)}),G($[0],E("StandardError"),"TooManyRandsError"),S},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var z,ee,X,a,d,$,E,P,w,Y=e.module,G=e.klass,u=e.def,N=e.truthy,L=e.return_val,g=[],h=e.nil;return z=g,ee=w=[Y(g[0],"BCDice")].concat(z),X=P=[Y(w[0],"DiceTable")].concat(ee),d=[a=G(P[0],null,"RollResult")].concat(X),$=e.$r(d),(E=a.$$prototype).table_name=E.value=E.body=h,u(a,"$initialize",function(r,_,H){var q=this;return q.table_name=r,q.value=_,q.body=H}),a.$attr_reader("table_name"),a.$attr_reader("value"),a.$attr_reader("body"),u(a,"$to_s",function(){var r=this;return r.table_name+"("+r.value+") \uff1e "+r.body}),u(a,"$last_body",function(){var r=this;return N(r.body["$is_a?"]($("RollResult")))?r.body.$last_body():r.body}),u(a,"$empty?",L(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var z,ee,X,a,d,$,E,P,w,Y=e.module,G=e.klass,u=e.truthy,N=e.def,L=e.rb_minus,g=[],h=e.nil;return z=g,ee=w=[Y(g[0],"BCDice")].concat(z),X=P=[Y(w[0],"DiceTable")].concat(ee),d=[a=G(P[0],null,"ChainTable")].concat(X),$=e.$r(d),(E=a.$$prototype).times=E.sides=E.items=E.name=h,N(a,"$initialize",function(r,_,H){var q=this,x=h;return q.name=r,q.items=H.$freeze(),x=/(\d+)D(\d+)/i.$match(_),u(x)||q.$raise($("ArgumentError"),"Unexpected table type: "+_),q.times=x["$[]"](1).$to_i(),q.sides=x["$[]"](2).$to_i()}),N(a,"$roll",function(r){var H,q,_=this,x=h;return H=r.$roll_sum(_.times,_.sides),q=L(H,_.times),x=_.items["$[]"](q),u(x["$respond_to?"]("roll"))&&(x=x.$roll(r)),$("RollResult").$new(_.name,H,x)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var W,S,$,E,t,r,_,X,j,Y=e.module,G=e.klass,u=e.hash2,N=e.defs,L=e.def,g=e.rb_plus,h=e.rb_times,D=e.rb_minus,z=[],M=e.nil;return W=z,S=j=[Y(z[0],"BCDice")].concat(W),$=X=[Y(j[0],"DiceTable")].concat(S),t=[E=G(X[0],null,"D66GridTable")].concat($),r=e.$r(t),(_=E.$$prototype).name=_.items=M,N(E,"$from_i18n",function(q,x){var C=M;return C=r("I18n").$t(q,u(["locale","raise"],{locale:x,raise:!0})),this.$new(C["$[]"]("name"),C["$[]"]("items"))}),L(E,"$initialize",function(q,x){return this.name=q,this.items=x.$freeze()}),L(E,"$roll",function(q){var v,C,m,p,l;return v=q.$roll_once(6),C=q.$roll_once(6),m=g(h(v,10),C),p=D(v,1),l=D(C,1),r("RollResult").$new(this.name,m,this.items["$[]"](p)["$[]"](l))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var M,j,d,$,E,t,S,J,W,Y=e.module,G=e.klass,u=e.hash2,N=e.defs,L=e.def,h=[],D=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),M=h,j=W=[Y(h[0],"BCDice")].concat(M),S=[Y(W[0],"DiceTable")].concat(j),J=e.$r(S),d=S,E=[$=G(S[0],J("D66GridTable"),"D66HalfGridTable")].concat(d),t=e.$r(E),N($,"$from_i18n",function(_,H){var x=D;return x=t("I18n").$t(_,u(["locale","raise"],{locale:H,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items_1_2_3"),x["$[]"]("items_4_5_6"))}),L($,"$initialize",function(_,H,q){return this.name=_,this.items=[H,H,H,q,q,q].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var M,j,d,$,E,t,S,J,W,Y=e.module,G=e.klass,u=e.hash2,N=e.defs,L=e.def,h=[],D=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),M=h,j=W=[Y(h[0],"BCDice")].concat(M),S=[Y(W[0],"DiceTable")].concat(j),J=e.$r(S),d=S,E=[$=G(S[0],J("D66GridTable"),"D66OneThirdTable")].concat(d),t=e.$r(E),N($,"$from_i18n",function(_,H){var x=D;return x=t("I18n").$t(_,u(["locale","raise"],{locale:H,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items_1_2"),x["$[]"]("items_3_4"),x["$[]"]("items_5_6"))}),L($,"$initialize",function(_,H,q,x){return this.name=_,this.items=[H,H,q,q,x,x].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var j,X,t,r,_,H,q,d,S,Y=e.module,G=e.klass,u=e.hash2,N=e.defs,L=e.def,g=e.eqeqeq,h=e.rb_plus,D=e.rb_times,z=e.truthy,M=[],w=e.nil,W=e.$$$;return j=M,X=S=[Y(M[0],"BCDice")].concat(j),t=d=[Y(S[0],"DiceTable")].concat(X),_=[r=G(d[0],null,"D66Table")].concat(t),H=e.$r(_),(q=r.$$prototype).sort_type=q.items=q.name=w,N(r,"$from_i18n",function(v,C){var l,p=w;return p=H("I18n").$t(v,u(["locale"],{locale:C})),l=H("D66SortType").$const_get(p["$[]"]("d66_sort_type")),this.$new(p["$[]"]("name"),l,p["$[]"]("items"))}),L(r,"$initialize",function(v,C,m){var p=this;return p.name=v,p.sort_type=C,p.items=m.$freeze()}),L(r,"$roll",function(v){var C=this,m=w,p=w,l=w,T=w;return m=v.$roll_barabara(2,6),g(W(H("D66SortType"),"ASC"),p=C.sort_type)?m["$sort!"]():g(W(H("D66SortType"),"DESC"),p)&&m["$sort!"]()["$reverse!"](),l=h(D(m["$[]"](0),10),m["$[]"](1)),T=z(p=C.items["$[]"](l))?p:C.items["$[]"](l.$to_s()),z(T["$respond_to?"]("roll"))&&(T=T.$roll(v)),H("RollResult").$new(C.name,l,T)}),L(r,"$choice",function(v){return H("RollResult").$new(this.name,v,this.items["$[]"](v))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){var P,a,$,E,J,Y=e.module,G=e.klass,u=e.hash2,N=e.send,L=e.to_ary,g=e.rb_plus,h=e.rb_times,D=e.send2,z=e.find_super,M=e.def,W=[],ee=e.nil;return e.top.$require("bcdice/dice_table/d66_table"),P=W,a=J=[Y(W[0],"BCDice")].concat(P),$=[Y(J[0],"DiceTable")].concat(a),E=e.$r($),M(G($[0],E("D66Table"),"D66LeftRangeTable"),"$initialize",function H(q,x,v){var p;return H.$$p=null,p=u([],{}),N(v,"each",[],function(T){var o,f;return null==T&&(T=ee),o=L(T),f=null==o[1]?ee:o[1],N(null==o[0]?ee:o[0],"each",[],function(b){return null==b&&(b=ee),N(f,"each_with_index",[],function(c,n){var y,A;return null==c&&(c=ee),null==n&&(n=ee),A=g(h(b,10),g(n,1)),N(p,"[]=",y=[A,c]),y[y.length-1]})})}),D(this,z(this,"initialize",H,!1,!0),"initialize",[q,x,p],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var ee,J,E,t,r,_,H,a,P,Y=e.module,G=e.klass,u=e.hash2,N=e.defs,L=e.def,g=e.truthy,h=e.rb_minus,D=e.rb_plus,z=e.rb_times,M=[],w=e.nil;return ee=M,J=P=[Y(M[0],"BCDice")].concat(ee),E=a=[Y(P[0],"DiceTable")].concat(J),r=[t=G(a[0],null,"D66ParityTable")].concat(E),_=e.$r(r),(H=t.$$prototype).odd=H.even=H.name=w,N(t,"$from_i18n",function(x,v){var m=w;return m=_("I18n").$t(x,u(["locale","raise"],{locale:v,raise:!0})),this.$new(m["$[]"]("name"),m["$[]"]("odd"),m["$[]"]("even"))}),L(t,"$initialize",function(x,v,C){var m=this;return m.name=x,m.odd=v.$freeze(),m.even=C.$freeze()}),L(t,"$roll",function(x){var m,l,T,v=this,C=w;return C=x.$roll_once(6),m=x.$roll_once(6),l=(g(C["$odd?"]())?v.odd:v.even)["$[]"](h(m,1)),T=D(z(C,10),m),_("RollResult").$new(v.name,T,l)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var M,j,a,d,$,E,t,S,W,Y=e.module,G=e.klass,u=e.def,N=e.rb_plus,L=e.rb_times,g=e.send,h=[],D=e.nil;return M=h,j=W=[Y(h[0],"BCDice")].concat(M),a=S=[Y(W[0],"DiceTable")].concat(j),$=[d=G(S[0],null,"D66RangeTable")].concat(a),E=e.$r($),(t=d.$$prototype).items=t.name=D,u(d,"$initialize",function(_,H){return this.name=_,this.items=H.$freeze()}),u(d,"$roll",function(_){var q,x,v,C=D;return q=_.$roll_once(6),x=_.$roll_once(6),v=N(L(q,10),x),C=g(this.items,"find",[],function(p){return null==p&&(p=D),p["$[]"](0)["$include?"](v)}),E("RollResult").$new(this.name,v,C["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function(e){var ee,J,E,t,r,_,H,a,P,Y=e.module,G=e.klass,u=e.const_set,N=e.send,L=e.truthy,g=e.def,h=e.eqeqeq,D=e.rb_times,z=e.rb_plus,M=[],w=e.nil;return ee=M,J=P=[Y(M[0],"BCDice")].concat(ee),E=a=[Y(P[0],"DiceTable")].concat(J),r=[t=G(a[0],null,"RangeTable")].concat(E),_=e.$r(r),(H=t.$$prototype).name=H.items=H.num_of_dice=H.num_of_sides=H.formatter=w,u(r[0],"RollResult",N(_("Struct"),"new",["sum","values","content","formatted"],function q(){return(null==q.$$s?this:q.$$s).$alias_method("to_s","formatted")},{$$s:t})),u(r[0],"Item",_("Struct").$new("range","content")),u(r[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),u(r[0],"DEFAULT_FORMATTER",N(t,"lambda",[],function(x,v){return null==x&&(x=w),null==v&&(v=w),x.$name()+"("+v.$sum()+") \uff1e "+v.$content()})),t.$attr_reader("name"),t.$attr_reader("num_of_dice"),t.$attr_reader("num_of_sides"),g(t,"$initialize",function q(x,v,C){var l,m=q.$$p||w,p=this,T=w;return q.$$p=null,p.name=x.$freeze(),p.formatter=L(l=m)?l:_("DEFAULT_FORMATTER"),T=_("DICE_ROLL_METHOD_RE").$match(v),L(T)||p.$raise(_("ArgumentError"),p.name+": invalid dice roll method: "+v),p.num_of_dice=T["$[]"](1).$to_i(),p.num_of_sides=T["$[]"](2).$to_i(),p.$store(C)}),g(t,"$fetch",function(x){var C,v=this;return C=N(v.items,"find",[],function(p){return null==p&&(p=w),p.$range()["$include?"](x)}),L(C)||v.$raise(_("RangeError"),v.name+": value is out of range: "+x),C}),g(t,"$roll",function(x){var m,v=this,C=w,p=w;return m=(C=x.$roll_barabara(v.num_of_dice,v.num_of_sides)).$sum(),(p=_("RollResult").$new(m,C,v.$fetch(m).$content()))["$formatted="](v.formatter["$[]"](v,p)),p}),t.$private(),g(t,"$store",function(x){var C,m,v=this;return C=N(x,"map",[],function p(l,T){return null==l&&(l=w),null==T&&(T=w),[(null==p.$$s?this:p.$$s).$coerce_to_int_range(l),T]},{$$s:v}),m=N(C,"sort_by",[],function(l,T){return null==l&&(l=w),null==T&&(T=w),l.$min()}),v.$assert_min_sum_is_covered(m),v.$assert_max_sum_is_covered(m),v.$assert_no_gap_or_overlap_in_ranges(m),v.items=N(m,"map",[],function(l,T){return null==l&&(l=w),null==T&&(T=w),_("Item").$new(l,T.$freeze()).$freeze()}).$freeze(),v}),g(t,"$coerce_to_int_range",function(x){var C;return h(_("Integer"),C=x)?_("Range").$new(x,x):h(_("Range"),C)&&L(x.$begin()["$is_a?"](_("Integer")))&&L(x.$end()["$is_a?"](_("Integer")))?x:this.$raise(_("TypeError"),this.name+": "+x+" ("+x.$class()+") must be an Integer or a Range with Integers ")}),g(t,"$assert_min_sum_is_covered",function(x){var C,v=this,m=w;return C=v.num_of_dice,m=x.$first()["$[]"](0),L(m["$include?"](C))||v.$raise(_("RangeError"),v.name+": min value ("+C+") is not covered: "+m),v}),g(t,"$assert_max_sum_is_covered",function(x){var C,v=this,m=w;return C=D(v.num_of_dice,v.num_of_sides),m=x.$last()["$[]"](0),L(m["$include?"](C))||v.$raise(_("RangeError"),v.name+": max value ("+C+") is not covered: "+m),v}),g(t,"$assert_no_gap_or_overlap_in_ranges",function(x){return N(x,"each_cons",[2],function C(m,p){var U,I,l=null==C.$$s?this:C.$$s,T=w,o=w;return null==l.name&&(l.name=w),null==m&&(m=w),null==p&&(p=w),T=m["$[]"](0),o=p["$[]"](0),U=T.$max(),I=z(U,1),L(o["$include?"](U))&&l.$raise(_("RangeError"),l.name+": Range overlap: "+T+" and "+o),L(o["$include?"](I))?w:l.$raise(_("RangeError"),l.name+": Range gap: "+T+" and "+o)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var w,P,d,_,H,q,x,E,J,ee,Y=e.module,G=e.klass,u=e.send,N=e.def,L=e.rb_minus,g=e.return_ivar,h=[],D=e.nil,z=e.$$$;return w=h,P=ee=[Y(h[0],"BCDice")].concat(w),d=J=[Y(ee[0],"DiceTable")].concat(P),_=E=[G(J[0],null,"SaiFicSkillTable")].concat(d),q=[H=G(E[0],null,"Category")].concat(_),x=e.$r(q),N(H,"$initialize",function(C,m,p,l){var T=this;return T.name=C,T.skills=u(m.$map(),"with_index",[2],function(U,I){return null==U&&(U=D),null==I&&(I=D),z(x("SaiFicSkillTable"),"Skill").$new(C,U,p,I,l)}),T.dice=p}),N(H,"$roll",function(C){return this.$skills()["$[]"](L(C.$roll_sum(2,6),2))}),N(H,"$to_s",g("name")),H.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var D,W,J,E,t,a,j,M,Y=e.module,G=e.klass,u=e.def,N=e.hash2,L=[],g=e.nil;return D=L,W=M=[Y(L[0],"BCDice")].concat(D),J=j=[Y(M[0],"DiceTable")].concat(W),a=[G(j[0],null,"SaiFicSkillTable")].concat(J),(t=(E=G(a[0],null,"Skill")).$$prototype).s_format=t.category_dice=t.row_dice=t.category_name=t.name=g,u(E,"$initialize",function(_,H,q,x,v){var C=this;return C.category_name=_,C.name=H,C.category_dice=q,C.row_dice=x,C.s_format=v}),u(E,"$to_s",function(){var _=this;return _.$format(_.s_format,N(["category_dice","row_dice","category_name","skill_name"],{category_dice:_.category_dice,row_dice:_.row_dice,category_name:_.category_name,skill_name:_.name}))}),E.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var a,t,x,v,C,m,p,_,$,Y=e.module,G=e.klass,u=e.ensure_kwargs,N=e.hash2,L=e.send,h=e.defs,D=e.const_set,z=e.to_ary,M=e.def,w=e.truthy,W=e.rb_minus,ee=e.rb_plus,j=e.top,P=[],S=e.nil,J=e.$$$;return j.$require("bcdice/dice_table/sai_fic_skill_table/category"),j.$require("bcdice/dice_table/sai_fic_skill_table/skill"),a=P,t=$=[Y(P[0],"BCDice")].concat(a),x=_=[Y($[0],"DiceTable")].concat(t),C=[v=G(_[0],null,"SaiFicSkillTable")].concat(x),m=e.$r(C),(p=v.$$prototype).rtt=p.rtt_format=p.rct=p.rct_format=p.rttn=p.rttn_format=p.categories=S,h(v,"$from_i18n",function(T,o,U){var I,f,s,n,c=S;return null==(I=(U=u(U)).$$smap.rtt)&&(I=S),null==(f=U.$$smap.rct)&&(f=S),null==(s=U.$$smap.rttn)&&(s=S),n=(c=m("I18n").$t("RTT",N(["locale","raise","default"],{locale:o,raise:!1,default:N([],{})})).$merge(m("I18n").$t(T,N(["locale","raise"],{locale:o,raise:!0}))))["$[]"]("items"),c=L(c,"select",[],function(A,k){return null==A&&(A=S),null==k&&(k=S),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](A)}),this.$new(n,e.to_hash(c).$merge(N(["rtt","rct","rttn"],{rtt:I,rct:f,rttn:s})))},-3),D(C[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),D(C[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),D(C[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),D(C[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),M(v,"$initialize",function(T,o){var U,I,f,s,b,i,c,n=this;return null==(U=(o=u(o)).$$smap.rtt)&&(U=S),null==(I=o.$$smap.rct)&&(I=S),null==(f=o.$$smap.rttn)&&(f=S),null==(s=o.$$smap.rtt_format)&&(s=m("DEFAULT_RTT")),null==(b=o.$$smap.rct_format)&&(b=m("DEFAULT_RCT")),null==(i=o.$$smap.rttn_format)&&(i=m("DEFAULT_RTTN")),null==(c=o.$$smap.s_format)&&(c=m("DEFAULT_S")),n.categories=L(T.$map(),"with_index",[1],function(A,k){var F,ne,V;return null==A&&(A=S),null==k&&(k=S),ne=null==(F=z(A))[0]?S:F[0],V=null==F[1]?S:F[1],J(m("SaiFicSkillTable"),"Category").$new(ne,V,k,c)},{$$has_top_level_mlhs_arg:!0}),n.rtt=U,n.rct=I,n.rttn=f.$to_a(),n.rtt_format=s,n.rct_format=b,n.rttn_format=i},-2),D(C[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),v.$attr_reader("categories"),M(v,"$roll_command",function(T,o){var I,U=this,f=S,s=S;return w(["RTT",U.rtt]["$include?"](I=o))?U.$format_skill(U.rtt_format,U.$roll_skill(T)):w(["RCT",U.rct]["$include?"](I))?(f=U.$roll_category(T),U.$format(U.rct_format,N(["category_dice","category_name"],{category_dice:f.$dice(),category_name:f.$name()}))):w(s=m("RTTN").$index(I))||w(s=U.rttn.$index(I))?U.$format_skill(U.rttn_format,U.categories["$[]"](s).$roll(T)):S}),M(v,"$roll_category",function(T){return this.categories["$[]"](W(T.$roll_once(6),1))}),M(v,"$roll_skill",function(T){return this.$roll_category(T).$roll(T)}),M(v,"$prefixes",function(){var T=this;return ee(["RTT[1-6]?","RCT",T.rtt,T.rct],T.rttn).$compact()}),v.$private(),M(v,"$format_skill",function(T,o){return this.$format(T,N(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:o.$category_dice(),row_dice:o.$row_dice(),category_name:o.$category_name(),skill_name:o.$name(),text:o.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function(e){var w,P,d,$,E,t,r,J,ee,Y=e.module,G=e.klass,u=e.hash2,N=e.defs,L=e.truthy,g=e.def,h=e.rb_minus,D=[],z=e.nil;return w=D,P=ee=[Y(D[0],"BCDice")].concat(w),d=J=[Y(ee[0],"DiceTable")].concat(P),E=[$=G(J[0],null,"Table")].concat(d),t=e.$r(E),(r=$.$$prototype).times=r.sides=r.name=r.items=z,N($,"$from_i18n",function(H,q){var v=z;return v=t("I18n").$t(H,u(["locale"],{locale:q})),this.$new(v["$[]"]("name"),v["$[]"]("type"),v["$[]"]("items"))}),g($,"$initialize",function(H,q,x){var v=this,C=z;return v.name=H,v.items=x.$freeze(),C=/(\d+)D(\d+)/i.$match(q),L(C)||v.$raise(t("ArgumentError"),"Unexpected table type: "+q),v.times=C["$[]"](1).$to_i(),v.sides=C["$[]"](2).$to_i()}),g($,"$roll",function(H){var x,q=this;return x=H.$roll_sum(q.times,q.sides),q.$choice(x)}),g($,"$choice",function(H){var x,q=this;return x=h(H,q.times),t("RollResult").$new(q.name,H,q.items["$[]"](x))})},Opal.modules["bcdice/dice_table"]=function(e){var Y=e.top;return Y.$require("bcdice/dice_table/roll_result"),Y.$require("bcdice/dice_table/chain_table"),Y.$require("bcdice/dice_table/d66_grid_table"),Y.$require("bcdice/dice_table/d66_half_grid_table"),Y.$require("bcdice/dice_table/d66_one_third_table"),Y.$require("bcdice/dice_table/d66_left_range_table"),Y.$require("bcdice/dice_table/d66_parity_table"),Y.$require("bcdice/dice_table/d66_range_table"),Y.$require("bcdice/dice_table/d66_table"),Y.$require("bcdice/dice_table/range_table"),Y.$require("bcdice/dice_table/sai_fic_skill_table"),Y.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var g,M,W,D,Y=e.module,G=e.const_set,u=[];return g=u,M=D=[Y(u[0],"BCDice")].concat(g),W=[Y(D[0],"D66SortType")].concat(M),G(W[0],"NO_SORT","no_sort"),G(W[0],"ASC","asc"),G(W[0],"DESC","desc"),function(z,M){var W=[Y(z,"RoundType")].concat(M);return G(W[0],"CEIL","ceil"),G(W[0],"FLOOR","floor"),G(W[0],"ROUND","round")}(D[0],D)},Opal.modules["bcdice/translate"]=function(e){var M,j,P,S,J,W,Y=e.module,G=e.ensure_kwargs,u=e.kwrestargs,L=e.hash2,g=e.def,h=[],D=e.nil;return M=h,j=W=[Y(h[0],"BCDice")].concat(M),S=[P=Y(W[0],"Translate")].concat(j),J=e.$r(S),g(P,"$translate",function(a,d){var $,E=this;return null==E.locale&&(E.locale=D),d=G(d),$=u(d,{}),J("I18n").$translate(a,L(["locale","raise"],{locale:E.locale,raise:!0}).$merge(e.to_hash($)))},-2)},Opal.modules["bcdice/result"]=function(e){var P,X,S,M,W,G=e.klass,u=e.send,N=e.def,L=e.return_val,g=e.return_ivar,h=[],D=e.nil;return M=h,P=W=[(0,e.module)(h[0],"BCDice")].concat(M),[S=G(W[0],null,"Result")].concat(P),N(X=e.get_singleton_class(S),"$success",function($){return u(this.$new(),"tap",[],function(r){var _;return null==r&&(r=D),r["$text="]($),u(r,"success=",_=[!0]),_[_.length-1]})}),N(X,"$failure",function($){return u(this.$new(),"tap",[],function(r){var _;return null==r&&(r=D),r["$text="]($),u(r,"failure=",_=[!0]),_[_.length-1]})}),N(X,"$critical",function($){return u(this.$new(),"tap",[],function(r){var _;return null==r&&(r=D),r["$text="]($),r["$critical="](!0),u(r,"success=",_=[!0]),_[_.length-1]})}),N(X,"$fumble",function($){return u(this.$new(),"tap",[],function(r){var _;return null==r&&(r=D),r["$text="]($),r["$fumble="](!0),u(r,"failure=",_=[!0]),_[_.length-1]})}),N(X,"$nothing",L("nothing")),N(S,"$initialize",function(a){var d=this;return null==a&&(a=D),d.text=a,d.rands=D,d.detailed_rands=D,d.secret=!1,d.success=!1,d.failure=!1,d.critical=!1,d.fumble=!1},-1),S.$attr_accessor("text","rands","detailed_rands"),S.$attr_writer("secret","success","failure","critical","fumble"),N(S,"$secret?",g("secret")),N(S,"$success?",g("success")),N(S,"$failure?",g("failure")),N(S,"$critical?",g("critical")),N(S,"$fumble?",g("fumble")),N(S,"$condition=",function(a){return this.success=a,this.failure=a["$!"]()})},Opal.modules["racc/parser"]=function(e){var H,x,v,Y=e.module,G=e.klass,u=e.truthy,N=e.const_set,L=e.defs,g=e.gvars,h=e.rb_lt,D=e.def,z=e.to_ary,M=e.send,w=e.neqeq,W=e.rb_plus,ee=e.eqeq,j=e.rb_ge,P=e.rb_gt,S=e.rb_minus,J=e.rb_le,X=e.rb_times,a=e.assign_ivar_val,$=[],E=e.$r($),t=e.nil,r=e.$$$;return H=$,x=[Y($[0],"Racc")].concat(H),v=e.$r(x),G(x[0],v("StandardError"),"ParseError"),u(r("::","ParseError","skip_raise")?"constant":t)||N($[0],"ParseError",r(E("Racc"),"ParseError")),function(_,H){var l,T,o,U,I,v=[Y(_,"Racc")].concat(H),C=e.$r(v);return u(C("Racc_No_Extensions","skip_raise")?"constant":t)||N(v[0],"Racc_No_Extensions",!1),l=v,o=[T=G(v[0],null,"Parser")].concat(l),U=e.$r(o),(I=T.$$prototype).yydebug=I.racc_debug_out=I.racc_error_status=I.racc_t=I.racc_vstack=I.racc_val=I.racc_state=I.racc_tstack=t,N(o[0],"Racc_Runtime_Version","1.4.6"),N(o[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),N(o[0],"Racc_Runtime_Core_Version_R","1.4.6"),N(o[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),N(o[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),N(o[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),N(o[0],"Racc_Runtime_Core_Version",U("Racc_Runtime_Core_Version_R")),N(o[0],"Racc_Runtime_Core_Revision",U("Racc_Runtime_Core_Revision_R")),N(o[0],"Racc_Runtime_Type","ruby"),L(U("Parser"),"$racc_runtime_type",function(){return U("Racc_Runtime_Type")}),D(T,"$_racc_setup",function(){var s,b,i=this,c=t,n=t;return null==g.stderr&&(g.stderr=t),u(r(i.$class(),"Racc_debug_parser"))||(i.yydebug=!1),u(null!=(s=i.yydebug)&&s!==t?"instance-variable":t)||(i.yydebug=!1),u(i.yydebug)&&(u(null!=(b=i.racc_debug_out)&&b!==t?"instance-variable":t)||(i.racc_debug_out=g.stderr),i.racc_debug_out=u(c=i.racc_debug_out)?c:g.stderr),n=r(i.$class(),"Racc_arg"),u(h(n.$size(),14))&&n["$[]="](13,!0),n}),D(T,"$_racc_init_sysvars",function(){var s=this;return s.racc_state=[0],s.racc_tstack=[],s.racc_vstack=[],s.racc_t=t,s.racc_val=t,s.racc_read_next=!0,s.racc_user_yyerror=!1,s.racc_error_status=0}),D(T,"$do_parse",function(){return this.$__send__(U("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),D(T,"$next_token",function(){return this.$raise(U("NotImplementedError"),this.$class()+"#next_token is not defined")}),D(T,"$_racc_do_parse_rb",function(s,b){var i,n=this,y=t,A=t,k=t,F=t,ne=t,V=t,re=t,te=t;return i=z(s),y=null==i[0]?t:i[0],A=null==i[1]?t:i[1],k=null==i[2]?t:i[2],F=null==i[3]?t:i[3],ne=null==i[10]?t:i[10],n.$_racc_init_sysvars(),V=re=te=t,M(n,"catch",["racc_end_parse"],function K(){var R,O,Z=null==K.$$s?this:K.$$s,B=t;for(null==Z.racc_state&&(Z.racc_state=t),null==Z.racc_read_next&&(Z.racc_read_next=t),null==Z.racc_t&&(Z.racc_t=t),null==Z.yydebug&&(Z.yydebug=t),null==Z.racc_val&&(Z.racc_val=t);u(!0);)for(u(te=F["$[]"](Z.racc_state["$[]"](-1)))?(u(Z.racc_read_next)&&w(Z.racc_t,0)&&(O=Z.$next_token(),R=z(O),V=null==R[0]?t:R[0],Z.racc_val=null==R[1]?t:R[1],Z.racc_t=u(V)?u(B=ne["$[]"](V))?B:1:0,u(Z.yydebug)&&Z.$racc_read_token(Z.racc_t,V,Z.racc_val),Z.racc_read_next=!1),te=W(te,Z.racc_t),u(j(te,0))&&u(re=y["$[]"](te))&&ee(A["$[]"](te),Z.racc_state["$[]"](-1))||(re=k["$[]"](Z.racc_state["$[]"](-1)))):re=k["$[]"](Z.racc_state["$[]"](-1));u(re=Z.$_racc_evalact(re,s)););},{$$s:n})}),D(T,"$yyparse",function(s,b){return this.$__send__(U("Racc_YY_Parse_Method"),s,b,this.$_racc_setup(),!0)}),D(T,"$_racc_yyparse_rb",function(s,b,i,c){var n,A=this,k=t,F=t,Q=t,ne=t,re=t,te=t,K=t;return n=z(i),k=null==n[0]?t:n[0],F=null==n[1]?t:n[1],Q=null==n[2]?t:n[2],ne=null==n[3]?t:n[3],re=null==n[10]?t:n[10],A.$_racc_init_sysvars(),te=t,K=t,M(A,"catch",["racc_end_parse"],function R(){var O=null==R.$$s?this:R.$$s;for(null==O.racc_state&&(O.racc_state=t);!u(K=ne["$[]"](O.racc_state["$[]"](-1)));)for(;u(te=O.$_racc_evalact(Q["$[]"](O.racc_state["$[]"](-1)),i)););return M(s,"__send__",[b],function Z(B,ae){var ie=null==Z.$$s?this:Z.$$s,se=t,$e=t;for(null==ie.racc_t&&(ie.racc_t=t),null==ie.racc_state&&(ie.racc_state=t),null==ie.racc_read_next&&(ie.racc_read_next=t),null==B&&(B=t),null==ae&&(ae=t),ie.racc_t=u(B)?u(se=re["$[]"](B))?se:1:0,ie.racc_val=ae,ie.racc_read_next=!1,K=W(K,ie.racc_t),u(j(K,0))&&u(te=k["$[]"](K))&&ee(F["$[]"](K),ie.racc_state["$[]"](-1))||(te=Q["$[]"](ie.racc_state["$[]"](-1)));u(te=ie.$_racc_evalact(te,i)););for(;u(u(se=u($e=(K=ne["$[]"](ie.racc_state["$[]"](-1)))["$!"]())?$e:ie.racc_read_next["$!"]())?se:ie.racc_t["$=="](0));)for(u(K)&&u(K=W(K,ie.racc_t))&&u(j(K,0))&&u(te=k["$[]"](K))&&ee(F["$[]"](K),ie.racc_state["$[]"](-1))||(te=Q["$[]"](ie.racc_state["$[]"](-1)));u(te=ie.$_racc_evalact(te,i)););},{$$s:O})},{$$s:A})}),D(T,"$_racc_evalact",function(s,b){var i,Q,n=this,y=t,A=t,F=t,ne=t,V=t,re=t;if(y=null==(i=z(b))[0]?t:i[0],A=null==i[1]?t:i[1],F=null==i[3]?t:i[3],Q=null==i[11]?t:i[11],ne=null==i[12]?t:i[12],u(P(s,0))&&u(h(s,Q)))u(P(n.racc_error_status,0))&&(ee(n.racc_t,1)||(n.racc_error_status=S(n.racc_error_status,1))),n.racc_vstack.$push(n.racc_val),n.racc_state.$push(s),n.racc_read_next=!0,u(n.yydebug)&&(n.racc_tstack.$push(n.racc_t),n.$racc_shift(n.racc_t,n.racc_tstack,n.racc_vstack));else if(u(h(s,0))&&u(P(s,ne["$-@"]()))){if(V=M(n,"catch",["racc_jump"],function te(){var K=null==te.$$s?this:te.$$s;return null==K.racc_state&&(K.racc_state=t),K.racc_state.$push(K.$_racc_do_reduce(b,s)),!1},{$$s:n}),u(V))switch(V){case 1:return n.racc_user_yyerror=!0,ne["$-@"]();case 2:return Q;default:n.$raise("[Racc Bug] unknown jump code")}}else if(ee(s,Q))u(n.yydebug)&&n.$racc_accept(),n.$throw("racc_end_parse",n.racc_vstack["$[]"](0));else{if(ee(s,ne["$-@"]())){switch(n.racc_error_status){case 0:u(b["$[]"](21))||n.$on_error(n.racc_t,n.racc_val,n.racc_vstack);break;case 3:ee(n.racc_t,0)&&n.$throw("racc_end_parse",t),n.racc_read_next=!0}for(n.racc_user_yyerror=!1,n.racc_error_status=3;u(!0)&&!(u(re=F["$[]"](n.racc_state["$[]"](-1)))&&(re=W(re,1),u(j(re,0))&&u(s=y["$[]"](re))&&ee(A["$[]"](re),n.racc_state["$[]"](-1))));)u(J(n.racc_state.$size(),1))&&n.$throw("racc_end_parse",t),n.racc_state.$pop(),n.racc_vstack.$pop(),u(n.yydebug)&&(n.racc_tstack.$pop(),n.$racc_e_pop(n.racc_state,n.racc_tstack,n.racc_vstack));return s}n.$raise("[Racc Bug] unknown action "+s.$inspect())}return u(n.yydebug)&&n.$racc_next_state(n.racc_state["$[]"](-1),n.racc_state),t}),D(T,"$_racc_do_reduce",function(s,b){var i,ne,re,B,ae,ie,ue,n=this,A=t,k=t,F=t,Q=t,V=t,te=t,K=t,R=t,O=t,Z=t,se=t,$e=t,ce=t;return A=null==(i=z(s))[4]?t:i[4],k=null==i[5]?t:i[5],F=null==i[6]?t:i[6],Q=null==i[7]?t:i[7],ne=null==i[8]?t:i[8],V=null==i[9]?t:i[9],re=null==i[13]?t:i[13],te=n.racc_state,K=n.racc_vstack,R=n.racc_tstack,O=X(b,-3),Z=V["$[]"](O),B=V["$[]"](W(O,1)),ae=V["$[]"](W(O,2)),ie=[],u(n.yydebug)&&(se=R["$[]"](Z["$-@"](),Z)),$e=K["$[]"](Z["$-@"](),Z),u(n.yydebug)&&R["$[]="](Z["$-@"](),Z,ie),K["$[]="](Z["$-@"](),Z,ie),te["$[]="](Z["$-@"](),Z,ie),u(re)?K.$push(n.$__send__(ae,$e,K,$e["$[]"](0))):K.$push(n.$__send__(ae,$e,K)),R.$push(B),u(n.yydebug)&&n.$racc_reduce(se,B,R,K),ue=S(B,ne),u(O=Q["$[]"](ue))&&(O=W(O,te["$[]"](-1)),u(j(O,0))&&u(ce=A["$[]"](O))&&ee(k["$[]"](O),ue))?ce:F["$[]"](ue)}),D(T,"$on_error",function(s,b,i){var n,c=this;return c.$raise(U("ParseError"),c.$sprintf("\nparse error on value %s (%s)",b.$inspect(),u(n=c.$token_to_str(s))?n:"?"))}),D(T,"$yyerror",function(){return this.$throw("racc_jump",1)}),D(T,"$yyaccept",function(){return this.$throw("racc_jump",2)}),D(T,"$yyerrok",a("racc_error_status",0)),D(T,"$racc_read_token",function(s,b,i){var c=this;return c.racc_debug_out.$print("read    "),c.racc_debug_out.$print(b.$inspect(),"(",c.$racc_token2str(s),") "),c.racc_debug_out.$puts(i.$inspect()),c.racc_debug_out.$puts()}),D(T,"$racc_shift",function(s,b,i){var c=this;return c.racc_debug_out.$puts("shift   "+c.$racc_token2str(s)),c.$racc_print_stacks(b,i),c.racc_debug_out.$puts()}),D(T,"$racc_reduce",function(s,b,i,c){var n=this,y=t;return(y=n.racc_debug_out).$print("reduce "),u(s["$empty?"]())?y.$print(" <none>"):M(s,"each",[],function A(k){return null==k&&(k=t),y.$print(" ",(null==A.$$s?this:A.$$s).$racc_token2str(k))},{$$s:n}),y.$puts(" --\x3e "+n.$racc_token2str(b)),n.$racc_print_stacks(i,c),n.racc_debug_out.$puts()}),D(T,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),D(T,"$racc_e_pop",function(s,b,i){var c=this;return c.racc_debug_out.$puts("error recovering mode: pop token"),c.$racc_print_states(s),c.$racc_print_stacks(b,i),c.racc_debug_out.$puts()}),D(T,"$racc_next_state",function(s,b){var i=this;return i.racc_debug_out.$puts("goto    "+s),i.$racc_print_states(b),i.racc_debug_out.$puts()}),D(T,"$racc_print_stacks",function(s,b){var c=t;return(c=this.racc_debug_out).$print("        ["),M(s,"each_index",[],function n(y){return null==y&&(y=t),c.$print(" (",(null==n.$$s?this:n.$$s).$racc_token2str(s["$[]"](y))," ",b["$[]"](y).$inspect(),")")},{$$s:this}),c.$puts(" ]")}),D(T,"$racc_print_states",function(s){var i=t;return(i=this.racc_debug_out).$print("        ["),M(s,"each",[],function(n){return null==n&&(n=t),i.$print(" ",n)}),i.$puts(" ]")}),D(T,"$racc_token2str",function(s){var i;return u(i=r(this.$class(),"Racc_token_to_s_table")["$[]"](s))?i:this.$raise("[Racc Bug] can't convert token "+s+" to string")}),D(T,"$token_to_str",function(s){return r(this.$class(),"Racc_token_to_s_table")["$[]"](s)})}($[0],$)},Opal.modules["bcdice/arithmetic/node"]=function(e){var a,t,q,l,T,v,C,_,$,Y=e.module,G=e.klass,u=e.def,N=e.thrower,L=e.return_ivar,g=e.send2,h=e.find_super,D=e.eqeq,z=e.const_set,M=e.eqeqeq,w=e.rb_divide,W=e.truthy,ee=e.assign_ivar,j=e.alias,P=[],S=e.nil,J=e.$$$;return a=P,t=$=[Y(P[0],"BCDice")].concat(a),q=_=[Y($[0],"Arithmetic")].concat(t),v=[Y(_[0],"Node")].concat(q),C=e.$r(v),(T=(l=G(v[0],null,"BinaryOp")).$$prototype).lhs=T.rhs=T.op=S,u(l,"$initialize",function(U,I,f){var s=this;return s.lhs=U,s.op=I,s.rhs=f}),u(l,"$eval",function(U){try{N("eval_return");var b,f=this,s=S;return s=f.lhs.$eval(U),b=f.rhs.$eval(U),s.$send(f.op,b)}catch(i){if(i===e.t_eval_return)return i.$v;throw i}}),u(l,"$output",function(){var U=this;return""+U.lhs.$output()+U.op+U.rhs.$output()}),u(l,"$s_exp",function(){var U=this;return"("+U.$op_for_s_exp()+" "+U.lhs.$s_exp()+" "+U.rhs.$s_exp()+")"}),u(l,"$op_for_s_exp",L("op")),function(m,p,l){var T=G(m,p,"DivideBase"),o=[T].concat(l),U=e.$r(o),I=T.$$prototype;I.lhs=I.rhs=I.op=S,u(T,"$initialize",function f(s,b){return f.$$p=null,g(this,h(this,"initialize",f,!1,!0),"initialize",[s,"/",b],null)}),u(T,"$eval",function(s){try{N("eval_return");var c,n,i=this;return c=i.lhs.$eval(s),n=i.rhs.$eval(s),D(n,0)&&i.$raise(U("ZeroDivisionError")),i.$divide_and_round(c,n,s)}catch(y){if(y===e.t_eval_return)return y.$v;throw y}}),u(T,"$output",function f(){var s=f.$$p||S,b=this;return f.$$p=null,""+g(b,h(b,"output",f,!1,!0),"output",[],s)+b.$rounding_method()}),T.$private(),u(T,"$rounding_method",function(){return J(this.$class(),"ROUNDING_METHOD")}),u(T,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),u(T,"$divide_and_round",function(s,b,i){return this.$raise(U("NotImplementedError"))})}(v[0],C("BinaryOp"),v),function(m,p,l){var T=G(m,p,"DivideWithGameSystemDefault"),o=[T].concat(l),U=e.$r(o);z(o[0],"ROUNDING_METHOD",""),T.$private(),u(T,"$divide_and_round",function(f,s,b){var i,c=S;return M(J(U("RoundType"),"CEIL"),i=b)?w(f.$to_f(),s).$ceil():M(J(U("RoundType"),"ROUND"),i)?(c=w(f.$to_f(),s),W(c["$negative?"]())?c.$abs().$round()["$-@"]():c.$round()):w(f,s).$floor()})}(v[0],C("DivideBase"),v),function(m,p,l){var T=G(m,p,"DivideWithCeil"),o=[T].concat(l);z(o[0],"ROUNDING_METHOD","C"),T.$private(),u(T,"$divide_and_round",function(I,f,s){return w(I.$to_f(),f).$ceil()})}(v[0],C("DivideBase"),v),function(m,p,l){var T=G(m,p,"DivideWithRound"),o=[T].concat(l);z(o[0],"ROUNDING_METHOD","R"),T.$private(),u(T,"$divide_and_round",function(I,f,s){var b=S;return b=w(I.$to_f(),f),W(b["$negative?"]())?b.$abs().$round()["$-@"]():b.$round()})}(v[0],C("DivideBase"),v),function(m,p,l){var T=G(m,p,"DivideWithFloor"),o=[T].concat(l);z(o[0],"ROUNDING_METHOD","F"),T.$private(),u(T,"$divide_and_round",function(I,f,s){return w(I,f).$floor()})}(v[0],C("DivideBase"),v),function(m,p){var l=G(m,null,"Negative");l.$$prototype.body=S,u(l,"$initialize",ee("body")),u(l,"$eval",function(U){try{return N("eval_return"),this.body.$eval(U)["$-@"]()}catch(s){if(s===e.t_eval_return)return s.$v;throw s}}),u(l,"$output",function(){return"-"+this.body.$output()}),u(l,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(v[0]),function(m,p){var l=G(m,null,"Parenthesis");l.$$prototype.expr=S,u(l,"$initialize",ee("expr")),u(l,"$eval",function(U){try{return N("eval_return"),this.expr.$eval(U)}catch(s){if(s===e.t_eval_return)return s.$v;throw s}}),u(l,"$output",function(){return"("+this.expr.$output()+")"}),u(l,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(v[0]),function(m,p){var l=G(m,null,"Number");return l.$$prototype.value=S,u(l,"$initialize",ee("value")),u(l,"$eval",L("value")),u(l,"$output",function(){return this.value.$to_s()}),j(l,"s_exp","output")}(v[0])},Opal.modules.strscan=function(e){var ee,j,P,S,J,G=e.def,u=e.truthy,N=e.eqeqeq,L=e.Opal,g=e.return_ivar,h=e.send,D=e.alias,z=[],M=e.nil;return ee=z,P=[j=(0,e.klass)(z[0],null,"StringScanner")].concat(ee),S=e.$r(P),(J=j.$$prototype).pos=J.string=J.working=J.matched=J.prev_pos=J.match=M,j.$attr_reader("pos","matched"),G(j,"$initialize",function(a){var d=this;return d.string=a,d.pos=0,d.matched=M,d.working=a,d.match=[]}),j.$attr_reader("string"),G(j,"$beginning_of_line?",function(){var a=this;return 0===a.pos||"\n"===a.string.charAt(a.pos-1)}),G(j,"$scan",function(a){var d=this,$=(a=d.$anchor(a)).exec(d.working);return null==$?d.matched=M:(d.prev_pos=d.pos,d.pos+=$[0].length,d.working=d.working.substring($[0].length),d.matched=$[0],d.match=$,$[0])}),G(j,"$scan_until",function(a){var d=this;a=d.$anchor(a);for(var $=d.working,E=0;$.length!=E;++E){var t=a.exec($.substr(E));if(null!==t){var r=E+t[0].length,_=$.substr(0,r);return d.matched=t[0],d.match=t,d.prev_pos=d.pos+E,d.pos+=r,d.working=$.substr(r),_}}return d.matched=M}),G(j,"$[]",function(a){var $;if(u(this.match["$empty?"]()))return M;N(S("Symbol"),$=a)?a=a.$to_s():N(S("String"),$)||(a=L["$coerce_to!"](a,S("Integer"),"to_int"));var E=this.match;return a<0&&(a+=E.length),a<0||a>=E.length||null==E[a]?M:E[a]}),G(j,"$check",function(a){var d=this,$=(a=d.$anchor(a)).exec(d.working);return d.matched=null==$?M:$[0]}),G(j,"$check_until",function(a){var d=this,$=d.prev_pos,E=d.pos,t=d.working,r=d.$scan_until(a);return d.prev_pos=$,d.pos=E,d.working=t,r}),G(j,"$peek",function(a){return this.working.substring(0,a)}),G(j,"$eos?",function(){return 0===this.working.length}),G(j,"$exist?",function(a){var $=a.exec(this.working);return null==$?M:0==$.index?0:$.index+1}),G(j,"$skip",function(a){var d=this,$=(a=d.$anchor(a)).exec(d.working);if(null==$)return d.match=[],d.matched=M;var E=$[0],t=E.length;return d.matched=E,d.match=$,d.prev_pos=d.pos,d.pos+=t,d.working=d.working.substring(t),t}),G(j,"$skip_until",function(a){var $=this.$scan_until(a);return $===M?M:(this.matched=$.substr(-1),$.length)}),G(j,"$get_byte",function(){var a=this,d=M;return a.pos<a.string.length?(a.prev_pos=a.pos,a.pos+=1,d=a.matched=a.working.substring(0,1),a.working=a.working.substring(1)):a.matched=M,d}),G(j,"$match?",function(a){var d=this,$=(a=d.$anchor(a)).exec(d.working);return null==$?M:(d.prev_pos=d.pos,$[0].length)}),G(j,"$pos=",function(a){var d=this;return a<0&&(a+=d.string.$length()),d.pos=a,d.working=d.string.slice(a)}),G(j,"$matched_size",function(){return this.matched===M?M:this.matched.length}),G(j,"$post_match",function(){var a=this;return a.matched===M?M:a.string.substr(a.pos)}),G(j,"$pre_match",function(){var a=this;return a.matched===M?M:a.string.substr(0,a.prev_pos)}),G(j,"$reset",function(){var a=this;return a.working=a.string,a.matched=M,a.pos=0}),G(j,"$rest",g("working")),G(j,"$rest?",function(){return 0!==this.working.length}),G(j,"$rest_size",function(){return this.$rest().$size()}),G(j,"$terminate",function(){var a,d=this;return d.match=M,a=[d.string.$length()],h(d,"pos=",a),a[a.length-1]}),G(j,"$unscan",function(){var a=this;return a.pos=a.prev_pos,a.prev_pos=M,a.match=M,a}),D(j,"bol?","beginning_of_line?"),D(j,"getch","get_byte"),j.$private(),G(j,"$anchor",function(a){var d=a.toString().match(/\/([^\/]+)$/);return d=d?d[1]:void 0,new RegExp("^(?:"+a.source+")",d)})},Opal.modules["bcdice/normalize"]=function(e){var D,W,M,Y=e.module,G=e.eqeqeq,u=e.def,N=e.eqeq,L=[],g=e.nil;return D=L,M=[Y(L[0],"BCDice")].concat(D),(W=Y(M[0],"Normalize")).$module_function(),u(W,"$comparison_operator",function(j){var P;return G(/<=|=</,P=j)?"<=":G(/>=|=>/,P)?">=":G(/<>|!=|=!/,P)?"!=":G(/</,P)?"<":G(/>/,P)?">":G(/=/,P)?"==":g}),u(W,"$target_number",function(j){return N(j,"?")?j:j.$to_i()})},Opal.modules["bcdice/command/lexer"]=function(e){var ee,J,E,t,r,_,H,a,P,Y=e.module,G=e.klass,u=e.const_set,N=e.hash2,L=e.truthy,g=e.send,h=e.def,D=e.thrower,z=e.top,M=[],w=e.nil;return z.$require("strscan"),z.$require("bcdice/normalize"),ee=M,J=P=[Y(M[0],"BCDice")].concat(ee),E=a=[Y(P[0],"Command")].concat(J),r=[t=G(a[0],null,"Lexer")].concat(E),_=e.$r(r),(H=t.$$prototype).scanner=H.notations=w,u(r[0],"SYMBOLS",N(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),h(t,"$initialize",function(x,v){var C,m,l;return x=L(l=(C=(m=x)===w||null==m?w:m.$split(" ",2))===w||null==C?w:C.$first())?l:"",this.scanner=_("StringScanner").$new(x),this.notations=g(v,"map",[],function(o){return null==o&&(o=w),L(o["$is_a?"](_("String")))?_("Regexp").$new(o):o})}),h(t,"$next_token",function(){try{var x=D("return"),v=this,C=w,m=w,l=w,T=w;return L(v.scanner["$eos?"]())?[!1,"$"]:(g(v.notations,"each",[],function o(U){var f,I=null==o.$$s?this:o.$$s;if(null==I.scanner&&(I.scanner=w),null==U&&(U=w),f=I.scanner.$scan(U),!L(f))return w;x.$throw(["NOTATION",f])},{$$s:v,$$ret:x}),L(C=v.scanner.$scan(/\d+/))?["NUMBER",C.$to_i()]:L(m=v.scanner.$scan(/[<>!=]+/))?(m=_("Normalize").$comparison_operator(m),[L(m)?"CMP_OP":"ILLEGAL",m]):(l=v.scanner.$getch().$upcase(),[L(T=_("SYMBOLS")["$[]"](l))?T:l.$to_sym(),l]))}catch(o){if(o===x)return o.$v;throw o}}),h(t,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function(e){var z,ee,X,a,d,$,E,P,w,Y=e.module,G=e.klass,u=e.def,N=e.return_ivar,L=e.truthy,g=[],h=e.nil;return z=g,ee=w=[Y(g[0],"BCDice")].concat(z),X=P=[Y(w[0],"Command")].concat(ee),d=[a=G(P[0],null,"Parsed")].concat(X),$=e.$r(d),(E=a.$$prototype).critical=E.fumble=E.dollar=E.modify_number=E.question_target=E.target_number=E.prefix_number=E.command=E.suffix_number=E.cmp_op=h,a.$attr_accessor("command"),a.$attr_accessor("prefix_number"),a.$attr_accessor("suffix_number"),a.$attr_accessor("critical"),a.$attr_accessor("fumble"),a.$attr_accessor("dollar"),a.$attr_accessor("modify_number"),a.$attr_accessor("cmp_op"),a.$attr_accessor("target_number"),a.$attr_writer("question_target"),u(a,"$initialize",function(){var r=this;return r.prefix_number=h,r.suffix_number=h,r.critical=h,r.fumble=h,r.dollar=h,r.cmp_op=h,r.target_number=h,r.question_target=!1}),u(a,"$question_target?",N("question_target")),u(a,"$to_s",function(r){var _=this,H=h,q=h,x=h,v=h,C=h;switch(null==r&&(r="after_command"),H=L(_.critical)?"@"+_.critical:h,q=L(_.fumble)?"#"+_.fumble:h,x=L(_.dollar)?"$"+_.dollar:h,v=$("Format").$modifier(_.modify_number),C=L(_.question_target)?"?":_.target_number,r){case"after_command":return[_.prefix_number,_.command,_.suffix_number,H,q,x,v,_.cmp_op,C].$join();case"after_modify_number":return[_.prefix_number,_.command,_.suffix_number,v,H,q,x,_.cmp_op,C].$join();case"after_target_number":return[_.prefix_number,_.command,_.suffix_number,v,_.cmp_op,C,H,q,x].$join();default:return h}},-1)},Opal.modules["bcdice/command/parser"]=function(e){var r,x,T,f,s,b,i,c,n,y,A,k,ne,o,U,I,te,C,m,H,Y=e.klass,G=e.module,u=e.slice,N=e.extract_kwargs,L=e.ensure_kwargs,g=e.get_kwarg,h=e.send2,D=e.find_super,z=e.def,M=e.send,w=e.eqeq,W=e.thrower,ee=e.hash,j=e.const_set,P=e.truthy,S=e.to_ary,J=e.hash2,X=e.top,a=[],d=e.$r(a),$=e.nil,E=e.$$$;return X.$require("racc/parser.rb"),X.$require("bcdice/arithmetic/node"),X.$require("bcdice/command/lexer"),X.$require("bcdice/command/parsed"),Y(E(d("BCDice"),"Command"),E(d("Racc"),"Parser"),"Parser"),r=a,x=H=[G(a[0],"BCDice")].concat(r),C=[G(H[0],"Command")].concat(x),m=e.$r(C),T=C,U=[o=Y(C[0],E(m("Racc"),"Parser"),"Parser")].concat(T),I=e.$r(U),(te=o.$$prototype).notations=te.lexer=te.modifier=te.suffix_number=te.prefix_number=te.need_suffix_number=te.need_prefix_number=te.critical=te.fumble=te.dollar=te.allowed_cmp_op=te.question_target=$,z(o,"$initialize",function K(R,O){var Z,B,ae,ie,$e=this;return K.$$p=null,Z=u(arguments),B=N(Z),B=L(B),ae=Z,ie=g(B,"round_type"),h($e,D($e,"initialize",K,!1,!0),"initialize",[],null),$e.notations=ae,$e.round_type=ie,$e.prefix_number=!1,$e.suffix_number=!1,$e.need_prefix_number=!1,$e.need_suffix_number=!1,$e.modifier=!0,$e.critical=!1,$e.fumble=!1,$e.dollar=!1,$e.allowed_cmp_op=[$,">=",">","<=","<","==","!="],$e.question_target=!1},-2),z(o,"$disable_modifier",function(){return this.modifier=!1,this}),z(o,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),z(o,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),z(o,"$has_prefix_number",function(){var R=this;return R.prefix_number=!0,R.need_prefix_number=!0,R}),z(o,"$has_suffix_number",function(){var R=this;return R.suffix_number=!0,R.need_suffix_number=!0,R}),z(o,"$enable_critical",function(){return this.critical=!0,this}),z(o,"$enable_fumble",function(){return this.fumble=!0,this}),z(o,"$enable_dollar",function(){return this.dollar=!0,this}),z(o,"$restrict_cmp_op_to",function(R){var O,B=this;return O=u(arguments),B.allowed_cmp_op=O,B},-1),z(o,"$enable_question_target",function(){return this.question_target=!0,this}),z(o,"$parse",function(R){var O=this;try{return O.lexer=I("Lexer").$new(R,O.notations),O.$do_parse()}catch(Z){if(!e.rescue(Z,[I("ParseError"),I("ZeroDivisionError")]))throw Z;try{return $}finally{e.pop_exception()}}}),o.$private(),z(o,"$parsed",function(R,O,Z,B){try{return W("eval_return"),M(I("Parsed").$new(),"tap",[],function se($e){var ue,ce,oe,fe,de,_e,ve,le=null==se.$$s?this:se.$$s;return null==le.round_type&&(le.round_type=$),null==$e&&($e=$),$e["$command="](R["$[]"]("command")),$e["$prefix_number="]((ue=R["$[]"]("prefix"))===$||null==ue?$:ue.$eval(le.round_type)),$e["$suffix_number="]((ce=R["$[]"]("suffix"))===$||null==ce?$:ce.$eval(le.round_type)),$e["$critical="]((oe=O["$[]"]("critical"))===$||null==oe?$:oe.$eval(le.round_type)),$e["$fumble="]((fe=O["$[]"]("fumble"))===$||null==fe?$:fe.$eval(le.round_type)),$e["$dollar="]((de=O["$[]"]("dollar"))===$||null==de?$:de.$eval(le.round_type)),$e["$modify_number="](Z.$eval(le.round_type)),$e["$cmp_op="](B["$[]"]("cmp_op")),w(B["$[]"]("target"),"?")?($e["$question_target="](!0),M($e,"target_number=",_e=[0]),_e[_e.length-1]):($e["$question_target="](!1),_e=[(ve=B["$[]"]("target"),ve===$||null==ve?$:ve.$eval(le.round_type))],M($e,"target_number=",_e),_e[_e.length-1])},{$$s:this})}catch(se){if(se===e.t_eval_return)return se.$v;throw se}}),z(o,"$next_token",function(){return this.lexer.$next_token()}),f=e.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),s=e.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),b=e.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),i=e.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),c=e.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),n=e.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),y=[$,6,13,3,9,-1,27,-15,-10,-1,-38],A=[$,$,$,$,$,$,19,16,15,$,$],k=e.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),ne=ee(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),j(U[0],"Racc_arg",[f,s,i,b,c,n,A,y,19,k,ne,58,35,!0]),j(U[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),j(U[0],"Racc_debug_parser",!1),z(o,"$_reduce_1",function(R,O,Z){var B;return P(this.modifier)||this.$raise(I("ParseError")),B=S(R),this.$parsed(null==B[0]?$:B[0],null==B[1]?$:B[1],null==B[2]?$:B[2],null==B[3]?$:B[3])}),z(o,"$_reduce_2",function(R,O,Z){var B;return P(this.modifier)||this.$raise(I("ParseError")),B=S(R),this.$parsed(null==B[0]?$:B[0],null==B[2]?$:B[2],null==B[1]?$:B[1],null==B[3]?$:B[3])}),z(o,"$_reduce_3",function(R,O,Z){var B,ue;return ue=null==(B=S(R))[2]?$:B[2],this.$parsed(null==B[0]?$:B[0],null==B[1]?$:B[1],E(E(I("Arithmetic"),"Node"),"Number").$new(0),ue)}),z(o,"$_reduce_4",function(R,O,Z){var B=this;return P(B.prefix_number)&&P(B.suffix_number)||B.$raise(I("ParseError")),J(["command","prefix","suffix"],{command:R["$[]"](1),prefix:R["$[]"](0),suffix:R["$[]"](2)})}),z(o,"$_reduce_5",function(R,O,Z){var B=this;return P(B.prefix_number)||B.$raise(I("ParseError")),P(B.need_suffix_number)&&B.$raise(I("ParseError")),J(["command","prefix"],{command:R["$[]"](1),prefix:R["$[]"](0)})}),z(o,"$_reduce_6",function(R,O,Z){var B=this;return P(B.suffix_number)||B.$raise(I("ParseError")),P(B.need_prefix_number)&&B.$raise(I("ParseError")),J(["command","suffix"],{command:R["$[]"](0),suffix:R["$[]"](1)})}),z(o,"$_reduce_7",function(R,O,Z){var B=this;return(P(B.need_prefix_number)||P(B.need_suffix_number))&&B.$raise(I("ParseError")),J(["command"],{command:R["$[]"](0)})}),z(o,"$_reduce_8",function(R,O,Z){return J([],{})}),z(o,"$_reduce_9",function(R,O,Z){var B,ue,se=$;return se=null==(B=S(R))[0]?$:B[0],ue=null==B[2]?$:B[2],P(this.critical)&&P(se["$[]"]("critical")["$nil?"]())||this.$raise(I("ParseError")),se["$[]="]("critical",ue),se}),z(o,"$_reduce_10",function(R,O,Z){var B,ue,se=$;return se=null==(B=S(R))[0]?$:B[0],ue=null==B[2]?$:B[2],P(this.fumble)&&P(se["$[]"]("fumble")["$nil?"]())||this.$raise(I("ParseError")),se["$[]="]("fumble",ue),se}),z(o,"$_reduce_11",function(R,O,Z){var B,ue,se=$;return se=null==(B=S(R))[0]?$:B[0],ue=null==B[2]?$:B[2],P(this.dollar)&&P(se["$[]"]("dollar")["$nil?"]())||this.$raise(I("ParseError")),se["$[]="]("dollar",ue),se}),z(o,"$_reduce_12",function(R,O,Z){return R["$[]"](1)}),z(o,"$_reduce_13",function(R,O,Z){return E(E(I("Arithmetic"),"Node"),"Negative").$new(R["$[]"](1))}),z(o,"$_reduce_14",function(R,O,Z){return E(E(I("Arithmetic"),"Node"),"BinaryOp").$new(R["$[]"](0),"+",R["$[]"](2))}),z(o,"$_reduce_15",function(R,O,Z){return E(E(I("Arithmetic"),"Node"),"BinaryOp").$new(R["$[]"](0),"-",R["$[]"](2))}),z(o,"$_reduce_16",function(R,O,Z){return P(this.allowed_cmp_op["$include?"]($))||this.$raise(I("ParseError")),J([],{})}),z(o,"$_reduce_17",function(R,O,Z){var B,se,$e;return $e=null==(B=S(R))[1]?$:B[1],P(this.allowed_cmp_op["$include?"](se=null==B[0]?$:B[0]))||this.$raise(I("ParseError")),J(["cmp_op","target"],{cmp_op:se,target:$e})}),z(o,"$_reduce_18",function(R,O,Z){var ae,B=this;return ae=R["$[]"](0),P(B.question_target)||B.$raise(I("ParseError")),P(B.allowed_cmp_op["$include?"](ae))||B.$raise(I("ParseError")),J(["cmp_op","target"],{cmp_op:ae,target:"?"})}),z(o,"$_reduce_19",function(R,O,Z){return E(E(I("Arithmetic"),"Node"),"BinaryOp").$new(R["$[]"](0),"+",R["$[]"](2))}),z(o,"$_reduce_20",function(R,O,Z){return E(E(I("Arithmetic"),"Node"),"BinaryOp").$new(R["$[]"](0),"-",R["$[]"](2))}),z(o,"$_reduce_22",function(R,O,Z){return E(E(I("Arithmetic"),"Node"),"BinaryOp").$new(R["$[]"](0),"*",R["$[]"](2))}),z(o,"$_reduce_23",function(R,O,Z){return R["$[]"](3).$new(R["$[]"](0),R["$[]"](2))}),z(o,"$_reduce_25",function(R,O,Z){return E(E(I("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),z(o,"$_reduce_26",function(R,O,Z){return E(E(I("Arithmetic"),"Node"),"DivideWithCeil")}),z(o,"$_reduce_27",function(R,O,Z){return E(E(I("Arithmetic"),"Node"),"DivideWithCeil")}),z(o,"$_reduce_28",function(R,O,Z){return E(E(I("Arithmetic"),"Node"),"DivideWithRound")}),z(o,"$_reduce_29",function(R,O,Z){return E(E(I("Arithmetic"),"Node"),"DivideWithFloor")}),z(o,"$_reduce_30",function(R,O,Z){return R["$[]"](1)}),z(o,"$_reduce_31",function(R,O,Z){return E(E(I("Arithmetic"),"Node"),"Negative").$new(R["$[]"](1))}),z(o,"$_reduce_33",function(R,O,Z){return R["$[]"](1)}),z(o,"$_reduce_34",function(R,O,Z){return E(E(I("Arithmetic"),"Node"),"Number").$new(R["$[]"](0))}),z(o,"$_reduce_none",function(R,O,Z){return R["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function(e){var M,j,X,a,d,$,S,W,Y=e.module,G=e.send,u=e.eqeqeq,N=e.truthy,L=e.def,g=e.return_val,h=[],D=e.nil;return M=h,j=W=[Y(h[0],"BCDice")].concat(M),X=S=[Y(W[0],"Deprecated")].concat(j),d=[a=Y(S[0],"Checker")].concat(X),$=e.$r(d),a.$private(),L(a,"$check_result_legacy",function(t,r,_,H){var C,q=this,x=D,v=D,m=D,p=D;return x=G(r,"map",[],"sides".$to_proc()),C=(v=G(r,"map",[],"value".$to_proc())).$sum(),m=u([100],p=x)?q.$check_1D100(t,C,_,H):u([20],p)?q.$check_1D20(t,C,_,H):u([6,6],p)?q.$check_2D6(t,C,v,_,H):D,(N(m["$nil?"]())||N(m["$empty?"]()))&&(m=u([10],p=x.$uniq())?q.$check_nD10(t,C,v,_,H):u([6],p)?q.$check_nD6(t,C,v,_,H):D,N(m["$nil?"]())||N(m["$empty?"]()))?D:$("Result").$new(m.$delete_prefix(" \uff1e "))}),L(a,"$check_1D100",g(D)),L(a,"$check_1D20",g(D)),L(a,"$check_nD10",g(D)),L(a,"$check_2D6",g(D)),L(a,"$check_nD6",g(D))},Opal.modules["bcdice/base"]=function(e){var d,q,p,I,s,b,l,T,o,U,v,Y=e.module,G=e.klass,u=e.slice,N=e.rb_plus,L=e.truthy,g=e.def,h=e.regexp,D=e.send,z=e.thrower,M=e.return_ivar,w=e.assign_ivar_val,W=e.eqeqeq,ee=e.eqeq,j=e.return_val,P=e.range,S=e.rb_minus,J=e.rb_divide,X=e.rb_times,a=e.rb_ge,$=e.top,E=[],t=e.$r(E),r=e.nil,_=e.$$$;return $.$require("i18n"),$.$require("i18n/backend/fallbacks"),$.$require("bcdice/randomizer"),$.$require("bcdice/dice_table"),$.$require("bcdice/enum"),$.$require("bcdice/translate"),$.$require("bcdice/result"),$.$require("bcdice/command/parser"),$.$require("bcdice/deprecated/checker"),q=E,p=v=[Y(E[0],"BCDice")].concat(q),T=[l=G(v[0],null,"Base")].concat(p),o=e.$r(T),(U=l.$$prototype).raw_input=U.randomizer=U.enabled_upcase_input=U.debug=r,s=[I=e.get_singleton_class(l)].concat(T),b=e.$r(s),I.$attr_reader("prefixes"),g(I,"$register_prefix",function(c){var y,A=this,k=r;return null==A.prefixes&&(A.prefixes=r),y=u(arguments),A.prefixes=N(L(k=A.prefixes)?k:[],y.$flatten())},-1),g(I,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),g(I,"$prefixes_pattern",function(){var c=this,n=r;return null==c.prefixes_pattern&&(c.prefixes_pattern=r),null==c.prefixes&&(c.prefixes=r),c.prefixes_pattern=L(n=c.prefixes_pattern)?n:r,L(c.prefixes_pattern)?c.prefixes_pattern:(c.prefixes=L(n=c.prefixes)?n:[],c.prefixes.$freeze(),c.prefixes_pattern=(L(c.prefixes["$empty?"]())?/(?!)/:h(["^(S)?(",c.prefixes.$join("|"),")"],"i")).$freeze())}),g(I,"$command_pattern",function(){var c=this,n=r,y=r;return null==c.command_pattern&&(c.command_pattern=r),null==c.prefixes&&(c.prefixes=r),c.command_pattern=L(n=c.command_pattern)?n:r,L(c.command_pattern)?c.command_pattern:(c.prefixes=L(n=c.prefixes)?n:[],c.prefixes.$freeze(),y=N(D(_(b("CommonCommand"),"COMMANDS"),"map",[],function(k){return null==k&&(k=r),_(k,"PREFIX_PATTERN").$source()}),c.prefixes),c.command_pattern=h(["^S?(",y.$join("|"),")"],"i").$freeze())}),g(I,"$eval",function(c){try{return z("eval_return"),this.$new(c).$eval()}catch(A){if(A===e.t_eval_return)return A.$v;throw A}}),l.$include(o("Translate")),l.$include(_(o("Deprecated"),"Checker")),g(l,"$initialize",function(f){var s=this;return s.raw_input=f,s.sort_add_dice=!1,s.sort_barabara_dice=!1,s.d66_sort_type=_(o("D66SortType"),"NO_SORT"),s.enabled_d9=!1,s.round_type=_(o("RoundType"),"FLOOR"),s.sides_implicit_d=6,s.upper_dice_reroll_threshold=r,s.reroll_dice_reroll_threshold=r,s.default_cmp_op=r,s.default_target_number=r,s.enabled_upcase_input=!0,s.locale="ja_jp",s.randomizer=_(o("BCDice"),"Randomizer").$new(),s.debug=!1}),l.$attr_accessor("randomizer"),l.$attr_reader("d66_sort_type"),l.$attr_reader("round_type"),l.$attr_reader("sides_implicit_d"),l.$attr_reader("upper_dice_reroll_threshold"),l.$attr_reader("reroll_dice_reroll_threshold"),l.$attr_reader("default_cmp_op"),l.$attr_reader("default_target_number"),g(l,"$sort_add_dice?",M("sort_add_dice")),g(l,"$sort_barabara_dice?",M("sort_barabara_dice")),g(l,"$enabled_d9?",M("enabled_d9")),g(l,"$enable_debug",w("debug",!0)),g(l,"$eval",function(){var s,i,f=this,b=r;return s=_(o("BCDice"),"Preprocessor").$process(f.raw_input,f),b=L(i=f.$dice_command(s))?i:f.$eval_common_command(f.raw_input),L(b)?(b["$rands="](f.randomizer.$rand_results()),b["$detailed_rands="](f.randomizer.$detailed_rand_results()),b):r}),g(l,"$change_text",function(f){return f}),g(l,"$check_result",function(f,s,b,i){var c=this,n=r,y=r,A=r,k=r,F=r;return n=c.$check_result_legacy(f,s,b,i),L(n)?n:(y=D(s,"map",[],"sides".$to_proc()),k=(A=D(s,"map",[],"value".$to_proc())).$sum(),n=W([100],F=y)?c.$result_1d100(f,k,b,i):W([20],F)?c.$result_1d20(f,k,b,i):W([6,6],F)?c.$result_2d6(f,k,A,b,i):r,ee(n,o("Result").$nothing())?r:L(n)?n:(n=W([10],F=y.$uniq())?c.$result_nd10(f,k,A,b,i):W([6],F)?c.$result_nd6(f,k,A,b,i):r,ee(n,o("Result").$nothing())?r:L(n)?n:c.$result_ndx(f,b,i)))}),g(l,"$grich_text",j(r)),l.$private(),g(l,"$eval_common_command",function(f){try{z("eval_return");var b=z("return");return f=this.$change_text(f),D(_(o("CommonCommand"),"COMMANDS"),"each",[],function c(n){var A,y=null==c.$$s?this:c.$$s;if(null==y.randomizer&&(y.randomizer=r),null==n&&(n=r),A=n.$eval(f,y,y.randomizer),!L(A))return r;b.$throw(A)},{$$s:this,$$ret:b}),r}catch(c){if(c===e.t_eval_return||c===b)return c.$v;throw c}}),g(l,"$dice_command",function(f){var s=this,b=r,i=r,c=r,n=r;return L(s.enabled_upcase_input)&&(f=f.$upcase()),b=s.$class().$prefixes_pattern().$match(f),L(b)?(i=b["$[]"](1)["$nil?"]()["$!"](),L(i)&&(f=f["$[]"](P(1,-1,!1))),c=s.$eval_game_system_specific_command(f),L(c["$is_a?"](o("Result")))?(c["$secret="](L(n=c["$secret?"]())?n:i),c):L(c["$nil?"]())||L(c["$empty?"]())||ee(c,"1")?r:D(o("Result").$new(),"tap",[],function(A){var k;return null==A&&(A=r),A["$text="](c.$to_s()),D(A,"secret=",k=[i]),k[k.length-1]})):r}),g(l,"$eval_game_system_specific_command",j(r)),g(l,"$result_ndx",function(f,s,b){return L(b["$is_a?"](o("String")))?r:L(f.$send(s,b))?o("Result").$success(this.$translate("success")):o("Result").$failure(this.$translate("failure"))}),g(l,"$result_1d100",j(r)),g(l,"$result_1d20",j(r)),g(l,"$result_nd10",j(r)),g(l,"$result_2d6",j(r)),g(l,"$result_nd6",j(r)),g(l,"$get_table_by_2d6",function(f){return this.$get_table_by_nD6(f,2)}),g(l,"$get_table_by_1d6",function(f){return this.$get_table_by_nD6(f,1)}),g(l,"$get_table_by_nD6",function(f,s){return this.$get_table_by_nDx(f,s,6)}),g(l,"$get_table_by_nDx",function(f,s,b){var c,n=r;return c=this.randomizer.$roll_sum(s,b),n=this.$get_table_value(f["$[]"](S(c,s))),L(n["$nil?"]())?["1",0]:[n,c]}),g(l,"$get_table_by_1d3",function(f){var i,c,s=this,n=r;return s.$debug("get_table_by_1d3"),i=s.randomizer.$roll_sum(1,6),s.$debug("num",i),c=J(S(i,1),2).$to_i(),s.$debug("index",c),n=f["$[]"](c),L(n["$nil?"]())?["1",0]:[n,i]}),g(l,"$get_table_by_d66_swap",function(f){var b;return b=this.randomizer.$roll_d66(_(o("D66SortType"),"ASC")),[this.$get_table_by_number(b,f),b]}),g(l,"$get_table_by_d66",function(f){var b,i,c,y,n=r;return b=this.randomizer.$roll_once(6),i=this.randomizer.$roll_once(6),c=N(X(S(b,1),6),S(i,1)),n=f["$[]"](c),y=""+b+i,L(n["$nil?"]())?["1",y]:[n,y]}),g(l,"$get_table_by_number",function(f,s,b){try{var i=z("return");return null==b&&(b="1"),D(s,"each",[],function n(y){var k,A=null==n.$$s?this:n.$$s;if(null==y&&(y=r),k=y["$[]"](0),!L(a(k,f)))return r;i.$throw(A.$get_table_value(y["$[]"](1)))},{$$s:this,$$ret:i}),this.$get_table_value(b)}catch(n){if(n===i)return n.$v;throw n}},-3),g(l,"$get_table_value",function(f){return L(f["$is_a?"](o("Proc")))?f.$call():f}),g(l,"$roll_tables",function(f,s){var i=r;return i=s["$[]"](f),L(i)?i.$roll(this.randomizer).$to_s():r}),g(l,"$debug",function(f,s){var i,c=this,n=r,y=r;return i=u(arguments,1),L(c.debug)?(n=L(f["$is_a?"](o("String")))?f:f.$inspect(),L(i["$empty?"]())?c.$warn(n):(y=D(i,"map",[],function(k){return null==k&&(k=r),L(k["$is_a?"](o("String")))?'"'+k+'"':k.$inspect()}),c.$warn(n+": "+y.$join(", ")))):r},-2),_(_(t("I18n"),"Backend"),"Simple").$include(_(_(t("I18n"),"Backend"),"Fallbacks")),t("I18n").$load_path()["$<<"](t("Dir")["$[]"](t("File").$join("bcdice","../../i18n/**/*.yml"))),t("I18n")["$default_locale="]("ja_jp"),d=[["ja_jp"]],D(t("I18n").$fallbacks(),"defaults=",d),d[d.length-1]},Opal.modules["bcdice/arithmetic_evaluator"]=function(e){var M,j,J,a,d,P,S,W,Y=e.module,G=e.ensure_kwargs,u=e.truthy,N=e.thrower,L=e.def,g=[],h=e.nil,D=e.$$$;return M=g,j=W=[Y(g[0],"BCDice")].concat(M),S=[P=Y(W[0],"ArithmeticEvaluator")].concat(j),a=[J=e.get_singleton_class(P)].concat(S),d=e.$r(a),L(J,"$eval",function(E,t){try{N("eval_return");var _,H=h;return null==(_=(t=G(t)).$$smap.round_type)&&(_=D(d("RoundType"),"FLOOR")),u(E)&&u(H=d("Arithmetic").$eval(E,_))?H:0}catch(q){if(q===e.t_eval_return)return q.$v;throw q}},-2)},Opal.modules["bcdice/game_system/LogHorizon"]=function(e){var q,m,o,U,I,y,A,f,s,b,i,l,T,v,Y=e.module,G=e.klass,u=e.const_set,N=e.send2,L=e.find_super,g=e.def,h=e.truthy,D=e.hash2,z=e.rb_plus,M=e.rb_ge,w=e.thrower,W=e.eqeqeq,ee=e.assign_ivar,j=e.rb_divide,P=e.rb_minus,S=e.rb_times,J=e.eqeq,X=e.neqeq,a=e.rb_le,d=e.send,$=e.rb_lt,E=e.top,t=[],r=e.nil,_=e.$$$;return E.$require("bcdice/base"),E.$require("bcdice/arithmetic_evaluator"),q=t,m=v=[Y(t[0],"BCDice")].concat(q),l=[Y(v[0],"GameSystem")].concat(m),T=e.$r(l),o=l[0],U=T("Base"),I=l,s=[f=G(o,U,"LogHorizon")].concat(I),b=e.$r(s),(i=f.$$prototype).randomizer=i.locale=r,u(s[0],"ID","LogHorizon"),u(s[0],"NAME","\u30ed\u30b0\u30fb\u30db\u30e9\u30a4\u30ba\u30f3TRPG"),u(s[0],"SORT_KEY","\u308d\u304f\u307b\u3089\u3044\u3059\u3093TRPG"),u(s[0],"HELP_MESSAGE","\u25a0 \u5224\u5b9a (xLH\xb1y>=z)\n\u3000xD6\u306e\u5224\u5b9a\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000x\uff1ax\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n\u3000\xb1y\uff1ay\u306b\u4fee\u6b63\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000>=z\uff1az\u306b\u76ee\u6a19\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 3LH\u30002LH>=8\u30003LH+1>=10\n\n\u25a0 \u6d88\u8017\u8868 (tCTx\xb1y$z)\n\u3000PCT \u4f53\u529b\uff0fECT \u6c17\u529b\uff0fGCT \u7269\u54c1\uff0fCCT \u91d1\u92ad\n\u3000x:CR\u3092\u6307\u5b9a\u3002\n\u3000\xb1y:\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u8868\u306e\u7279\u5b9a\u306e\u5024\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 PCT1\u3000ECT2+1\u3000GCT3-1\u3000CCT3$5\n\n\u25a0 \u6d88\u8017\u8868\u30ed\u30fc\u30eb (CTx\xb1y)\n\u3000\u6d88\u8017\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u7701\u7565\u53ef\u80fd\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u8ca1\u5b9d\u8868 (tTRSx\xb1y$)\n\u3000LHZB1\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRS \u91d1\u92ad\uff0fMTRS \u9b54\u6cd5\u7d20\u6750\uff0fITRS \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0f\u203bHTRS \u30d2\u30ed\u30a4\u30f3\uff0fGTRS \u30b4\u30d6\u30ea\u30f3\u8ca1\u5b9d\u8868\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\u300a\u30b4\u30fc\u30eb\u30c9\u30d5\u30a3\u30f3\u30ac\u30fc\u300b\u4f7f\u7528\u6642\u306a\u3069\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u8ca1\u5b9d\u8868\u306e\u30c0\u30a4\u30b9\u76ee\u30927\u56fa\u5b9a\uff081\u56de\u5206\u306e\u30d7\u30e9\u30a4\u30ba\u7528\uff09\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 CTRS1\u3000MTRS2+1\u3000ITRS3-1\u3000ITRS+27\u3000CTRS3$\n\n\u25a0 \u8ca1\u5b9d\u8868\uff08\u62e1\u5f35\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\uff09 (tTRSEx\xb1y$)\n\u3000LHZB2\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRSE \u91d1\u92ad\uff0fMTRSE \u9b54\u6cd5\u7d20\u6750\uff0fITRSE \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0fOTRSE \u305d\u306e\u307b\u304b\n\u3000\u8a18\u6cd5\u306f\u8ca1\u5b9d\u8868\u3068\u540c\u69d8\n\n\u25a0 \u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb (TRSx\xb1y)\n\u3000\u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306fCR 0\u3068\u3057\u3066\u6271\u3046\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u30a4\u30fc\u30b9\u30bf\u30eb\u63a2\u7d22\u8868 (ESTLx\xb1y$z)\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u7279\u5b9aCR\u306e\u8868\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 ESTL1\u3000ESTL+15\u3000ESTL2+1$5\u3000ESTL2-1$5\n\n\u25a0 \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u30c9\u30de\u30b8\u30c3\u30af\u30a2\u30a4\u30c6\u30e0\u52b9\u679c\u8868 (MGRx)\n\u3000x\u306fMG\u3092\u6307\u5b9a\u3002(LHZB1\u7528)\n\n\u25a0 \u697d\u5668\u7a2e\u5225\u8868\u2020 (MIIx)\n\u3000x\u306f\u697d\u5668\u306e\u7a2e\u985e(1\uff5e6\u3092\u6307\u5b9a)\u3001\u7701\u7565\u53ef\u80fd\n\u30001 \u6253\u697d\u5668\uff11\uff0f2 \u9375\u76e4\u697d\u5668\uff0f3 \u5f26\u697d\u5668\uff11\uff0f4 \u5f26\u697d\u5668\uff12\uff0f5 \u7ba1\u697d\u5668\uff11\uff0f6 \u7ba1\u697d\u5668\uff12\n\n\u25a0 \u7279\u6b8a\u6d88\u8017\u8868\u2606 (tSCTx\xb1y$z)\n\u3000\u6d88\u8017\u8868\u3068\u540c\u69d8\u3001\u305f\u3060\u3057CR\u306f\u7701\u7565\u53ef\u80fd\u3002\n\u3000ESCT \u30ed\u30c7\u7814\u306f\u7206\u767a\u3060\uff01\uff0fCSCT \u30a2\u30eb\u30f4\u306e\u546a\u3044\u3058\u3083\uff01\n\n\u25a0 \u30ed\u30c7\u7814\u306e\u65b0\u767a\u660e\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (IATt)\n\u3000IATA \u7279\u5fb4A(\u30e1\u30ea\u30c3\u30c8)\uff0fIATB \u7279\u5fb4B(\u30c7\u30e1\u30ea\u30c3\u30c8)\uff0fIATL \u898b\u305f\u76ee\uff0fIATT \u7a2e\u985e\n\u3000t\u3092\u7701\u7565\u3059\u308b\u3068\u5168\u3066\u8868\u793a\u3002t\u306bA/B/L/T\u3092\u4efb\u610f\u306e\u9806\u3067\u9023\u7d50\u53ef\u80fd\n\u3000\u4f8b\uff09IAT\u3000IATALT  IATABBLT  IATABL\n\n\u25a0 \u8868\n\u3000\u30fb\u30d1\u30fc\u30bd\u30ca\u30ea\u30c6\u30a3\u30bf\u30b0\u8868 (PTAG)\n\u3000\u30fb\u4ea4\u53cb\u8868 (KOYU)\n\u3000\u30fb\u653b\u6483\u547d\u4e2d\u7b87\u6240\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (HLOC)\n\u3000\u30fbPC\u540d\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (PCNM)\n\u3000\u30fb\u30a2\u30ad\u30d0\u306e\u8857\u3067\u906d\u9047\u3059\u308b\u30c8\u30e9\u30d6\u30eb\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (TIAS)\n\u3000\u30fb\u5ec3\u68c4\u5150\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (ABDC)\n\n\u2020\u5370\u306f\u2606\u5370\u306f\u300c\u30a4\u30f3\u30c8\u30a5\u30fb\u30b6\u30fb\u30bb\u30eb\u30c7\u30b7\u30a2 \u3055\u3089\u306a\u308b\u30d3\u30eb\u30c9\u306e\u7fbd\u3070\u305f\u304d\uff08\uff11\uff09\u300d\u3088\u308a\u3001\n\u2606\u5370\u306f\u30bb\u30eb\u30c7\u30b7\u30a2\u30fb\u30ac\u30bc\u30c3\u30c8\u300c\u3067\u304d\u308b\u304b\u306a66\u300dVol.1\u3088\u308a\u3001\n\u203b\u5370\u306f\u300c\u5b9f\u9332\u30fb\u4e03\u9762\u4f53\u5de5\u623f\u30b9\u30bf\u30c3\u30d5\u5ea7\u8ac7\u4f1a(\u590f\u306e\u9663)\u300d\u3088\u308a\u3002\u5229\u7528\u6cd5\u306a\u3069\u306f\u305d\u3061\u3089\u53c2\u7167\u3002\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),f.$register_prefix("\\d+LH","\\w+CT","CT","\\w+TRS","TRS","IAT","TIAS","ABDC","MII","ESTL"),g(f,"$initialize",function c(n){var A=this;return c.$$p=null,N(A,L(A,"initialize",c,!1,!0),"initialize",[n],null),A.d66_sort_type=_(b("D66SortType"),"NO_SORT")}),g(f,"$eval_game_system_specific_command",function(n){var A,k,F,Q,ne,V,re,te,K,R,O,y=this;return h(A=h(k=h(F=h(Q=h(ne=h(V=h(re=h(te=h(K=h(R=h(O=y.$getCheckRollDiceCommandResult(n))?O:y.$roll_consumption(n))?R:y.$roll_consumption_table(n))?K:y.$roll_treasure(n))?te:y.$roll_treasure_table(n))?re:y.$roll_treasure_table_b2(n))?V:y.$getInventionAttributeTextDiceCommandResult(n))?ne:y.$getTroubleInAkibaStreetDiceCommandResult(n))?Q:y.$getAbandonedChildDiceCommandResult(n))?F:y.$getMusicalInstrumentTypeDiceCommandResult(n))?k:y.$roll_eastal_exploration_table(n))?A:y.$roll_tables(n,_(y.$class(),"TABLES"))}),f.$private(),g(f,"$getCheckRollDiceCommandResult",function(n){var y=this,k=r,F=r,Q=r,ne=r,V=r,re=r,te=r;return k=_(b("Command"),"Parser").$new(/\d+LH/,D(["round_type"],{round_type:y.$round_type()})).$restrict_cmp_op_to(r,">=").$parse(n),h(k)?(F=k.$command().$to_i(),ne=(Q=y.randomizer.$roll_barabara(F,6)).$sum(),V=z(ne,k.$modify_number()),re=y.$result_text(F,Q,V,k),te=["("+k+")",ne+"["+Q.$join(",")+"]"+b("Format").$modifier(k.$modify_number()),V,re.$text()].$compact(),re["$text="](te.$join(" \uff1e ")),re):r}),g(f,"$result_text",function(n,y,A,k){var F=this;return h(M(y.$count(6),2))?b("Result").$critical(F.$translate("LogHorizon.LH.critical")):h(M(y.$count(1),n))?b("Result").$fumble(F.$translate("LogHorizon.LH.fumble")):h(k.$cmp_op()["$nil?"]())?b("Result").$new():h(M(A,k.$target_number()))?b("Result").$success(F.$translate("success")):b("Result").$failure(F.$translate("failure"))}),g(f,"$getValue",function(n,y){try{return w("eval_return"),h(n["$nil?"]())||h(n["$empty?"]())?y:b("ArithmeticEvaluator").$eval(n)}catch(k){if(k===e.t_eval_return)return k.$v;throw k}}),g(f,"$roll_consumption",function(n){try{w("eval_return");var k=r,F=r,Q=r,ne=r,V=r;return k=/^CT\d*([+\-\d]+)?$/.$match(n),h(k)?(F=b("ArithmeticEvaluator").$eval(k["$[]"](1)),Q=b("Format").$modifier(F),ne=this.randomizer.$roll_once(6),h(Q["$empty?"]())||(V=z(ne.$to_s(),Q)),["(1D6"+Q+")",V,z(ne,F)].$compact().$join(" \uff1e ")):r}catch(te){if(te===e.t_eval_return)return te.$v;throw te}}),g(f,"$roll_consumption_table",function(n){try{w("eval_return");var k=r,F=r,Q=r,ne=r;return k=/(P|E|G|C|ES|CS)CT(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(n),h(k)?(F=this.$construct_consumption_table(k["$[]"](1)),Q=k["$[]"](2).$to_i(),ne=b("ArithmeticEvaluator").$eval(k["$[]"](3)),h(k["$[]"](4))&&F.$fix_dice_value(k["$[]"](4).$to_i()),F.$roll(Q,ne,this.randomizer)):r}catch(V){if(V===e.t_eval_return)return V.$v;throw V}}),g(f,"$construct_consumption_table",function(n){var k,y=this,A=r;return A=W("P",k=n)?y.$translate("LogHorizon.CT.PCT"):W("E",k)?y.$translate("LogHorizon.CT.ECT"):W("G",k)?y.$translate("LogHorizon.CT.GCT"):W("C",k)?y.$translate("LogHorizon.CT.CCT"):W("ES",k)?y.$translate("LogHorizon.CT.ESCT"):W("CS",k)?y.$translate("LogHorizon.CT.CSCT"):r,b("ConsumptionTable").$new(A["$[]"]("name"),A["$[]"]("items"))}),(A=(y=G(s[0],null,"ConsumptionTable")).$$prototype).tables=A.dice_value=A.name=r,g(y,"$initialize",function(F,Q){return this.name=F,this.tables=Q,this.dice_value=r}),g(y,"$fix_dice_value",ee("dice_value")),g(y,"$roll",function(F,Q,ne){var re,K,O,V=this,te=r,R=r;return re=j(P(F,1),5).$clamp(0,P(V.tables.$size(),1)),te=V.tables["$[]"](re),V.dice_value=h(K=V.dice_value)?K:ne.$roll_once(6),R=z(V.dice_value,Q),O=te["$[]"](R.$clamp(0,7)),V.name+"("+R+"["+V.dice_value+"]) \uff1e "+O}),g(f,"$roll_treasure",function(n){try{w("eval_return");var k=r,F=r,Q=r,ne=r,V=r,re=r;return k=/^TRS(\d+)?([+\-\d]+)?$/.$match(n),h(k)?(F=k["$[]"](1).$to_i(),Q=b("ArithmeticEvaluator").$eval(k["$[]"](2)),V=(ne=this.randomizer.$roll_barabara(2,6)).$sum(),re=z(z(V,S(F,5)),Q),"(2D6+"+F+"*5"+b("Format").$modifier(Q)+") \uff1e "+V+"["+ne.$join(",")+"]"+b("Format").$modifier(z(S(F,5),Q))+" \uff1e "+re):r}catch(te){if(te===e.t_eval_return)return te.$v;throw te}}),g(f,"$roll_treasure_table",function(n){try{w("eval_return");var A=this,k=r,F=r,Q=r,ne=r,V=r;return k=/^([CMIHG]TRS)(\d+)?([+\-\d]+)?(\$)?$/.$match(n),h(k)?(F=k["$[]"](1),Q=A.$construct_treasure_table(F),ne=k["$[]"](2).$to_i(),V=b("ArithmeticEvaluator").$eval(k["$[]"](3)),J(ne,0)&&J(V,0)?A.$translate("LogHorizon.TRS.need_cr",D(["command"],{command:n})):(h(k["$[]"](4))&&Q.$fix_dice_value(7),Q.$roll(ne,V,A.randomizer))):r}catch(re){if(re===e.t_eval_return)return re.$v;throw re}}),g(f,"$construct_treasure_table",function(n){return J(n,"HTRS")?b("HeroineTreasureTable").$from_i18n("LogHorizon.TRS.HTRS",this.locale):b("TreasureTable").$from_i18n("LogHorizon.TRS."+n,this.locale)}),g(f,"$roll_treasure_table_b2",function(n){try{w("eval_return");var A=this,k=r,F=r,Q=r,ne=r,V=r;return k=/^([CMIO]TRSE)(\d+)?([+\-\d]+)?(\$)?$/.$match(n),h(k)?(F=k["$[]"](1),Q=b("ExpansionTreasureTable").$from_i18n("LogHorizon.TRSE."+F,A.locale),ne=k["$[]"](2).$to_i(),V=b("ArithmeticEvaluator").$eval(k["$[]"](3)),J(ne,0)&&J(V,0)?A.$translate("LogHorizon.TRS.need_cr",D(["command"],{command:n})):(h(k["$[]"](4))&&Q.$fix_dice_value(7),Q.$roll(ne,V,A.randomizer))):r}catch(re){if(re===e.t_eval_return)return re.$v;throw re}}),function(c,n,y){var ne,re,te,A=G(c,null,"TreasureTable"),k=[A].concat(y),F=e.$r(k),Q=A.$$prototype;Q.dice_list=Q.name=Q.items=r,A.$include(F("Translate")),re=[ne=e.get_singleton_class(A)].concat(k),te=e.$r(re),g(ne,"$from_i18n",function(R,O){var B=r;return B=te("I18n").$translate(R,D(["raise","locale"],{raise:!0,locale:O})),this.$new(B["$[]"]("name"),B["$[]"]("items"),O)}),g(A,"$initialize",function(V,re,te){var K=this;return K.name=V,K.items=re,K.locale=te,K.dice_list=r}),g(A,"$fix_dice_value",function(V){return this.dice_list=[V]}),g(A,"$roll",function(V,re,te){var K,R=this,O=r,Z=r,B=r,ae=r;return J(V,0)&&J(re,0)?r:(O=J(V,0)&&X(re,0)?re:(R.dice_list=h(Z=R.dice_list)?Z:te.$roll_barabara(2,6),z(z(R.dice_list.$sum(),S(5,V)),re)),B=R.$pick_item(O),h(R.dice_list)&&(ae="["+((K=R.dice_list)===r||null==K?r:K.$join(","))+"]"),R.name+"("+O+ae+") \uff1e "+B)}),A.$private(),g(A,"$pick_item",function(V){var re=this;return h(a(V,6))?re.$translate("LogHorizon.TRS.below_lower_limit",D(["value"],{value:6})):h(a(V,62))?re.items["$[]"](V.$to_s()):h(a(V,72))?re.items["$[]"](P(V,10).$to_s())+"&80G":h(a(V,82))?re.items["$[]"](P(V,20).$to_s())+"&160G":h(a(V,87))?re.items["$[]"](P(V,30).$to_s())+"&260G":re.$translate("LogHorizon.TRS.exceed_upper_limit",D(["value"],{value:88}))})}(s[0],0,s),function(c,n){var y=G(c,n,"HeroineTreasureTable");y.$$prototype.items=r,g(y,"$pick_item",function(F){var Q=this;return h(a(F,6))?Q.$translate("LogHorizon.TRS.below_lower_limit",D(["value"],{value:6})):h(a(F,53))?Q.items["$[]"](F.$to_s()):Q.$translate("LogHorizon.TRS.exceed_upper_limit",D(["value"],{value:54}))})}(s[0],b("TreasureTable")),function(c,n){var y=G(c,n,"ExpansionTreasureTable");y.$$prototype.items=r,g(y,"$pick_item",function(F){var Q=this;return h(a(F,6))?Q.$translate("LogHorizon.TRS.below_lower_limit",D(["value"],{value:6})):h(a(F,162))?Q.items["$[]"](F.$to_s()):h(a(F,172))?Q.items["$[]"](P(F,10).$to_s())+"&200G":h(a(F,182))?Q.items["$[]"](P(F,20).$to_s())+"&400G":h(a(F,187))?Q.items["$[]"](P(F,30).$to_s())+"&600G":Q.$translate("LogHorizon.TRS.exceed_upper_limit",D(["value"],{value:188}))})}(s[0],b("TreasureTable")),g(f,"$getInventionAttributeTextDiceCommandResult",function(n){var A=r,k=r,F=r,Q=r,ne=r;return h(n["$=~"](/IAT([ABMDLT]*)/))?(A=this.$translate("LogHorizon.IAT.name"),k=h(b("Regexp").$last_match(1))&&X(b("Regexp").$last_match(1),"")?b("Regexp").$last_match(1):"MDLT",F=k.$length()["$=="](1),Q=[],ne=[],d(k.$split(/(?:)/),"each",[],function V(re){var O,te=null==V.$$s?this:V.$$s,K=r,R=r,Z=r;return null==te.randomizer&&(te.randomizer=r),null==re&&(re=r),K=te.randomizer.$roll_once(6),ne["$<<"](K.$to_s()),Z=(R=W("A",O=re)||W("M",O)?te.$translate("LogHorizon.IAT.A"):W("B",O)||W("D",O)?te.$translate("LogHorizon.IAT.B"):W("L",O)?te.$translate("LogHorizon.IAT.L"):W("T",O)?te.$translate("LogHorizon.IAT.T"):r)["$[]"]("items")["$[]"](P(K,1)),h(F)&&(Z=R["$[]"]("name")+"\uff1a"+Z),Q.$push(Z)},{$$s:this}),A+"(["+ne.$join(",")+"]) \uff1e "+Q.$join(" ")):r}),g(f,"$getTroubleInAkibaStreetDiceCommandResult",function(n){return J(n,"TIAS")?this.$roll_random_table("LogHorizon.TIAS"):r}),g(f,"$getAbandonedChildDiceCommandResult",function(n){return J(n,"ABDC")?this.$roll_random_table("LogHorizon.ABDC"):r}),g(f,"$roll_random_table",function(n){var A=r,k=r,F=r,Q=r;return A=this.$translate(n),k=A["$[]"]("tables"),F=this.randomizer.$roll_barabara(k.$size(),6),Q=d(F.$map(),"with_index",[],function(V,re){return null==V&&(V=r),null==re&&(re=r),k["$[]"](re)["$[]"](P(V,1))}),A["$[]"]("name")+"(["+F.$join(",")+"]) \uff1e "+Q.$join(" ")}),g(f,"$getMusicalInstrumentTypeDiceCommandResult",function(n){var y=this,A=r,k=r,F=r,Q=r,ne=r,V=r,re=r;return!h(n["$=~"](/MII(\d?)/))||(A=(h(k=b("Regexp").$last_match(1))?b("Regexp").$last_match(1)["$!="](""):k)["$!"](),F=h(A)?y.randomizer.$roll_once(6):b("Regexp").$last_match(1).$to_i(),h($(F,1))||$(6,F))?r:(Q=y.$translate("LogHorizon.MII.name"),ne=y.$translate("LogHorizon.MII.type_list")["$[]"](P(F,1)),V=y.randomizer.$roll_once(6),re=y.$translate("LogHorizon.MII.items")["$[]"](P(F,1))["$[]"](P(V,1)),z(z(Q.$to_s(),h(A)?"("+F+")":"")," \uff1e "+ne+"("+V+") \uff1e "+re))}),g(f,"$roll_eastal_exploration_table",function(n){try{w("eval_return");var A,k=this,F=r,Q=r,ne=r,V=r,re=r,te=r,K=r,R=r,Z=r;return F=/ESTL(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(n),!h(F)||h(F["$[]"](1)["$nil?"]())&&h(F["$[]"](2)["$nil?"]())&&h(F["$[]"](3)["$nil?"]())?r:(Q=F["$[]"](1).$to_i(),ne=b("ArithmeticEvaluator").$eval(F["$[]"](2)),V=(A=F["$[]"](3))===r||null==A?r:A.$to_i(),re=h(V)?[V]:J(Q,0)?[]:k.randomizer.$roll_barabara(2,6),h(re["$empty?"]())||(te="["+re.$join(",")+"]"),K=z(z(re.$sum(),S(Q,5)),ne).$clamp(7,162),R=k.$translate("LogHorizon.ESTL.name"),Z=k.$translate("LogHorizon.ESTL.items")["$[]"](K.$to_s()).$chomp(),R+"("+K+te+")\n"+Z)}catch(B){if(B===e.t_eval_return)return B.$v;throw B}}),function(c,n){var y=[c].concat(n),A=e.$r(y);c.$private(),g(c,"$translate_tables",function(F){return D(["PTAG","KOYU","MGR1","MGR2","MGR3","HLOC","PCNM"],{PTAG:_(A("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PTAG",F),KOYU:_(A("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.KOYU",F),MGR1:_(A("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR1",F),MGR2:_(A("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR2",F),MGR3:_(A("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR3",F),HLOC:_(A("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.HLOC",F),PCNM:_(A("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PCNM",F)})})}(e.get_singleton_class(f),s),u(s[0],"TABLES",f.$translate_tables("ja_jp")),f.$register_prefix(b("TABLES").$keys())},Opal.queue(function(e){var w,P,$,E,t,J,X,ee,Y=e.module,G=e.klass,u=e.const_set,N=e.send2,L=e.find_super,g=e.def,D=[];return e.top.$require("bcdice/game_system/LogHorizon"),w=D,P=ee=[Y(D[0],"BCDice")].concat(w),J=[Y(ee[0],"GameSystem")].concat(P),X=e.$r(J),$=J,u((t=[E=G(J[0],X("LogHorizon"),"LogHorizon_Korean")].concat($))[0],"ID","LogHorizon:Korean"),u(t[0],"NAME","\ub85c\uadf8 \ud638\ub77c\uc774\uc98c"),u(t[0],"SORT_KEY","\u56fd\u969b\u5316:Korean:\ub85c\uadf8 \ud638\ub77c\uc774\uc98c"),u(t[0],"HELP_MESSAGE","\u25a0 \ud310\uc815(xLH\xb1y>=z)\n\u3000xD6\uc758 \ud310\uc815.\ud06c\ub9ac\ud2f0\uceec, \ud38c\ube14\uc758 \uc790\ub3d9 \ud310\uc815\uc744 \uc2e4\uc2dc\ud569\ub2c8\ub2e4.\n\u3000x\uff1ax\ub85c \uad74\ub9b4 \uc8fc\uc0ac\uc704\uc758 \uc218\ub97c \uc785\ub825\ud569\ub2c8\ub2e4.\n\u3000\xb1y\uff1ay\ub85c \uc218\uc815\uce58\ub97c \uc785\ub825\ud569\ub2c8\ub2e4. \xb1\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n  >=z\uff1az\ub85c \ubaa9\ud45c\uac12\uc744 \uc785\ub825\ud569\ub2c8\ub2e4. \xb1\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000\uc608\uc2dc\uff09 3LH\u30002LH>=8\u30003LH+1>=10\n\n\u25a0 \uc18c\ubaa8\ud45c(tCTx\xb1y$z)\n\u3000PCT \uccb4\ub825\uff0fECT \uae30\ub825\uff0fGCT \ubb3c\ud488\uff0fCCT \uae08\uc804\n\u3000x:CR\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4.\n\u3000\xb1y:\uc218\uc815\uce58, \uff0b\uc640 \uff0d\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000$z\uff1a$\ub97c \ubd99\uc774\uba74 \uc8fc\uc0ac\uc704 \ub208\uc744 z\uace0\uc815\ud569\ub2c8\ub2e4. \ud45c\uc758 \ud2b9\uc815 \uac12 \ucc38\uc870\uc6a9\uc73c\ub85c \uc0ac\uc6a9\ud558\uba70.\uc0dd\ub7b5 \uac00\ub2a5.\n\u3000\u4f8b\uff09 PCT1\u3000ECT2+1\u3000GCT3-1\u3000CCT3$5\n\n\u25a0 \u6d88\u8017\u8868\u30ed\u30fc\u30eb (CTx\xb1y)\n\u3000\u6d88\u8017\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u7701\u7565\u53ef\u80fd\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \uc7ac\ubb3c\ud45c(tTRSx\xb1y$)\n\u3000CTRS \uae08\uc804\uff0fMTRS \ub9c8\ubc95\uc18c\uc7ac\uff0fITRS \ud658\uc804 \uc544\uc774\ud15c\uff0f\u203bHTRS \ud788\ub85c\uc778\uff0fGTRS \uace0\ube14\ub9b0 \uc7ac\ubcf4\ud45c\n\u3000x\uff1aCR\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4. \uc0dd\ub7b5\uc2dc\uc5d0\ub294 \ub2e4\uc774\uce58 0\uace0\uc815\uc73c\ub85c \uc218\uc815\uce58\uc758 \ud45c\ub97c \ucc38\uc870.\u300a\uace8\ub4dc \ud551\uac70\u300b\uc0ac\uc6a9 \uc2dc \ub4f1.\n\u3000\xb1y\uff1a\uc218\uc815\uce58, \uff0b\uc640 \uff0d\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000$\uff1a\uff04\uc744 \ubd99\uc774\uba74 \uc7ac\ubb3c\ud45c\uc758 \ub2e4\uc774\uc2a4\ub97c 7\ub85c \uace0\uc815\ud569\ub2c8\ub2e4.\uff081\ucc28 \ubd84\ub7c9\uc758 \ud504\ub77c\uc774\uc988 \uc6a9\ub3c4\uff09\uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000\uc608\uc2dc\uff09 CTRS1\u3000MTRS2+1\u3000ITRS3-1\u3000ITRS+27\u3000CTRS3$\n\n\u25a0 \u8ca1\u5b9d\u8868\uff08\u62e1\u5f35\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\uff09 (tTRSEx\xb1y$)\n\u3000LHZB2\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRSE \u91d1\u92ad\uff0fMTRSE \u9b54\u6cd5\u7d20\u6750\uff0fITRSE \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0fOTRSE \u305d\u306e\u307b\u304b\n\u3000\u8a18\u6cd5\u306f\u8ca1\u5b9d\u8868\u3068\u540c\u69d8\n\n\u25a0 \u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb (TRSx\xb1y)\n\u3000\u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306fCR 0\u3068\u3057\u3066\u6271\u3046\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \uc774\uc2a4\ud0c8 \ud0d0\uc0c9\ud45c (ESTLx\xb1y$z)\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u7279\u5b9aCR\u306e\u8868\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 ESTL1\u3000ESTL+15\u3000ESTL2+1$5\u3000ESTL2-1$5\n\n\u25a0 \ud504\ub9ac\ud53d\uc2a4\ub4dc \ub9e4\uc9c1\uc544\uc774\ud15c \ud6a8\uacfc \ud45c(MGRx)\n\u3000x\ub294 MG\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.\n\n\u25a0 \uc545\uae30 \uc885\ub958 \ud45c\u2020 (MIIx)\n\u3000x\ub294 \uc545\uae30\uc758 \uc885\ub958\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.(1~6\ub97c \uc9c0\uc815) \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u30001 \ud0c0\uc545\uae301\uff0f2 \uac74\ubc18\uc545\uae30\uff0f3 \ud604\uc545\uae301\uff0f4 \ud604\uc545\uae302\uff0f5 \uad00\uc545\uae301\uff0f6 \uad00\uc545\uae302\n\n\u25a0 \ud2b9\uc218 \uc18c\ubaa8\ud45c\u2606 (tSCTx\xb1y$z)\n\u3000\uc18c\ubaa8\ud45c\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c \uc9c0\uc815\ud569\ub2c8\ub2e4. \ub2e4\ub9cc CR\uc740 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000ESCT \ub85c\ub370\ub9ad \uc5f0\uad6c\uc18c\ub294 \ud3ed\ubc1c\ud588\ub2e4!\uff0fCSCT \uc54c\ube0c\uc758 \uc800\uc8fc\ub2e4!\n\n\u25a0 \ub85c\ub370\ub9ad \uc5f0\uad6c\uc18c\uc758 \uc0c8\ub85c\uc6b4 \ubc1c\uba85 \ub79c\ub364 \uacb0\uc815\ud45c\u203b (IATt)\n\u3000IATA \ud2b9\uc9d5A(\uc7a5\uc810)\uff0fIATB \ud2b9\uc9d5B(\ub2e8\uc810)\uff0fIATL \uc678\ud615\uff0fIATT \uc885\ub958\n\u3000t\ub97c \uc0dd\ub7b5\ud560 \uacbd\uc6b0 \ubaa8\ub450 \ud45c\uc2dc\ud569\ub2c8\ub2e4. t\uc5d0 A/B/L/T\ub97c \uc784\uc758\uc758 \uc21c\uc11c\ub85c \uc5f0\uacb0 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\u3000\u4f8b\uff09IAT\u3000IATALT  IATABBLT  IATABL\n\n\u25a0 \ud45c\n\u3000\u30fb\ud37c\uc2a4\ub110\ub9ac\ud2f0 \ud0dc\uadf8 \ud45c (PTAG)\n\u3000\u30fb\uad50\uc6b0\ud45c (KOYU)\n\u3000\u30fb\uacf5\uaca9 \uba85\uc911 \uc7a5\uc18c \ub79c\ub364 \uacb0\uc815\ud45c\u203b (HLOC)\n\u3000\u30fbPC\uba85 \ub79c\ub364 \uacb0\uc815\ud45c\u203b (PCNM)\n\u3000\u30fb\uc544\ud0a4\ubc14 \uac70\ub9ac\uc5d0\uc11c \ubc1c\uc0dd\ud558\ub294 \ubb38\uc81c \ub79c\ub364\uacb0\uc815 \ud45c\u203b (TIAS)\n\u3000\u30fb\ubc84\ub824\uc9c4 \uc544\uc774 \ub79c\ub364 \uacb0\uc815 \ud45c\u203b (ABDC)\n\n\u2020\ud45c\uc2dc\uc640 \u2606\ud45c\uc2dc\ub294\u300c\uc778\ud22c\u30fb\ub354\u30fb\uc140\ub374\uc2dc\uc544 \uc0c8\ub85c\uc6b4 \ube4c\ub4dc\uc758 \ub0a0\uac1c\uc9d3(1)\u300d\uc5d0\uc11c\u3001\n\u2606\ud45c\uc2dc\ub294 \uc140\ub374\uc2dc\uc544\u30fb\uac00\uc81c\ud2b8\u300cD \ub418\uae30\ub294 \ud560\uae4c? 66\u300dVol.1\uc5d0\uc11c\u3001\n\u203b\ud45c\uc2dc\ub294\u300c\uc2e4\ub85d\u30fb\uce60\uba74\uccb4\uacf5\ubc29 \uc88c\ub2f4\ud68c(\uc5ec\ub984\uc758 \uc7a5)\u300d\uc5d0\uc11c \ucc38\uc870\ud588\uc2b5\ub2c8\ub2e4. \uc774\uc6a9\ubc95\uc740 \ud56d\ubaa9\uc744 \ucc38\uc870\ud574\uc8fc\uc138\uc694.\n\u30fbD66\ub2e4\uc774\uc2a4\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.\n\n\u30fb\uc5ed\uc790\uc758 \ub9d0 : \u300c\uc2e4\ub85d\u30fb\uce60\uba74\uccb4\uacf5\ubc29 \uc88c\ub2f4\ud68c(\uc5ec\ub984\uc758 \uc7a5)\u300d\uc740 \ud55c\uad6d\uc5d0\uc11c \ubc1c\ub9e4\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ucc38\uace0\ud574\uc8fc\uc138\uc694.\n\u30fb\uc774\ub2c8\ud2f0\uc6c0\ub2d8, \uad11\ud669\ub2d8, CoC\ubc29 \uc5ec\ub7ec\ubd84 \uac10\uc0ac\ud569\ub2c8\ub2e4. by\ud638\ud761\ub3c4\uc758\uc2dd\ud558\uba74\uadc0\ucc2e\uc544\n"),E.$register_prefix_from_super_class(),g(E,"$initialize",function r(_){var q=this;return r.$$p=null,N(q,L(q,"initialize",r,!1,!0),"initialize",[_],null),q.locale="ko_kr"}),u(t[0],"TABLES",E.$translate_tables("ko_kr"))})}}]);