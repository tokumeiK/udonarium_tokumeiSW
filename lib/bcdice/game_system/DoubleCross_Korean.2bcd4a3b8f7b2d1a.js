(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[6708],{9761:(re,ne,te)=>{te(9993),Opal.modules["bcdice/arithmetic_evaluator"]=function(r){var V,s,K,n,w,F,i,P,S=r.module,j=r.ensure_kwargs,x=r.truthy,q=r.thrower,k=r.def,c=[],D=r.nil,B=r.$$$;return V=c,s=P=[S(c[0],"BCDice")].concat(V),i=[F=S(P[0],"ArithmeticEvaluator")].concat(s),n=[K=r.get_singleton_class(F)].concat(i),w=r.$r(n),k(K,"$eval",function(H,v){try{q("eval_return");var g,A=D;return null==(g=(v=j(v)).$$smap.round_type)&&(g=B(w("RoundType"),"FLOOR")),x(H)&&x(A=w("Arithmetic").$eval(H,g))?A:0}catch(h){if(h===r.t_eval_return)return h.$v;throw h}},-2)},Opal.modules["bcdice/dice_table/range_table"]=function(r){var U,K,H,v,z,g,A,n,F,S=r.module,j=r.klass,x=r.const_set,q=r.send,k=r.truthy,c=r.def,D=r.eqeqeq,B=r.rb_times,G=r.rb_plus,V=[],l=r.nil;return U=V,K=F=[S(V[0],"BCDice")].concat(U),H=n=[S(F[0],"DiceTable")].concat(K),z=[v=j(n[0],null,"RangeTable")].concat(H),g=r.$r(z),(A=v.$$prototype).name=A.items=A.num_of_dice=A.num_of_sides=A.formatter=l,x(z[0],"RollResult",q(g("Struct"),"new",["sum","values","content","formatted"],function h(){return(null==h.$$s?this:h.$$s).$alias_method("to_s","formatted")},{$$s:v})),x(z[0],"Item",g("Struct").$new("range","content")),x(z[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),x(z[0],"DEFAULT_FORMATTER",q(v,"lambda",[],function($,a){return null==$&&($=l),null==a&&(a=l),$.$name()+"("+a.$sum()+") \uff1e "+a.$content()})),v.$attr_reader("name"),v.$attr_reader("num_of_dice"),v.$attr_reader("num_of_sides"),c(v,"$initialize",function h($,a,f){var o,d=h.$$p||l,m=this,_=l;return h.$$p=null,m.name=$.$freeze(),m.formatter=k(o=d)?o:g("DEFAULT_FORMATTER"),_=g("DICE_ROLL_METHOD_RE").$match(a),k(_)||m.$raise(g("ArgumentError"),m.name+": invalid dice roll method: "+a),m.num_of_dice=_["$[]"](1).$to_i(),m.num_of_sides=_["$[]"](2).$to_i(),m.$store(f)}),c(v,"$fetch",function($){var f,a=this;return f=q(a.items,"find",[],function(m){return null==m&&(m=l),m.$range()["$include?"]($)}),k(f)||a.$raise(g("RangeError"),a.name+": value is out of range: "+$),f}),c(v,"$roll",function($){var d,a=this,f=l,m=l;return d=(f=$.$roll_barabara(a.num_of_dice,a.num_of_sides)).$sum(),(m=g("RollResult").$new(d,f,a.$fetch(d).$content()))["$formatted="](a.formatter["$[]"](a,m)),m}),v.$private(),c(v,"$store",function($){var f,d,a=this;return f=q($,"map",[],function m(o,_){return null==o&&(o=l),null==_&&(_=l),[(null==m.$$s?this:m.$$s).$coerce_to_int_range(o),_]},{$$s:a}),d=q(f,"sort_by",[],function(o,_){return null==o&&(o=l),null==_&&(_=l),o.$min()}),a.$assert_min_sum_is_covered(d),a.$assert_max_sum_is_covered(d),a.$assert_no_gap_or_overlap_in_ranges(d),a.items=q(d,"map",[],function(o,_){return null==o&&(o=l),null==_&&(_=l),g("Item").$new(o,_.$freeze()).$freeze()}).$freeze(),a}),c(v,"$coerce_to_int_range",function($){var f;return D(g("Integer"),f=$)?g("Range").$new($,$):D(g("Range"),f)&&k($.$begin()["$is_a?"](g("Integer")))&&k($.$end()["$is_a?"](g("Integer")))?$:this.$raise(g("TypeError"),this.name+": "+$+" ("+$.$class()+") must be an Integer or a Range with Integers ")}),c(v,"$assert_min_sum_is_covered",function($){var f,a=this,d=l;return f=a.num_of_dice,d=$.$first()["$[]"](0),k(d["$include?"](f))||a.$raise(g("RangeError"),a.name+": min value ("+f+") is not covered: "+d),a}),c(v,"$assert_max_sum_is_covered",function($){var f,a=this,d=l;return f=B(a.num_of_dice,a.num_of_sides),d=$.$last()["$[]"](0),k(d["$include?"](f))||a.$raise(g("RangeError"),a.name+": max value ("+f+") is not covered: "+d),a}),c(v,"$assert_no_gap_or_overlap_in_ranges",function($){return q($,"each_cons",[2],function f(d,m){var W,y,o=null==f.$$s?this:f.$$s,_=l,L=l;return null==o.name&&(o.name=l),null==d&&(d=l),null==m&&(m=l),_=d["$[]"](0),L=m["$[]"](0),W=_.$max(),y=G(W,1),k(L["$include?"](W))&&o.$raise(g("RangeError"),o.name+": Range overlap: "+_+" and "+L),k(L["$include?"](y))?l:o.$raise(g("RangeError"),o.name+": Range gap: "+_+" and "+L)},{$$s:this}),this})},Opal.modules["bcdice/game_system/DoubleCross"]=function(r){var H,A,f,d,m,u,e,R,t,b,o,_,L,$,a,z,S=r.module,j=r.klass,x=r.const_set,q=r.send2,k=r.find_super,c=r.def,D=r.truthy,B=r.rb_lt,G=r.rb_gt,V=r.rb_plus,l=r.send,P=r.rb_ge,U=r.eqeq,s=r.hash2,F=r.to_ary,i=r.range,K=r.top,N=[],n=r.nil,w=r.$$$;return K.$require("bcdice/arithmetic_evaluator"),K.$require("bcdice/dice_table/range_table"),H=N,A=z=[S(N[0],"BCDice")].concat(H),$=[S(z[0],"GameSystem")].concat(A),a=r.$r($),f=$[0],d=a("Base"),m=$,_=[o=j(f,d,"DoubleCross")].concat(m),L=r.$r(_),o.$$prototype.randomizer=n,x(_[0],"ID","DoubleCross"),x(_[0],"NAME","\u30c0\u30d6\u30eb\u30af\u30ed\u30b92nd,3rd"),x(_[0],"SORT_KEY","\u305f\u3075\u308b\u304f\u308d\u30592"),x(_[0],"HELP_MESSAGE",'\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9\uff08xDX+y@c or xDXc+y\uff09\n\u3000"(\u500b\u6570)DX(\u4fee\u6b63)@(\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024)" \u3082\u3057\u304f\u306f "(\u500b\u6570)DX(\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024)(\u4fee\u6b63)" \u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u3000\u4fee\u6b63\u5024\u3082\u4ed8\u3051\u3089\u308c\u307e\u3059\u3002\n\u3000\u4f8b\uff0910dx\u3000\u300010dx+5@8\uff08OD tool\u5f0f)\u3000\u30005DX7+7-3\uff08\u75be\u98a8\u6012\u6fe4\u5f0f\uff09\n\n\u30fb\u5404\u7a2e\u8868\n\u3000\u30fb\u611f\u60c5\u8868\uff08ET\uff09\n\u3000\u3000\u30dd\u30b8\u30c6\u30a3\u30d6\u3068\u30cd\u30ac\u30c6\u30a3\u30d6\u306e\u4e21\u65b9\u3092\u632f\u3063\u3066\u3001\u8868\u306b\u306a\u3063\u3066\u3044\u308b\u5074\u306b\u25cb\u3092\u4ed8\u3051\u3066\u8868\u793a\u3057\u307e\u3059\u3002\n\u3000\u3000\u3082\u3061\u308d\u3093\u4efb\u610f\u3067\u9078\u3076\u90e8\u5206\u306f\u5909\u66f4\u3057\u3066\u69cb\u3044\u307e\u305b\u3093\u3002\n\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n'),c(o,"$initialize",function y(p){var e=this;return y.$$p=null,q(e,k(e,"initialize",y,!1,!0),"initialize",[p],null),e.sides_implicit_d=10}),o.$register_prefix("\\d+DX","ET"),u=_,R=[e=j(_[0],null,"DX")].concat(u),t=r.$r(R),(b=e.$$prototype).modifier=b.critical_value=b.expression=b.num=b.modifier_str=b.target_value=n,e.$include(t("Translate")),c(e,"$initialize",function(C,E,X,M){var T=this;return T.num=C,T.critical_value=E,T.modifier=X,T.target_value=M,T.modifier_str=t("Format").$modifier(T.modifier),T.expression=T.$node_expression(),T.locale="ja_jp"}),c(e,"$execute",function(C){var E=this,X=n,M=n,T=n,Z=n,Q=n,Y=n;if(D(B(E.critical_value,2)))return t("Result").$new("("+E.expression+") \uff1e "+E.$translate("DoubleCross.DX.invalid_critical"));if(D(B(E.num,1)))return t("Result").$failure("("+E.expression+") \uff1e "+E.$translate("DoubleCross.DX.auto_failure"));for(X=[],M=E.num,T=0;D(D(Z=G(M,0))?B(T,w(w(t("CommonCommand"),"RerollDice"),"REROLL_LIMIT")):Z);)Q=C.$roll_barabara(M,10),Y=t("ValueGroup").$new(Q,E.critical_value),X.$push(Y),M=Y.$num_of_critical_occurrences(),T=V(T,1);return E.$result(X)}),e.$private(),c(e,"$node_expression",function(){var E,C=this;return E=C.num+"DX"+C.critical_value+C.modifier_str,D(C.target_value)?E+">="+C.target_value:E}),c(e,"$result",function(C){var M,Z,E=this,X=n,T=n,Q=n,Y=n,O=n,ee=n;return(X=t("Result").$new())["$fumble="](C["$[]"](0).$values()["$all?"](1)),M=l(C,"map",[],"max".$to_proc()).$sum(),T=D(X["$fumble?"]())?0:V(M,E.modifier),Z=D(X["$fumble?"]())?T+" ("+E.$translate("fumble")+")":T.$to_s(),X["$critical="](G(C.$length(),1)),Q=["("+E.expression+")",""+C.$join("+")+E.modifier_str,Z],D(E.target_value)&&(Y=D(O=X["$fumble?"]()["$!"]())?P(T,E.target_value):O,D(Y)?X["$success="](!0):X["$failure="](!0),ee=E.$translate(D(Y)?"success":"failure"),Q.$push(ee)),X["$text="](Q.$join(" \uff1e ")),X}),function(y,p){var u=j(y,null,"ValueGroup"),e=u.$$prototype;e.values=e.critical_value=n,u.$attr_reader("values"),u.$attr_reader("critical_value"),c(u,"$initialize",function(t,b){return this.values=t.$sort(),this.critical_value=b}),c(u,"$to_s",function(){return this.$max()+"["+this.values.$join(",")+"]"}),c(u,"$max",function(){var t=this;return D(l(t.values,"any?",[],function b(I){return null==I&&(I=n),(null==b.$$s?this:b.$$s)["$critical?"](I)},{$$s:t}))?10:t.values.$max()}),c(u,"$num_of_critical_occurrences",function(){return l(this.values,"count",[],function b(I){return null==I&&(I=n),(null==b.$$s?this:b.$$s)["$critical?"](I)},{$$s:this})}),u.$private(),c(u,"$critical?",function(t){return P(t,this.critical_value)})}(_[0]),c(o,"$eval_game_system_specific_command",function(p){var u=this,e=n;return D(e=u.$parse_dx(p))?e.$execute(u.randomizer):U(p,"ET")?u.$roll_emotion_table():n}),o.$private(),c(o,"$parse_dx",function(p){var e;return D(e=this.$parse_dx_od(p))?e:this.$parse_dx_shippu_doto(p)}),c(o,"$parse_dx_od",function(p){var R=n,t=n,b=n,I=n;return R=w(L("Command"),"Parser").$new(/\d+DX/,s(["round_type"],{round_type:this.$round_type()})).$enable_critical().$restrict_cmp_op_to(n,">=").$parse(p),D(R)?(t=R.$command().$to_i(),b=D(I=R.$critical())?I:10,w(this.$class(),"DX").$new(t,b,R.$modify_number(),R.$target_number())):n}),c(o,"$parse_dx_shippu_doto",function(p){var u,e,b=n,I=n,C=n,E=n;return b=w(L("Command"),"Parser").$new(/\d+DX\d*/,s(["round_type"],{round_type:this.$round_type()})).$restrict_cmp_op_to(n,">=").$parse(p),D(b)?(e=l(b.$command().$split("DX",2),"map",[],function(M){var T;return null==M&&(M=n),(T=M)===n||null==T?n:T.$to_i()}),I=null==(u=F(e))[0]?n:u[0],C=D(E=C=null==u[1]?n:u[1])?E:10,w(this.$class(),"DX").$new(I,C,b.$modify_number(),b.$target_number())):n}),c(o,"$roll_emotion_table",function(){var R,p=this,u=n,e=n,t=n,I=n;return u=w(p.$class(),"POSITIVE_EMOTION_TABLE").$roll(p.randomizer),e=w(p.$class(),"NEGATIVE_EMOTION_TABLE").$roll(p.randomizer),R=p.randomizer.$roll_once(2)["$=="](1),t=D(R)?["\u25cb"+u.$content(),e.$content()]:[u.$content(),"\u25cb"+e.$content()],I=[p.$translate("DoubleCross.ET.name")+"("+u.$sum()+"-"+e.$sum()+")",t.$join(" - ")],L("Result").$new(I.$join(" \uff1e "))}),function(y,p){var u=[y].concat(p),e=r.$r(u);y.$private(),c(y,"$positive_emotion_table",function(t){return w(e("DiceTable"),"RangeTable").$new(e("I18n").$translate("DoubleCross.ET.positive.name",s(["locale"],{locale:t})),"1D100",[[i(1,5,!1),e("I18n").$translate("DoubleCross.ET.positive.items.1_5",s(["locale"],{locale:t}))],[i(6,10,!1),e("I18n").$translate("DoubleCross.ET.positive.items.6_10",s(["locale"],{locale:t}))],[i(11,15,!1),e("I18n").$translate("DoubleCross.ET.positive.items.11_15",s(["locale"],{locale:t}))],[i(16,20,!1),e("I18n").$translate("DoubleCross.ET.positive.items.16_20",s(["locale"],{locale:t}))],[i(21,25,!1),e("I18n").$translate("DoubleCross.ET.positive.items.21_25",s(["locale"],{locale:t}))],[i(26,30,!1),e("I18n").$translate("DoubleCross.ET.positive.items.26_30",s(["locale"],{locale:t}))],[i(31,35,!1),e("I18n").$translate("DoubleCross.ET.positive.items.31_35",s(["locale"],{locale:t}))],[i(36,40,!1),e("I18n").$translate("DoubleCross.ET.positive.items.36_40",s(["locale"],{locale:t}))],[i(41,45,!1),e("I18n").$translate("DoubleCross.ET.positive.items.41_45",s(["locale"],{locale:t}))],[i(46,50,!1),e("I18n").$translate("DoubleCross.ET.positive.items.46_50",s(["locale"],{locale:t}))],[i(51,55,!1),e("I18n").$translate("DoubleCross.ET.positive.items.51_55",s(["locale"],{locale:t}))],[i(56,60,!1),e("I18n").$translate("DoubleCross.ET.positive.items.56_60",s(["locale"],{locale:t}))],[i(61,65,!1),e("I18n").$translate("DoubleCross.ET.positive.items.61_65",s(["locale"],{locale:t}))],[i(66,70,!1),e("I18n").$translate("DoubleCross.ET.positive.items.66_70",s(["locale"],{locale:t}))],[i(71,75,!1),e("I18n").$translate("DoubleCross.ET.positive.items.71_75",s(["locale"],{locale:t}))],[i(76,80,!1),e("I18n").$translate("DoubleCross.ET.positive.items.76_80",s(["locale"],{locale:t}))],[i(81,85,!1),e("I18n").$translate("DoubleCross.ET.positive.items.81_85",s(["locale"],{locale:t}))],[i(86,90,!1),e("I18n").$translate("DoubleCross.ET.positive.items.86_90",s(["locale"],{locale:t}))],[i(91,95,!1),e("I18n").$translate("DoubleCross.ET.positive.items.91_95",s(["locale"],{locale:t}))],[i(96,100,!1),e("I18n").$translate("DoubleCross.ET.positive.items.96_100",s(["locale"],{locale:t}))]])}),c(y,"$negative_emotion_table",function(t){return w(e("DiceTable"),"RangeTable").$new(e("I18n").$translate("DoubleCross.ET.negative.name",s(["locale"],{locale:t})),"1D100",[[i(1,5,!1),e("I18n").$translate("DoubleCross.ET.negative.items.1_5",s(["locale"],{locale:t}))],[i(6,10,!1),e("I18n").$translate("DoubleCross.ET.negative.items.6_10",s(["locale"],{locale:t}))],[i(11,15,!1),e("I18n").$translate("DoubleCross.ET.negative.items.11_15",s(["locale"],{locale:t}))],[i(16,20,!1),e("I18n").$translate("DoubleCross.ET.negative.items.16_20",s(["locale"],{locale:t}))],[i(21,25,!1),e("I18n").$translate("DoubleCross.ET.negative.items.21_25",s(["locale"],{locale:t}))],[i(26,30,!1),e("I18n").$translate("DoubleCross.ET.negative.items.26_30",s(["locale"],{locale:t}))],[i(31,35,!1),e("I18n").$translate("DoubleCross.ET.negative.items.31_35",s(["locale"],{locale:t}))],[i(36,40,!1),e("I18n").$translate("DoubleCross.ET.negative.items.36_40",s(["locale"],{locale:t}))],[i(41,45,!1),e("I18n").$translate("DoubleCross.ET.negative.items.41_45",s(["locale"],{locale:t}))],[i(46,50,!1),e("I18n").$translate("DoubleCross.ET.negative.items.46_50",s(["locale"],{locale:t}))],[i(51,55,!1),e("I18n").$translate("DoubleCross.ET.negative.items.51_55",s(["locale"],{locale:t}))],[i(56,60,!1),e("I18n").$translate("DoubleCross.ET.negative.items.56_60",s(["locale"],{locale:t}))],[i(61,65,!1),e("I18n").$translate("DoubleCross.ET.negative.items.61_65",s(["locale"],{locale:t}))],[i(66,70,!1),e("I18n").$translate("DoubleCross.ET.negative.items.66_70",s(["locale"],{locale:t}))],[i(71,75,!1),e("I18n").$translate("DoubleCross.ET.negative.items.71_75",s(["locale"],{locale:t}))],[i(76,80,!1),e("I18n").$translate("DoubleCross.ET.negative.items.76_80",s(["locale"],{locale:t}))],[i(81,85,!1),e("I18n").$translate("DoubleCross.ET.negative.items.81_85",s(["locale"],{locale:t}))],[i(86,90,!1),e("I18n").$translate("DoubleCross.ET.negative.items.86_90",s(["locale"],{locale:t}))],[i(91,95,!1),e("I18n").$translate("DoubleCross.ET.negative.items.91_95",s(["locale"],{locale:t}))],[i(96,100,!1),e("I18n").$translate("DoubleCross.ET.negative.items.96_100",s(["locale"],{locale:t}))]]).$freeze()})}(r.get_singleton_class(o),_),x(_[0],"POSITIVE_EMOTION_TABLE",o.$positive_emotion_table("ja_jp").$freeze()),x(_[0],"NEGATIVE_EMOTION_TABLE",o.$negative_emotion_table("ja_jp").$freeze())},Opal.queue(function(r){var P,i,H,v,z,g,N,n,s,S=r.module,j=r.klass,x=r.const_set,q=r.send2,k=r.find_super,c=r.def,B=[],V=r.$$$;return r.top.$require("bcdice/game_system/DoubleCross"),P=B,i=s=[S(B[0],"BCDice")].concat(P),N=[S(s[0],"GameSystem")].concat(i),n=r.$r(N),H=N,z=[v=j(N[0],n("DoubleCross"),"DoubleCross_Korean")].concat(H),g=r.$r(z),x(z[0],"ID","DoubleCross:Korean"),x(z[0],"NAME","\ub354\ube14\ud06c\ub85c\uc2a42nd,3rd"),x(z[0],"SORT_KEY","\u56fd\u969b\u5316:Korean:\ub354\ube14\ud06c\ub85c\uc2a4"),x(z[0],"HELP_MESSAGE",'\u30fb\ud310\uc815 \ucee4\ub9e8\ub4dc\uff08xDX+y@c or xDXc+y\uff09\n\u3000"(\uac1c\uc218)DX(\uc218\uc815)@(\ud06c\ub9ac\ud2f0\uceec\uce58)" \ud639\uc740 "(\uac1c\uc218)DX(\ud06c\ub9ac\ud2f0\uceec\uce58)(\uc218\uc815)" \uc73c\ub85c \uc9c0\uc815\ud569\ub2c8\ub2e4.\n\u3000\uc218\uc815\uce58\ub3c4 \ubd99\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\u3000\uc608\uff0910dx\u3000\u300010dx+5@8\uff08OD tool\uc2dd)\u3000\u30005DX7+7-3\uff08\uc9c8\ud48d\ub178\ub3c4\uc2dd\uff09\n\u30fb\uac01\uc885\ud45c\n\u3000\u30fb\uac10\uc815\ud45c\uff08ET\uff09\n\u3000\u3000\ud3ec\uc9c0\ud2f0\ube0c\uc640 \ub124\uac70\ud2f0\ube0c \uc591\ucabd\uc744 \uad74\ub824, \uac89\uc73c\ub85c \ub098\ud0c0\ub294 \ucabd\uc5d0 O\ub97c \ubd99\uc5ec \ud45c\uc2dc\ud569\ub2c8\ub2e4.\n\u3000\u3000\ubb3c\ub860 \uc784\uc758\ub85c \uc815\ud558\ub294 \ubd80\ubd84\uc744 \ubcc0\uacbd\ud574\ub3c4 \uad1c\ucc2e\uc2b5\ub2c8\ub2e4.\n\u30fbD66\ub2e4\uc774\uc2a4 \uc788\uc74c\n'),v.$register_prefix_from_super_class(),c(v,"$initialize",function A(h){var a=this;return A.$$p=null,q(a,k(a,"initialize",A,!1,!0),"initialize",[h],null),a.locale="ko_kr"}),c(j(z[0],V(g("DoubleCross"),"DX"),"DX"),"$initialize",function a(f,d,m,o){var L=this;return a.$$p=null,q(L,k(L,"initialize",a,!1,!0),"initialize",[f,d,m,o],null),L.locale="ko_kr"}),x(z[0],"POSITIVE_EMOTION_TABLE",v.$positive_emotion_table("ko_kr").$freeze()),x(z[0],"NEGATIVE_EMOTION_TABLE",v.$negative_emotion_table("ko_kr").$freeze())})}}]);