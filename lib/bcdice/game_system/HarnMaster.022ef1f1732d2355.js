(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[4075],{6765:(z,M,p)=>{p(9993),Opal.queue(function(o){var q,x,F,$,b,l,L,U,y,H=o.module,R=o.klass,d=o.const_set,S=o.eqeq,m=o.truthy,h=o.rb_le,c=o.def,g=o.eqeqeq,v=[],e=o.nil;return q=v,x=y=[H(v[0],"BCDice")].concat(q),L=[H(y[0],"GameSystem")].concat(x),U=o.$r(L),F=L,b=[$=R(L[0],U("Base"),"HarnMaster")].concat(F),l=o.$r(b),$.$$prototype.randomizer=e,d(b[0],"ID","HarnMaster"),d(b[0],"NAME","\u30cf\u30fc\u30f3\u30de\u30b9\u30bf\u30fc"),d(b[0],"SORT_KEY","\u306f\u3042\u3093\u307e\u3059\u305f\u3042"),d(b[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\n\u30001D100<=XX \u306e\u5224\u5b9a\u6642\u306b\u81f4\u547d\u7684\u5931\u6557\u30fb\u6c7a\u5b9a\u7684\u6210\u529f\u3092\u5224\u5b9a\n\u30fb\u30b7\u30e7\u30c3\u30af\u5224\u5b9a\uff08SHKx\uff09\n\u3000\u4f8b\uff09SHK13,3\n\u30fb\u4eba\u578b\u7528\u3000\u4e2d\u6bb5\u547d\u4e2d\u90e8\u4f4d\u8868 (SLH)\uff0f\u4e0a\u6bb5\u547d\u4e2d\u90e8\u4f4d (SLHU)\uff0f\u4e0a\u6bb5\u547d\u4e2d\u90e8\u4f4d (SLHD)\n"),$.$register_prefix("SHK","SLH","SLHU","SLHD"),c($,"$result_1d100",function(t,n,a,r){return S(r,"?")?l("Result").$nothing():S(a,"<=")?m(h(t,r))?S(t["$%"](5),0)?l("Result").$critical("\u6c7a\u5b9a\u7684\u6210\u529f"):l("Result").$success("\u6210\u529f"):S(t["$%"](5),0)?l("Result").$fumble("\u81f4\u547d\u7684\u5931\u6557"):l("Result").$failure("\u5931\u6557"):e}),c($,"$eval_game_system_specific_command",function(t){var a=e,r=e,i=e,u=e,s=e,f=e;try{return a=e,g(/^SHK(\d*),(\d+)/i,r=t)?(i=l("Regexp").$last_match(1).$to_i(),u=l("Regexp").$last_match(2).$to_i(),a=this.$getCheckShockResult(u,i)):g(/SLH(U|D)?/i,r)?(s=l("Regexp").$last_match(1),a=this.$getStrikeLocationHuman(s)):a=e,a}catch(k){if(!o.rescue(k,[l("StandardError")]))throw k;f=k;try{return f.$message()}finally{o.pop_exception()}}}),c($,"$getCheckShockResult",function(t,n){var i,r=e;return"\u30b7\u30e7\u30c3\u30af\u5224\u5b9a(\u30c0\u30e1\u30fc\u30b8:"+t+", \u8010\u4e45\u529b:"+n+") \uff1e ("+(i=(r=this.randomizer.$roll_barabara(t,6)).$sum())+"["+r.$join(",")+"]) \uff1e "+(m(h(i,n))?"\u6210\u529f":"\u5931\u6557")}),c($,"$getStrikeLocationHuman",function(t){var i,u,n=this,a=e,r=e,s=e;return a="",r=e,g("U",i=t)?(a="\u547d\u4e2d\u90e8\u4f4d(\u4eba\u578b \u4e0a\u6bb5)",r=n.$getStrikeLocationHumanUpperTable()):g("D",i)?(a="\u547d\u4e2d\u90e8\u4f4d(\u4eba\u578b \u4e0b\u6bb5)",r=n.$getStrikeLocationHumanDownTable()):g(e,i)?(a="\u547d\u4e2d\u90e8\u4f4d(\u4eba\u578b \u4e2d\u6bb5)",r=n.$getStrikeLocationHumanNormalTable()):n.$raise("unknow atak type "+t),u=n.randomizer.$roll_once(100),s=n.$get_table_by_number(u,r),s=n.$getLocationSide(s,u),a+" \uff1e ("+u+")"+n.$getFaceLocation(s)}),c($,"$getLocationSide",function(t,n){var r=e;return m(t["$=~"](/^\*/))?(this.$debug("part has side",t),r=m(n["$odd?"]())?"\u5de6":"\u53f3",t.$sub(/\*/,r)):(this.$debug("part has NO side",t),t)}),c($,"$getFaceLocation",function(t){var n=this,a=e,r=e,i=e;return n.$debug("getFaceLocation part",t),m(t["$=~"](/\+$/))?(n.$debug("is Face"),a=[[15,"\u984e"],[30,"*\u76ee"],[64,"*\u982c"],[80,"\u9f3b"],[90,"*\u8033"],[100,"\u53e3"]],r=n.randomizer.$roll_once(100),i=n.$get_table_by_number(r,a),n.$debug("faceLocation",i),n.$debug("number",r),i=n.$getLocationSide(i,r),t.$sub(/\+$/," \uff1e ("+r+")"+i)):(n.$debug("is NOT Face"),t)}),c($,"$getStrikeLocationHumanUpperTable",function(){return[[15,"\u982d\u90e8"],[30,"\u9854+"],[45,"\u9996"],[57,"*\u80a9"],[69,"*\u4e0a\u8155"],[73,"*\u8098"],[81,"*\u524d\u8155"],[85,"*\u624b"],[95,"\u80f8\u90e8"],[100,"\u8179\u90e8"]]}),c($,"$getStrikeLocationHumanNormalTable",function(){return[[5,"\u982d\u90e8"],[10,"\u9854+"],[15,"\u9996"],[27,"*\u80a9"],[33,"*\u4e0a\u8155"],[35,"*\u8098"],[39,"*\u524d\u8155"],[43,"*\u624b"],[60,"\u80f8\u90e8"],[70,"\u8179\u90e8"],[74,"\u80a1\u9593"],[80,"*\u81c0\u90e8"],[88,"*\u817f"],[90,"*\u819d"],[96,"*\u811b"],[100,"*\u8db3"]]}),c($,"$getStrikeLocationHumanDownTable",function(){return[[6,"*\u524d\u8155"],[12,"*\u624b"],[19,"\u80f8\u90e8"],[29,"\u8179\u90e8"],[35,"\u80a1\u9593"],[49,"*\u81c0\u90e8"],[70,"*\u817f"],[78,"*\u819d"],[92,"*\u811b"],[100,"*\u8db3"]]})})}}]);