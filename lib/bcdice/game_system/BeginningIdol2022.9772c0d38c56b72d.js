(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[6466],{8381:(O,ee,E)=>{E(9993),Opal.queue(function($){var N,Q,Z,b,D,_,I,j,V,C,R=$.module,A=$.klass,q=$.const_set,G=$.send2,M=$.find_super,x=$.def,i=$.truthy,T=$.hash2,P=$.rb_ge,w=$.rb_le,a=$.rb_plus,H=$.rb_minus,y=$.send,K=$.neqeq,B=[],e=$.nil,F=$.$$$;return N=B,Q=C=[R(B[0],"BCDice")].concat(N),j=[R(C[0],"GameSystem")].concat(Q),V=$.$r(j),Z=j,D=[b=A(j[0],V("Base"),"BeginningIdol2022")].concat(Z),_=$.$r(D),(I=b.$$prototype).round_type=I.randomizer=e,q(D[0],"ID","BeginningIdol2022"),q(D[0],"NAME","\u30d3\u30ae\u30cb\u30f3\u30b0\u30a2\u30a4\u30c9\u30eb\uff082022\u5e74\u6539\u8a02\u7248\uff09"),q(D[0],"SORT_KEY","\u3072\u304d\u306b\u3093\u304f\u3042\u3044\u3068\u308b2022"),q(D[0],"HELP_MESSAGE","\u3053\u308c\u306f\u30012022\u5e74\u306b\u5927\u5224\u30b5\u30a4\u30ba\u3067\u767a\u58f2\u3055\u308c\u305f\u300e\u99c6\u3051\u51fa\u3057\u30a2\u30a4\u30c9\u30ebRPG \u30d3\u30ae\u30cb\u30f3\u30b0\u30a2\u30a4\u30c9\u30eb \u57fa\u672c\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\u300f\u306b\u5bfe\u5fdc\u3057\u305f\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\n\n\u30fb\u884c\u70ba\u5224\u5b9a\u3000BIn@c#f+m>=t\n\u3000nD6\u3092\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3057\u3001\u884c\u70ba\u5224\u5b9a\u306b\u6210\u529f\u3057\u305f\u304b\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\u30b9\u30da\u30b7\u30e3\u30eb\u3068\u30d5\u30a1\u30f3\u30d6\u30eb\u306e\u5224\u5b9a\u3082\u884c\u3044\u307e\u3059\u3002\n\u3000\u3000n: \u30c0\u30a4\u30b9\u6570\uff08\u7701\u7565\u6642 2)\n\u3000\u3000c: \u30b9\u30da\u30b7\u30e3\u30eb\u5024\uff08\u7701\u7565\u6642 12)\n\u3000\u3000f: \u30d5\u30a1\u30f3\u30d6\u30eb\u5024\uff08\u7701\u7565\u6642 2)\n\u3000\u3000m: \u4fee\u6b63\u5024\uff08\u7701\u7565\u53ef)\n\u3000\u3000t: \u76ee\u6a19\u5024\n\n\u30fb\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u5224\u5b9a\u3000PDn+m\n\u3000nD6\u3092\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3057\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u5024\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\u30d1\u30fc\u30d5\u30a7\u30af\u30c8\u30df\u30e9\u30af\u30eb\u3068\u30df\u30e9\u30af\u30eb\u306e\u5224\u5b9a\u3082\u884c\u3044\u307e\u3059\u3002\n\u3000\u3000n: \u30c0\u30a4\u30b9\u6570\n\u3000\u3000m: \u4fee\u6b63\u5024\uff08\u7701\u7565\u53ef)\n\n\u30fb\u30b7\u30f3\u30d5\u30a9\u30cb\u30fc\u3000xxxPDn+m\n\u3000nD6\u3092\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3057\u3001\u5834\u306b\u6b8b\u3063\u3066\u3044\u308b\u30c0\u30a4\u30b9\u3092\u52a0\u5473\u3057\u3066\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u5024\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\n\u3000\u30d1\u30fc\u30d5\u30a7\u30af\u30c8\u30df\u30e9\u30af\u30eb\u3068\u30df\u30e9\u30af\u30eb\u30b7\u30f3\u30af\u30ed\u306e\u5224\u5b9a\u3082\u884c\u3044\u307e\u3059\u3002\n\u3000\u3000xxx: \u5834\u306b\u6b8b\u3063\u3066\u3044\u308b\u30c0\u30a4\u30b9\u306e\u51fa\u76ee\u3092\u5217\u6319\u3057\u305f\u3082\u306e\n\u3000\u3000n: \u30c0\u30a4\u30b9\u6570\n\u3000\u3000m: \u4fee\u6b63\u5024\uff08\u7701\u7565\u53ef)\n"),x(b,"$initialize",function k(l){var r=this;return k.$$p=null,G(r,M(r,"initialize",k,!1,!0),"initialize",[l],null),r.sort_add_dice=!0,r.d66_sort_type=F(_("D66SortType"),"ASC")}),b.$register_prefix("BI","PD","[1-6]+PD"),x(b,"$eval_game_system_specific_command",function(l){var r,n,u=this;return i(r=i(n=u.$roll_skill_check(l))?n:u.$roll_performance_check(l))?r:u.$roll_symphony_check(l)}),b.$private(),x(b,"$roll_skill_check",function(l){var n=e,m=e,t=e,d=e,s=e,f=e,o=e,h=e,g=e,c=e,p=e;return n=F(_("Command"),"Parser").$new("BI",T(["round_type"],{round_type:this.round_type})).$enable_suffix_number().$enable_critical().$enable_fumble().$restrict_cmp_op_to(">=").$parse(l),i(n)?(m=i(t=n.$suffix_number())?t:2,d=i(t=n.$critical())?t:12,s=i(t=n.$fumble())?t:2,o=(f=this.randomizer.$roll_barabara(m,6).$sort()).$sum(),h=P(o,d),g=i(t=h["$!"]())?w(o,s):t,c=a(o,n.$modify_number()),(p=i(h)?_("Result").$critical("\u30b9\u30da\u30b7\u30e3\u30eb(PC\u306f\u3010\u601d\u3044\u51fa\u3011\u30921\u3064\u7372\u5f97\u3059\u308b)"):i(g)?_("Result").$fumble("\u30d5\u30a1\u30f3\u30d6\u30eb(\u3010\u601d\u3044\u51fa\u3011\u30921\u3064\u7372\u5f97\u3057\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\u3092\u632f\u308b)"):i(P(c,n.$target_number()))?_("Result").$success("\u6210\u529f"):_("Result").$failure("\u5931\u6557"))["$text="]("("+n+") \uff1e "+o+"["+f.$join(",")+"]"+_("Format").$modifier(n.$modify_number())+" \uff1e "+c+" \uff1e "+p.$text()),p):e}),x(b,"$roll_performance_check",function(l){var r=e,n=e,m=e,t=e,d=e,s=e,f=e,o=e,h=e,g=e,c=e;return r=/^PD(\d+)([+-]\d+)?$/.$match(l),!i(r)||(n=r["$[]"](1).$to_i(),m=r["$[]"](2).$to_i(),t=P(n,7),d=i(t)?6:n,s=i(t)?H(n,d):0,i(w(d,0)))?e:(f=this.randomizer.$roll_barabara(d,6).$sort(),o=this.$select_uniqs(f).$sort(),h=o["$=="]([1,2,3,4,5,6]),g=o["$empty?"](),c=i(h)?"\u3010\u30d1\u30fc\u30d5\u30a7\u30af\u30c8\u30df\u30e9\u30af\u30eb\u3011"+a(a(30,s),m):i(g)?"\u3010\u30df\u30e9\u30af\u30eb\u3011"+a(a(10,s),m):a(a(o.$sum(),s),m).$to_s(),i(t)&&(c=a(c," (\u30a8\u30af\u30b9\u30c6\u30f3\u30b7\u30e7\u30f3: "+s+"\u500b\u307e\u3067\u632f\u308a\u306a\u304a\u3057\u53ef\u80fd)")),y(_("Result").$new(),"tap",[],function(v){var z,S;return null==v&&(v=e),v["$critical="](i(S=h)?S:g),z=[["("+l+")","\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u5224\u5b9a","["+f.$join(",")+"]"+_("Format").$modifier(s)+_("Format").$modifier(m),K(f.$size(),o.$size())?"["+o.$join(",")+"]"+_("Format").$modifier(s)+_("Format").$modifier(m):e,c].$compact().$join(" \uff1e ")],y(v,"text=",z),z[z.length-1]}))}),x(b,"$select_uniqs",function(l){return y(y(y(l,"group_by",[],"itself".$to_proc()).$to_a(),"select",[],function(r,n){return null==r&&(r=e),null==n&&(n=e),n.$size()["$=="](1)}),"map",[],function(r,n){return null==r&&(r=e),null==n&&(n=e),r})}),x(b,"$roll_symphony_check",function(l){var r=e,n=e,m=e,t=e,d=e,s=e,f=e,o=e,h=e;return r=/^([1-6]+)PD([1-6])([+-]\d+)?$/.$match(l),i(r)?(n=y(r["$[]"](1).$chars(),"map",[],"to_i".$to_proc()).$sort(),m=r["$[]"](2).$to_i(),t=r["$[]"](3).$to_i(),d=this.randomizer.$roll_barabara(m,6).$sort(),s=this.$select_uniqs(a(n,d)).$sort(),f=s["$=="]([1,2,3,4,5,6]),o=s["$empty?"](),h=i(f)?"\u3010\u30d1\u30fc\u30d5\u30a7\u30af\u30c8\u30df\u30e9\u30af\u30eb\u3011"+a(30,t):i(o)?"\u3010\u30df\u30e9\u30af\u30eb\u30b7\u30f3\u30af\u30ed\u3011"+a(20,t):a(s.$sum(),t).$to_s(),y(_("Result").$new(),"tap",[],function(c){var p,v;return null==c&&(c=e),c["$critical="](i(v=f)?v:o),p=[["("+l+")","\u30b7\u30f3\u30d5\u30a9\u30cb\u30fc","["+n.$join(",")+"],["+d.$join(",")+"]"+_("Format").$modifier(t),"["+s.$join(",")+"]"+_("Format").$modifier(t),h].$join(" \uff1e ")],y(c,"text=",p),p[p.length-1]})):e})})}}]);