(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[481],{6706:(K,L,D)=>{D(9993),Opal.queue(function(r){var G,C,H,o,d,v,b,M,y,P=r.module,T=r.klass,m=r.const_set,c=r.truthy,f=r.def,g=r.rb_le,z=r.rb_minus,R=r.rb_plus,E=r.rb_divide,p=r.rb_times,k=[],e=r.nil;return G=k,C=y=[P(k[0],"BCDice")].concat(G),b=[P(y[0],"GameSystem")].concat(C),M=r.$r(b),H=b,d=[o=T(b[0],M("Base"),"PersonaO")].concat(H),v=r.$r(d),o.$$prototype.randomizer=e,m(d[0],"ID","PersonaO"),m(d[0],"NAME","\u30da\u30eb\u30bd\u30caTRPG-O"),m(d[0],"SORT_KEY","\u3078\u308b\u305d\u306aTRPGO"),m(d[0],"HELP_MESSAGE","\u30fb\u57fa\u672c\u5224\u5b9a\n\u3000PTx@y\u3000x\uff1a\u76ee\u6a19\u5024\u3001y\uff1a\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\uff08\u7701\u7565\u6642\u306f5\uff09\n\u3000\u4f8b\uff09PT60\u3000PT90@10\n\n\u30fb\u30c0\u30e1\u30fc\u30b8\u8a08\u7b97\n\u3000nPD+(x+y*2)%(z-a)-b\u3000n\uff1a\u30c0\u30a4\u30b9\u500b\u6570\u3001x\uff1a\u30b9\u30ad\u30eb\u56fa\u5b9a\u5024\u3001y\uff1a\u30dc\u30fc\u30ca\u30b9\u3001z\uff1a\u30d0\u30d5\u500d\u7387\u3001a\uff1a\u8010\u6027\u3001b\uff1a\u6575\u9632\u5fa1\u529b\n\u3000nPD+(x+y*2)\u307e\u3067\u304c\u30b9\u30ad\u30eb\u306b\u3088\u308b\u7d20\u306e\u30c0\u30e1\u30fc\u30b8\u3001z\u304a\u3088\u3073a\u306f\u8a08\u7b97\u5f0f\u3092\u5165\u308c\u3066\u3088\u3044\u3002\n\u3000\n\u3000\u4f8b\uff09\u30bd\u30cb\u30c3\u30af\u30d1\u30f3\u30c1\u3001\u529bB2\u70b9\u3001\n\u3000\u3000\u3000\u30bf\u30eb\u30ab\u30b8\u30e3\u304c\u304b\u304b\u3063\u3066\u304a\u308a\u3001\u6253\u6483\u8010\u6027\u3042\u308a\u3001\n\u3000\u3000\u3000\u76ee\u6a19\u306e\u7269\u7406\u9632\u5fa1\u529b\u306f2\u70b9\n\u3000\u3000\u3000\n\u3000\u3000\u30002PD+(20+2*2)%(100+50-50)-2\n"),o.$register_prefix("PT","\\d+PD"),f(o,"$eval_game_system_specific_command",function(l){var t;return c(t=this.$roll_attack(l))?t:this.$roll_damage(l)}),o.$private(),f(o,"$roll_attack",function(l){var n,$=e,i=e,s=e,u=e,_=e,a=e;return $=/^PT(-?\d+)?(@(-?\d+))?$/i.$match(l),c($)?(i=$["$[]"](1).$to_i(),s=c(u=(n=$["$[]"](3))===e||null==n?e:n.$to_i())?u:5,_=this.randomizer.$roll_once(100),(a=c(g(_,s))?v("Result").$critical("\u30af\u30ea\u30c6\u30a3\u30ab\u30eb"):c(g(_,i))?v("Result").$success("\u6210\u529f"):v("Result").$failure("\u5931\u6557"))["$text="]("D100<="+i+"@"+s+" \uff1e "+_+" \uff1e "+a.$text()),a):e}),f(o,"$roll_damage",function(l){var t=e,$=e,i=e,s=e,u=e,_=e,a=e,x=e;return t=/^(\d+)PD\+(-?\d+)%(-?\d+)-(\d+)$/i.$match(l),c(t)?($=t["$[]"](1).$to_i(),i=t["$[]"](2).$to_i(),s=t["$[]"](3).$to_i(),u=t["$[]"](4).$to_i(),a=(_=this.randomizer.$roll_barabara($,10)).$sum(),x=z(R(a,E(p(s,i),100).$to_i()),u),$+"D10+"+i+"\uff0a"+s+"%-"+u+" \uff1e ["+_.$join(",")+"]+"+i+"\uff0a"+s+"%-"+u+" \uff1e "+x+" \u30c0\u30e1\u30fc\u30b8\uff01"):e})})}}]);