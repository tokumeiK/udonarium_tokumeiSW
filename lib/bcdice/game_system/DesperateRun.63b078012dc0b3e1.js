(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[148],{8999:(be,he,ve)=>{ve(9993),Opal.modules["i18n/backend/fallbacks"]=function(e){var N,n,r,s,a,d,G=e.module,M=e.class_variable_set,c=e.truthy,P=e.class_variable_get,R=e.def,E=e.send,F=e.send2,q=e.find_super,S=e.hash2,A=e.find_block_super,T=e.neqeq,H=e.thrower,W=e.return_val,U=[],B=e.nil,x=e.$$$;return N=U,d=[a=G(U[0],"I18n")].concat(N),M(d[0],"@@fallbacks",B),n=e.get_singleton_class(a),r=[n].concat(d),s=e.$r(r),R(n,"$fallbacks",function(){var w=B;return M(r[1],"@@fallbacks",c(null!=r[1].$$cvars["@@fallbacks"]?"class variable":B)&&c(w=P(r[1],"@@fallbacks",!1))?w:x(x(s("I18n"),"Locale"),"Fallbacks").$new()),c(w=s("Thread").$current()["$[]"]("i18n_fallbacks"))?w:P(r[1],"@@fallbacks",!1)}),R(n,"$fallbacks=",function(C){var w;return M(r[1],"@@fallbacks",c(C["$is_a?"](s("Array")))?x(x(s("I18n"),"Locale"),"Fallbacks").$new(C):C),w=["i18n_fallbacks",P(r[1],"@@fallbacks",!1)],E(s("Thread").$current(),"[]=",w),w[w.length-1]}),function(n,D){var C,w,g,f,s=[G(n,"Backend")].concat(D);return C=s,g=[w=G(s[0],"Fallbacks")].concat(C),f=e.$r(g),R(w,"$translate",function y(m,h,u){try{var v=H("return"),_=y.$$p||B,I=this,p=B,o=B;return y.$$p=null,null==u&&(u=f("EMPTY_HASH")),c(u.$fetch("fallback",!0))?c(u["$[]"]("fallback_in_progress"))?F(I,q(I,"translate",y,!1,!0),"translate",[m,h,u],_):(c(u["$[]"]("default"))&&(p=I["$extract_non_symbol_default!"](u)),o=u.$merge(S(["fallback_in_progress"],{fallback_in_progress:!0})),E(f("I18n").$fallbacks()["$[]"](m),"each",[],function i(k){var t=null==i.$$s?this:i.$$s;null==k&&(k=B);try{return E(t,"catch",["exception"],function l(){var $=null==l.$$s?this:l.$$s,j=B;if(j=F($,A($,"translate",l.$$def||i.$$def||y,!1,!1),"translate",[k,h,o],null),c(j["$nil?"]()))return B;T(m.$to_s(),k.$to_s())&&$.$on_fallback(m,k,h,u),v.$throw(j)},{$$s:t,$$ret:v})}catch(l){if(!e.rescue(l,[x(f("I18n"),"InvalidLocale")]))throw l;try{return B}finally{e.pop_exception()}}},{$$s:I}),c(u["$key?"]("default"))&&c(u["$[]"]("default")["$nil?"]())?B:c(p)?F(I,q(I,"translate",y,!1,!0),"translate",[m,B,u.$merge(S(["default"],{default:p}))],null):I.$throw("exception",x(f("I18n"),"MissingTranslation").$new(m,h,u))):F(I,q(I,"translate",y,!1,!0),"translate",[m,h,u],_)}catch(i){if(i===v)return i.$v;throw i}},-3),R(w,"$extract_non_symbol_default!",function(m){var u,h=B;return h=[m["$[]"]("default")].$flatten(),u=E(h,"detect",[],function(_){return null==_&&(_=B),_["$is_a?"](f("Symbol"))["$!"]()}),c(u)&&m["$[]="]("default",h["$[]"](0,h.$index(u))),u}),R(w,"$exists?",function y(m,h,u){try{var v=H("return"),_=y.$$p||B,I=this;return y.$$p=null,null==u&&(u=f("EMPTY_HASH")),c(u.$fetch("fallback",!0))?(E(f("I18n").$fallbacks()["$[]"](m),"each",[],function p(o){var i=null==p.$$s?this:p.$$s;null==o&&(o=B);try{if(!c(F(i,A(i,"exists?",p.$$def||y,!1,!1),"exists?",[o,h],null)))return B;v.$throw(!0)}catch(k){if(!e.rescue(k,[x(f("I18n"),"InvalidLocale")]))throw k;try{return B}finally{e.pop_exception()}}},{$$s:I,$$ret:v}),!1):F(I,q(I,"exists?",y,!1,!0),"exists?",[m,h,u],_)}catch(p){if(p===v)return p.$v;throw p}},-3),w.$private(),R(w,"$on_fallback",W(B))}(d[0],d)},Opal.modules["bcdice/randomizer"]=function(e){var a,b,C,w,g,f,n,D,M=e.klass,c=e.const_set,P=e.def,R=e.truthy,E=e.rb_gt,F=e.rb_plus,q=e.rb_le,S=e.send,A=e.rb_minus,T=e.eqeq,H=e.rb_times,W=e.eqeqeq,U=e.rb_ge,B=[],x=e.nil,V=e.$$$;return a=B,n=[(0,e.module)(B[0],"BCDice")].concat(a),D=e.$r(n),b=n,w=[C=M(n[0],null,"Randomizer")].concat(b),g=e.$r(w),(f=C.$$prototype).rand_results=f.detailed_rand_results=x,c(w[0],"UPPER_LIMIT_DICE_TIMES",200),c(w[0],"UPPER_LIMIT_DICE_SIDES",1e4),c(w[0],"UPPER_LIMIT_RANDS",1e4),P(C,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),C.$attr_reader("rand_results"),C.$attr_reader("detailed_rand_results"),c(w[0],"DetailedRandResult",g("Struct").$new("kind","sides","value")),P(C,"$roll_barabara",function(m,h){var u=this;return R(E(F(u.rand_results.$size(),m),g("UPPER_LIMIT_RANDS")))&&u.$raise(g("TooManyRandsError")),R(q(m,0))||R(E(m,g("UPPER_LIMIT_DICE_TIMES")))?[]:S(g("Array"),"new",[m],function v(){return(null==v.$$s?this:v.$$s).$roll_once(h)},{$$s:u})}),P(C,"$roll_sum",function(m,h){return this.$roll_barabara(m,h).$sum()}),P(C,"$roll_once",function(m){var u=x;return R(q(m,0))||R(E(m,g("UPPER_LIMIT_DICE_SIDES")))?0:(u=this.$rand_inner(m),this.$push_to_detail("normal",m,u),u)}),P(C,"$roll_index",function(m){return A(this.$roll_once(m),1)}),P(C,"$roll_tens_d10",function(){var u,h=x;return h=this.$rand_inner(10),T(h,10)&&(h=0),u=H(h,10),this.$push_to_detail("tens_d10",10,u),u}),P(C,"$roll_d9",function(){var h;return h=A(this.$rand_inner(10),1),this.$push_to_detail("d9",10,h),h}),P(C,"$roll_d66",function(m){var v,u=x;return u=S(g("Array"),"new",[2],function _(){return(null==_.$$s?this:_.$$s).$roll_once(6)},{$$s:this}),W(V(g("D66SortType"),"ASC"),v=m)?u["$sort!"]():W(V(g("D66SortType"),"DESC"),v)&&u["$sort!"]()["$reverse!"](),F(H(u["$[]"](0),10),u["$[]"](1))}),C.$private(),P(C,"$rand_inner",function(m){var u,h=this;return R(U(h.rand_results.$size(),g("UPPER_LIMIT_RANDS")))&&h.$raise(g("TooManyRandsError")),u=h.$random(m),h.rand_results["$<<"]([u,m]),u}),P(C,"$random",function(m){return F(g("Kernel").$rand(m),1)}),P(C,"$push_to_detail",function(m,h,u){var _;return _=g("DetailedRandResult").$new(m,h,u),this.detailed_rand_results.$push(_)}),M(n[0],D("StandardError"),"TooManyRandsError"),x},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var S,W,N,a,d,n,D,B,T,G=e.module,M=e.klass,c=e.def,P=e.truthy,R=e.return_val,E=[],F=e.nil;return S=E,W=T=[G(E[0],"BCDice")].concat(S),N=B=[G(T[0],"DiceTable")].concat(W),d=[a=M(B[0],null,"RollResult")].concat(N),n=e.$r(d),(D=a.$$prototype).table_name=D.value=D.body=F,c(a,"$initialize",function(s,b,C){var w=this;return w.table_name=s,w.value=b,w.body=C}),a.$attr_reader("table_name"),a.$attr_reader("value"),a.$attr_reader("body"),c(a,"$to_s",function(){var s=this;return s.table_name+"("+s.value+") \uff1e "+s.body}),c(a,"$last_body",function(){var s=this;return P(s.body["$is_a?"](n("RollResult")))?s.body.$last_body():s.body}),c(a,"$empty?",R(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var S,W,N,a,d,n,D,B,T,G=e.module,M=e.klass,c=e.truthy,P=e.def,R=e.rb_minus,E=[],F=e.nil;return S=E,W=T=[G(E[0],"BCDice")].concat(S),N=B=[G(T[0],"DiceTable")].concat(W),d=[a=M(B[0],null,"ChainTable")].concat(N),n=e.$r(d),(D=a.$$prototype).times=D.sides=D.items=D.name=F,P(a,"$initialize",function(s,b,C){var w=this,g=F;return w.name=s,w.items=C.$freeze(),g=/(\d+)D(\d+)/i.$match(b),c(g)||w.$raise(n("ArgumentError"),"Unexpected table type: "+b),w.times=g["$[]"](1).$to_i(),w.sides=g["$[]"](2).$to_i()}),P(a,"$roll",function(s){var C,w,b=this,g=F;return C=s.$roll_sum(b.times,b.sides),w=R(C,b.times),g=b.items["$[]"](w),c(g["$respond_to?"]("roll"))&&(g=g.$roll(s)),n("RollResult").$new(b.name,C,g)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var H,x,n,D,r,s,b,N,U,G=e.module,M=e.klass,c=e.hash2,P=e.defs,R=e.def,E=e.rb_plus,F=e.rb_times,q=e.rb_minus,S=[],A=e.nil;return H=S,x=U=[G(S[0],"BCDice")].concat(H),n=N=[G(U[0],"DiceTable")].concat(x),r=[D=M(N[0],null,"D66GridTable")].concat(n),s=e.$r(r),(b=D.$$prototype).name=b.items=A,P(D,"$from_i18n",function(w,g){var y=A;return y=s("I18n").$t(w,c(["locale","raise"],{locale:g,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("items"))}),R(D,"$initialize",function(w,g){return this.name=w,this.items=g.$freeze()}),R(D,"$roll",function(w){var f,y,m,h,u;return f=w.$roll_once(6),y=w.$roll_once(6),m=E(F(f,10),y),h=q(f,1),u=q(y,1),s("RollResult").$new(this.name,m,this.items["$[]"](h)["$[]"](u))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var A,U,d,n,D,r,x,V,H,G=e.module,M=e.klass,c=e.hash2,P=e.defs,R=e.def,F=[],q=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),A=F,U=H=[G(F[0],"BCDice")].concat(A),x=[G(H[0],"DiceTable")].concat(U),V=e.$r(x),d=x,D=[n=M(x[0],V("D66GridTable"),"D66HalfGridTable")].concat(d),r=e.$r(D),P(n,"$from_i18n",function(b,C){var g=q;return g=r("I18n").$t(b,c(["locale","raise"],{locale:C,raise:!0})),this.$new(g["$[]"]("name"),g["$[]"]("items_1_2_3"),g["$[]"]("items_4_5_6"))}),R(n,"$initialize",function(b,C,w){return this.name=b,this.items=[C,C,C,w,w,w].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var A,U,d,n,D,r,x,V,H,G=e.module,M=e.klass,c=e.hash2,P=e.defs,R=e.def,F=[],q=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),A=F,U=H=[G(F[0],"BCDice")].concat(A),x=[G(H[0],"DiceTable")].concat(U),V=e.$r(x),d=x,D=[n=M(x[0],V("D66GridTable"),"D66OneThirdTable")].concat(d),r=e.$r(D),P(n,"$from_i18n",function(b,C){var g=q;return g=r("I18n").$t(b,c(["locale","raise"],{locale:C,raise:!0})),this.$new(g["$[]"]("name"),g["$[]"]("items_1_2"),g["$[]"]("items_3_4"),g["$[]"]("items_5_6"))}),R(n,"$initialize",function(b,C,w,g){return this.name=b,this.items=[C,C,w,w,g,g].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var U,N,r,s,b,C,w,d,x,G=e.module,M=e.klass,c=e.hash2,P=e.defs,R=e.def,E=e.eqeqeq,F=e.rb_plus,q=e.rb_times,S=e.truthy,A=[],T=e.nil,H=e.$$$;return U=A,N=x=[G(A[0],"BCDice")].concat(U),r=d=[G(x[0],"DiceTable")].concat(N),b=[s=M(d[0],null,"D66Table")].concat(r),C=e.$r(b),(w=s.$$prototype).sort_type=w.items=w.name=T,P(s,"$from_i18n",function(f,y){var u,h=T;return h=C("I18n").$t(f,c(["locale"],{locale:y})),u=C("D66SortType").$const_get(h["$[]"]("d66_sort_type")),this.$new(h["$[]"]("name"),u,h["$[]"]("items"))}),R(s,"$initialize",function(f,y,m){var h=this;return h.name=f,h.sort_type=y,h.items=m.$freeze()}),R(s,"$roll",function(f){var y=this,m=T,h=T,u=T,v=T;return m=f.$roll_barabara(2,6),E(H(C("D66SortType"),"ASC"),h=y.sort_type)?m["$sort!"]():E(H(C("D66SortType"),"DESC"),h)&&m["$sort!"]()["$reverse!"](),u=F(q(m["$[]"](0),10),m["$[]"](1)),v=S(h=y.items["$[]"](u))?h:y.items["$[]"](u.$to_s()),S(v["$respond_to?"]("roll"))&&(v=v.$roll(f)),C("RollResult").$new(y.name,u,v)}),R(s,"$choice",function(f){return C("RollResult").$new(this.name,f,this.items["$[]"](f))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){var B,a,n,D,V,G=e.module,M=e.klass,c=e.hash2,P=e.send,R=e.to_ary,E=e.rb_plus,F=e.rb_times,q=e.send2,S=e.find_super,A=e.def,H=[],W=e.nil;return e.top.$require("bcdice/dice_table/d66_table"),B=H,a=V=[G(H[0],"BCDice")].concat(B),n=[G(V[0],"DiceTable")].concat(a),D=e.$r(n),A(M(n[0],D("D66Table"),"D66LeftRangeTable"),"$initialize",function C(w,g,f){var h;return C.$$p=null,h=c([],{}),P(f,"each",[],function(v){var _,o;return null==v&&(v=W),_=R(v),o=null==_[1]?W:_[1],P(null==_[0]?W:_[0],"each",[],function(k){return null==k&&(k=W),P(o,"each_with_index",[],function(l,$){var j,Z;return null==l&&(l=W),null==$&&($=W),Z=E(F(k,10),E($,1)),P(h,"[]=",j=[Z,l]),j[j.length-1]})})}),q(this,S(this,"initialize",C,!1,!0),"initialize",[w,g,h],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var W,V,D,r,s,b,C,a,B,G=e.module,M=e.klass,c=e.hash2,P=e.defs,R=e.def,E=e.truthy,F=e.rb_minus,q=e.rb_plus,S=e.rb_times,A=[],T=e.nil;return W=A,V=B=[G(A[0],"BCDice")].concat(W),D=a=[G(B[0],"DiceTable")].concat(V),s=[r=M(a[0],null,"D66ParityTable")].concat(D),b=e.$r(s),(C=r.$$prototype).odd=C.even=C.name=T,P(r,"$from_i18n",function(g,f){var m=T;return m=b("I18n").$t(g,c(["locale","raise"],{locale:f,raise:!0})),this.$new(m["$[]"]("name"),m["$[]"]("odd"),m["$[]"]("even"))}),R(r,"$initialize",function(g,f,y){var m=this;return m.name=g,m.odd=f.$freeze(),m.even=y.$freeze()}),R(r,"$roll",function(g){var m,u,v,f=this,y=T;return y=g.$roll_once(6),m=g.$roll_once(6),u=(E(y["$odd?"]())?f.odd:f.even)["$[]"](F(m,1)),v=q(S(y,10),m),b("RollResult").$new(f.name,v,u)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var A,U,a,d,n,D,r,x,H,G=e.module,M=e.klass,c=e.def,P=e.rb_plus,R=e.rb_times,E=e.send,F=[],q=e.nil;return A=F,U=H=[G(F[0],"BCDice")].concat(A),a=x=[G(H[0],"DiceTable")].concat(U),n=[d=M(x[0],null,"D66RangeTable")].concat(a),D=e.$r(n),(r=d.$$prototype).items=r.name=q,c(d,"$initialize",function(b,C){return this.name=b,this.items=C.$freeze()}),c(d,"$roll",function(b){var w,g,f,y=q;return w=b.$roll_once(6),g=b.$roll_once(6),f=P(R(w,10),g),y=E(this.items,"find",[],function(h){return null==h&&(h=q),h["$[]"](0)["$include?"](f)}),D("RollResult").$new(this.name,f,y["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function(e){var W,V,D,r,s,b,C,a,B,G=e.module,M=e.klass,c=e.const_set,P=e.send,R=e.truthy,E=e.def,F=e.eqeqeq,q=e.rb_times,S=e.rb_plus,A=[],T=e.nil;return W=A,V=B=[G(A[0],"BCDice")].concat(W),D=a=[G(B[0],"DiceTable")].concat(V),s=[r=M(a[0],null,"RangeTable")].concat(D),b=e.$r(s),(C=r.$$prototype).name=C.items=C.num_of_dice=C.num_of_sides=C.formatter=T,c(s[0],"RollResult",P(b("Struct"),"new",["sum","values","content","formatted"],function w(){return(null==w.$$s?this:w.$$s).$alias_method("to_s","formatted")},{$$s:r})),c(s[0],"Item",b("Struct").$new("range","content")),c(s[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),c(s[0],"DEFAULT_FORMATTER",P(r,"lambda",[],function(g,f){return null==g&&(g=T),null==f&&(f=T),g.$name()+"("+f.$sum()+") \uff1e "+f.$content()})),r.$attr_reader("name"),r.$attr_reader("num_of_dice"),r.$attr_reader("num_of_sides"),E(r,"$initialize",function w(g,f,y){var u,m=w.$$p||T,h=this,v=T;return w.$$p=null,h.name=g.$freeze(),h.formatter=R(u=m)?u:b("DEFAULT_FORMATTER"),v=b("DICE_ROLL_METHOD_RE").$match(f),R(v)||h.$raise(b("ArgumentError"),h.name+": invalid dice roll method: "+f),h.num_of_dice=v["$[]"](1).$to_i(),h.num_of_sides=v["$[]"](2).$to_i(),h.$store(y)}),E(r,"$fetch",function(g){var y,f=this;return y=P(f.items,"find",[],function(h){return null==h&&(h=T),h.$range()["$include?"](g)}),R(y)||f.$raise(b("RangeError"),f.name+": value is out of range: "+g),y}),E(r,"$roll",function(g){var m,f=this,y=T,h=T;return m=(y=g.$roll_barabara(f.num_of_dice,f.num_of_sides)).$sum(),(h=b("RollResult").$new(m,y,f.$fetch(m).$content()))["$formatted="](f.formatter["$[]"](f,h)),h}),r.$private(),E(r,"$store",function(g){var y,m,f=this;return y=P(g,"map",[],function h(u,v){return null==u&&(u=T),null==v&&(v=T),[(null==h.$$s?this:h.$$s).$coerce_to_int_range(u),v]},{$$s:f}),m=P(y,"sort_by",[],function(u,v){return null==u&&(u=T),null==v&&(v=T),u.$min()}),f.$assert_min_sum_is_covered(m),f.$assert_max_sum_is_covered(m),f.$assert_no_gap_or_overlap_in_ranges(m),f.items=P(m,"map",[],function(u,v){return null==u&&(u=T),null==v&&(v=T),b("Item").$new(u,v.$freeze()).$freeze()}).$freeze(),f}),E(r,"$coerce_to_int_range",function(g){var y;return F(b("Integer"),y=g)?b("Range").$new(g,g):F(b("Range"),y)&&R(g.$begin()["$is_a?"](b("Integer")))&&R(g.$end()["$is_a?"](b("Integer")))?g:this.$raise(b("TypeError"),this.name+": "+g+" ("+g.$class()+") must be an Integer or a Range with Integers ")}),E(r,"$assert_min_sum_is_covered",function(g){var y,f=this,m=T;return y=f.num_of_dice,m=g.$first()["$[]"](0),R(m["$include?"](y))||f.$raise(b("RangeError"),f.name+": min value ("+y+") is not covered: "+m),f}),E(r,"$assert_max_sum_is_covered",function(g){var y,f=this,m=T;return y=q(f.num_of_dice,f.num_of_sides),m=g.$last()["$[]"](0),R(m["$include?"](y))||f.$raise(b("RangeError"),f.name+": max value ("+y+") is not covered: "+m),f}),E(r,"$assert_no_gap_or_overlap_in_ranges",function(g){return P(g,"each_cons",[2],function y(m,h){var I,p,u=null==y.$$s?this:y.$$s,v=T,_=T;return null==u.name&&(u.name=T),null==m&&(m=T),null==h&&(h=T),v=m["$[]"](0),_=h["$[]"](0),I=v.$max(),p=S(I,1),R(_["$include?"](I))&&u.$raise(b("RangeError"),u.name+": Range overlap: "+v+" and "+_),R(_["$include?"](p))?T:u.$raise(b("RangeError"),u.name+": Range gap: "+v+" and "+_)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var T,B,d,b,C,w,g,D,V,W,G=e.module,M=e.klass,c=e.send,P=e.def,R=e.rb_minus,E=e.return_ivar,F=[],q=e.nil,S=e.$$$;return T=F,B=W=[G(F[0],"BCDice")].concat(T),d=V=[G(W[0],"DiceTable")].concat(B),b=D=[M(V[0],null,"SaiFicSkillTable")].concat(d),w=[C=M(D[0],null,"Category")].concat(b),g=e.$r(w),P(C,"$initialize",function(y,m,h,u){var v=this;return v.name=y,v.skills=c(m.$map(),"with_index",[2],function(I,p){return null==I&&(I=q),null==p&&(p=q),S(g("SaiFicSkillTable"),"Skill").$new(y,I,h,p,u)}),v.dice=h}),P(C,"$roll",function(y){return this.$skills()["$[]"](R(y.$roll_sum(2,6),2))}),P(C,"$to_s",E("name")),C.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var q,H,V,D,r,a,U,A,G=e.module,M=e.klass,c=e.def,P=e.hash2,R=[],E=e.nil;return q=R,H=A=[G(R[0],"BCDice")].concat(q),V=U=[G(A[0],"DiceTable")].concat(H),a=[M(U[0],null,"SaiFicSkillTable")].concat(V),(r=(D=M(a[0],null,"Skill")).$$prototype).s_format=r.category_dice=r.row_dice=r.category_name=r.name=E,c(D,"$initialize",function(b,C,w,g,f){var y=this;return y.category_name=b,y.name=C,y.category_dice=w,y.row_dice=g,y.s_format=f}),c(D,"$to_s",function(){var b=this;return b.$format(b.s_format,P(["category_dice","row_dice","category_name","skill_name"],{category_dice:b.category_dice,row_dice:b.row_dice,category_name:b.category_name,skill_name:b.name}))}),D.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var a,r,g,f,y,m,h,b,n,G=e.module,M=e.klass,c=e.ensure_kwargs,P=e.hash2,R=e.send,F=e.defs,q=e.const_set,S=e.to_ary,A=e.def,T=e.truthy,H=e.rb_minus,W=e.rb_plus,U=e.top,B=[],x=e.nil,V=e.$$$;return U.$require("bcdice/dice_table/sai_fic_skill_table/category"),U.$require("bcdice/dice_table/sai_fic_skill_table/skill"),a=B,r=n=[G(B[0],"BCDice")].concat(a),g=b=[G(n[0],"DiceTable")].concat(r),y=[f=M(b[0],null,"SaiFicSkillTable")].concat(g),m=e.$r(y),(h=f.$$prototype).rtt=h.rtt_format=h.rct=h.rct_format=h.rttn=h.rttn_format=h.categories=x,F(f,"$from_i18n",function(v,_,I){var p,o,i,$,l=x;return null==(p=(I=c(I)).$$smap.rtt)&&(p=x),null==(o=I.$$smap.rct)&&(o=x),null==(i=I.$$smap.rttn)&&(i=x),$=(l=m("I18n").$t("RTT",P(["locale","raise","default"],{locale:_,raise:!1,default:P([],{})})).$merge(m("I18n").$t(v,P(["locale","raise"],{locale:_,raise:!0}))))["$[]"]("items"),l=R(l,"select",[],function(Z,Q){return null==Z&&(Z=x),null==Q&&(Q=x),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](Z)}),this.$new($,e.to_hash(l).$merge(P(["rtt","rct","rttn"],{rtt:p,rct:o,rttn:i})))},-3),q(y[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),q(y[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),q(y[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),q(y[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),A(f,"$initialize",function(v,_){var I,p,o,i,k,t,l,$=this;return null==(I=(_=c(_)).$$smap.rtt)&&(I=x),null==(p=_.$$smap.rct)&&(p=x),null==(o=_.$$smap.rttn)&&(o=x),null==(i=_.$$smap.rtt_format)&&(i=m("DEFAULT_RTT")),null==(k=_.$$smap.rct_format)&&(k=m("DEFAULT_RCT")),null==(t=_.$$smap.rttn_format)&&(t=m("DEFAULT_RTTN")),null==(l=_.$$smap.s_format)&&(l=m("DEFAULT_S")),$.categories=R(v.$map(),"with_index",[1],function(Z,Q){var ne,se,ie;return null==Z&&(Z=x),null==Q&&(Q=x),se=null==(ne=S(Z))[0]?x:ne[0],ie=null==ne[1]?x:ne[1],V(m("SaiFicSkillTable"),"Category").$new(se,ie,Q,l)},{$$has_top_level_mlhs_arg:!0}),$.rtt=I,$.rct=p,$.rttn=o.$to_a(),$.rtt_format=i,$.rct_format=k,$.rttn_format=t},-2),q(y[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),f.$attr_reader("categories"),A(f,"$roll_command",function(v,_){var p,I=this,o=x,i=x;return T(["RTT",I.rtt]["$include?"](p=_))?I.$format_skill(I.rtt_format,I.$roll_skill(v)):T(["RCT",I.rct]["$include?"](p))?(o=I.$roll_category(v),I.$format(I.rct_format,P(["category_dice","category_name"],{category_dice:o.$dice(),category_name:o.$name()}))):T(i=m("RTTN").$index(p))||T(i=I.rttn.$index(p))?I.$format_skill(I.rttn_format,I.categories["$[]"](i).$roll(v)):x}),A(f,"$roll_category",function(v){return this.categories["$[]"](H(v.$roll_once(6),1))}),A(f,"$roll_skill",function(v){return this.$roll_category(v).$roll(v)}),A(f,"$prefixes",function(){var v=this;return W(["RTT[1-6]?","RCT",v.rtt,v.rct],v.rttn).$compact()}),f.$private(),A(f,"$format_skill",function(v,_){return this.$format(v,P(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:_.$category_dice(),row_dice:_.$row_dice(),category_name:_.$category_name(),skill_name:_.$name(),text:_.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function(e){var T,B,d,n,D,r,s,V,W,G=e.module,M=e.klass,c=e.hash2,P=e.defs,R=e.truthy,E=e.def,F=e.rb_minus,q=[],S=e.nil;return T=q,B=W=[G(q[0],"BCDice")].concat(T),d=V=[G(W[0],"DiceTable")].concat(B),D=[n=M(V[0],null,"Table")].concat(d),r=e.$r(D),(s=n.$$prototype).times=s.sides=s.name=s.items=S,P(n,"$from_i18n",function(C,w){var f=S;return f=r("I18n").$t(C,c(["locale"],{locale:w})),this.$new(f["$[]"]("name"),f["$[]"]("type"),f["$[]"]("items"))}),E(n,"$initialize",function(C,w,g){var f=this,y=S;return f.name=C,f.items=g.$freeze(),y=/(\d+)D(\d+)/i.$match(w),R(y)||f.$raise(r("ArgumentError"),"Unexpected table type: "+w),f.times=y["$[]"](1).$to_i(),f.sides=y["$[]"](2).$to_i()}),E(n,"$roll",function(C){var g,w=this;return g=C.$roll_sum(w.times,w.sides),w.$choice(g)}),E(n,"$choice",function(C){var g,w=this;return g=F(C,w.times),r("RollResult").$new(w.name,C,w.items["$[]"](g))})},Opal.modules["bcdice/dice_table"]=function(e){var G=e.top;return G.$require("bcdice/dice_table/roll_result"),G.$require("bcdice/dice_table/chain_table"),G.$require("bcdice/dice_table/d66_grid_table"),G.$require("bcdice/dice_table/d66_half_grid_table"),G.$require("bcdice/dice_table/d66_one_third_table"),G.$require("bcdice/dice_table/d66_left_range_table"),G.$require("bcdice/dice_table/d66_parity_table"),G.$require("bcdice/dice_table/d66_range_table"),G.$require("bcdice/dice_table/d66_table"),G.$require("bcdice/dice_table/range_table"),G.$require("bcdice/dice_table/sai_fic_skill_table"),G.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var E,A,H,q,G=e.module,M=e.const_set,c=[];return E=c,A=q=[G(c[0],"BCDice")].concat(E),H=[G(q[0],"D66SortType")].concat(A),M(H[0],"NO_SORT","no_sort"),M(H[0],"ASC","asc"),M(H[0],"DESC","desc"),function(S,A){var H=[G(S,"RoundType")].concat(A);return M(H[0],"CEIL","ceil"),M(H[0],"FLOOR","floor"),M(H[0],"ROUND","round")}(q[0],q)},Opal.modules["bcdice/translate"]=function(e){var A,U,B,x,V,H,G=e.module,M=e.ensure_kwargs,c=e.kwrestargs,R=e.hash2,E=e.def,F=[],q=e.nil;return A=F,U=H=[G(F[0],"BCDice")].concat(A),x=[B=G(H[0],"Translate")].concat(U),V=e.$r(x),E(B,"$translate",function(a,d){var n,D=this;return null==D.locale&&(D.locale=q),d=M(d),n=c(d,{}),V("I18n").$translate(a,R(["locale","raise"],{locale:D.locale,raise:!0}).$merge(e.to_hash(n)))},-2)},Opal.modules["bcdice/result"]=function(e){var B,N,x,A,H,M=e.klass,c=e.send,P=e.def,R=e.return_val,E=e.return_ivar,F=[],q=e.nil;return A=F,B=H=[(0,e.module)(F[0],"BCDice")].concat(A),[x=M(H[0],null,"Result")].concat(B),P(N=e.get_singleton_class(x),"$success",function(n){return c(this.$new(),"tap",[],function(s){var b;return null==s&&(s=q),s["$text="](n),c(s,"success=",b=[!0]),b[b.length-1]})}),P(N,"$failure",function(n){return c(this.$new(),"tap",[],function(s){var b;return null==s&&(s=q),s["$text="](n),c(s,"failure=",b=[!0]),b[b.length-1]})}),P(N,"$critical",function(n){return c(this.$new(),"tap",[],function(s){var b;return null==s&&(s=q),s["$text="](n),s["$critical="](!0),c(s,"success=",b=[!0]),b[b.length-1]})}),P(N,"$fumble",function(n){return c(this.$new(),"tap",[],function(s){var b;return null==s&&(s=q),s["$text="](n),s["$fumble="](!0),c(s,"failure=",b=[!0]),b[b.length-1]})}),P(N,"$nothing",R("nothing")),P(x,"$initialize",function(a){var d=this;return null==a&&(a=q),d.text=a,d.rands=q,d.detailed_rands=q,d.secret=!1,d.success=!1,d.failure=!1,d.critical=!1,d.fumble=!1},-1),x.$attr_accessor("text","rands","detailed_rands"),x.$attr_writer("secret","success","failure","critical","fumble"),P(x,"$secret?",E("secret")),P(x,"$success?",E("success")),P(x,"$failure?",E("failure")),P(x,"$critical?",E("critical")),P(x,"$fumble?",E("fumble")),P(x,"$condition=",function(a){return this.success=a,this.failure=a["$!"]()})},Opal.modules["racc/parser"]=function(e){var C,g,f,G=e.module,M=e.klass,c=e.truthy,P=e.const_set,R=e.defs,E=e.gvars,F=e.rb_lt,q=e.def,S=e.to_ary,A=e.send,T=e.neqeq,H=e.rb_plus,W=e.eqeq,U=e.rb_ge,B=e.rb_gt,x=e.rb_minus,V=e.rb_le,N=e.rb_times,a=e.assign_ivar_val,n=[],D=e.$r(n),r=e.nil,s=e.$$$;return C=n,g=[G(n[0],"Racc")].concat(C),f=e.$r(g),M(g[0],f("StandardError"),"ParseError"),c(s("::","ParseError","skip_raise")?"constant":r)||P(n[0],"ParseError",s(D("Racc"),"ParseError")),function(b,C){var u,v,_,I,p,f=[G(b,"Racc")].concat(C),y=e.$r(f);return c(y("Racc_No_Extensions","skip_raise")?"constant":r)||P(f[0],"Racc_No_Extensions",!1),u=f,_=[v=M(f[0],null,"Parser")].concat(u),I=e.$r(_),(p=v.$$prototype).yydebug=p.racc_debug_out=p.racc_error_status=p.racc_t=p.racc_vstack=p.racc_val=p.racc_state=p.racc_tstack=r,P(_[0],"Racc_Runtime_Version","1.4.6"),P(_[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),P(_[0],"Racc_Runtime_Core_Version_R","1.4.6"),P(_[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),P(_[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),P(_[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),P(_[0],"Racc_Runtime_Core_Version",I("Racc_Runtime_Core_Version_R")),P(_[0],"Racc_Runtime_Core_Revision",I("Racc_Runtime_Core_Revision_R")),P(_[0],"Racc_Runtime_Type","ruby"),R(I("Parser"),"$racc_runtime_type",function(){return I("Racc_Runtime_Type")}),q(v,"$_racc_setup",function(){var i,k,t=this,l=r,$=r;return null==E.stderr&&(E.stderr=r),c(s(t.$class(),"Racc_debug_parser"))||(t.yydebug=!1),c(null!=(i=t.yydebug)&&i!==r?"instance-variable":r)||(t.yydebug=!1),c(t.yydebug)&&(c(null!=(k=t.racc_debug_out)&&k!==r?"instance-variable":r)||(t.racc_debug_out=E.stderr),t.racc_debug_out=c(l=t.racc_debug_out)?l:E.stderr),$=s(t.$class(),"Racc_arg"),c(F($.$size(),14))&&$["$[]="](13,!0),$}),q(v,"$_racc_init_sysvars",function(){var i=this;return i.racc_state=[0],i.racc_tstack=[],i.racc_vstack=[],i.racc_t=r,i.racc_val=r,i.racc_read_next=!0,i.racc_user_yyerror=!1,i.racc_error_status=0}),q(v,"$do_parse",function(){return this.$__send__(I("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),q(v,"$next_token",function(){return this.$raise(I("NotImplementedError"),this.$class()+"#next_token is not defined")}),q(v,"$_racc_do_parse_rb",function(i,k){var t,$=this,j=r,Z=r,Q=r,ne=r,se=r,ie=r,ue=r,te=r;return t=S(i),j=null==t[0]?r:t[0],Z=null==t[1]?r:t[1],Q=null==t[2]?r:t[2],ne=null==t[3]?r:t[3],se=null==t[10]?r:t[10],$.$_racc_init_sysvars(),ie=ue=te=r,A($,"catch",["racc_end_parse"],function K(){var z,X,Y=null==K.$$s?this:K.$$s,L=r;for(null==Y.racc_state&&(Y.racc_state=r),null==Y.racc_read_next&&(Y.racc_read_next=r),null==Y.racc_t&&(Y.racc_t=r),null==Y.yydebug&&(Y.yydebug=r),null==Y.racc_val&&(Y.racc_val=r);c(!0);)for(c(te=ne["$[]"](Y.racc_state["$[]"](-1)))?(c(Y.racc_read_next)&&T(Y.racc_t,0)&&(X=Y.$next_token(),z=S(X),ie=null==z[0]?r:z[0],Y.racc_val=null==z[1]?r:z[1],Y.racc_t=c(ie)?c(L=se["$[]"](ie))?L:1:0,c(Y.yydebug)&&Y.$racc_read_token(Y.racc_t,ie,Y.racc_val),Y.racc_read_next=!1),te=H(te,Y.racc_t),c(U(te,0))&&c(ue=j["$[]"](te))&&W(Z["$[]"](te),Y.racc_state["$[]"](-1))||(ue=Q["$[]"](Y.racc_state["$[]"](-1)))):ue=Q["$[]"](Y.racc_state["$[]"](-1));c(ue=Y.$_racc_evalact(ue,i)););},{$$s:$})}),q(v,"$yyparse",function(i,k){return this.$__send__(I("Racc_YY_Parse_Method"),i,k,this.$_racc_setup(),!0)}),q(v,"$_racc_yyparse_rb",function(i,k,t,l){var $,Z=this,Q=r,ne=r,$e=r,se=r,ue=r,te=r,K=r;return $=S(t),Q=null==$[0]?r:$[0],ne=null==$[1]?r:$[1],$e=null==$[2]?r:$[2],se=null==$[3]?r:$[3],ue=null==$[10]?r:$[10],Z.$_racc_init_sysvars(),te=r,K=r,A(Z,"catch",["racc_end_parse"],function z(){var X=null==z.$$s?this:z.$$s;for(null==X.racc_state&&(X.racc_state=r);!c(K=se["$[]"](X.racc_state["$[]"](-1)));)for(;c(te=X.$_racc_evalact($e["$[]"](X.racc_state["$[]"](-1)),t)););return A(i,"__send__",[k],function Y(L,ee){var O=null==Y.$$s?this:Y.$$s,re=r,J=r;for(null==O.racc_t&&(O.racc_t=r),null==O.racc_state&&(O.racc_state=r),null==O.racc_read_next&&(O.racc_read_next=r),null==L&&(L=r),null==ee&&(ee=r),O.racc_t=c(L)?c(re=ue["$[]"](L))?re:1:0,O.racc_val=ee,O.racc_read_next=!1,K=H(K,O.racc_t),c(U(K,0))&&c(te=Q["$[]"](K))&&W(ne["$[]"](K),O.racc_state["$[]"](-1))||(te=$e["$[]"](O.racc_state["$[]"](-1)));c(te=O.$_racc_evalact(te,t)););for(;c(c(re=c(J=(K=se["$[]"](O.racc_state["$[]"](-1)))["$!"]())?J:O.racc_read_next["$!"]())?re:O.racc_t["$=="](0));)for(c(K)&&c(K=H(K,O.racc_t))&&c(U(K,0))&&c(te=Q["$[]"](K))&&W(ne["$[]"](K),O.racc_state["$[]"](-1))||(te=$e["$[]"](O.racc_state["$[]"](-1)));c(te=O.$_racc_evalact(te,t)););},{$$s:X})},{$$s:Z})}),q(v,"$_racc_evalact",function(i,k){var t,$e,$=this,j=r,Z=r,ne=r,se=r,ie=r,ue=r;if(j=null==(t=S(k))[0]?r:t[0],Z=null==t[1]?r:t[1],ne=null==t[3]?r:t[3],$e=null==t[11]?r:t[11],se=null==t[12]?r:t[12],c(B(i,0))&&c(F(i,$e)))c(B($.racc_error_status,0))&&(W($.racc_t,1)||($.racc_error_status=x($.racc_error_status,1))),$.racc_vstack.$push($.racc_val),$.racc_state.$push(i),$.racc_read_next=!0,c($.yydebug)&&($.racc_tstack.$push($.racc_t),$.$racc_shift($.racc_t,$.racc_tstack,$.racc_vstack));else if(c(F(i,0))&&c(B(i,se["$-@"]()))){if(ie=A($,"catch",["racc_jump"],function te(){var K=null==te.$$s?this:te.$$s;return null==K.racc_state&&(K.racc_state=r),K.racc_state.$push(K.$_racc_do_reduce(k,i)),!1},{$$s:$}),c(ie))switch(ie){case 1:return $.racc_user_yyerror=!0,se["$-@"]();case 2:return $e;default:$.$raise("[Racc Bug] unknown jump code")}}else if(W(i,$e))c($.yydebug)&&$.$racc_accept(),$.$throw("racc_end_parse",$.racc_vstack["$[]"](0));else{if(W(i,se["$-@"]())){switch($.racc_error_status){case 0:c(k["$[]"](21))||$.$on_error($.racc_t,$.racc_val,$.racc_vstack);break;case 3:W($.racc_t,0)&&$.$throw("racc_end_parse",r),$.racc_read_next=!0}for($.racc_user_yyerror=!1,$.racc_error_status=3;c(!0)&&!(c(ue=ne["$[]"]($.racc_state["$[]"](-1)))&&(ue=H(ue,1),c(U(ue,0))&&c(i=j["$[]"](ue))&&W(Z["$[]"](ue),$.racc_state["$[]"](-1))));)c(V($.racc_state.$size(),1))&&$.$throw("racc_end_parse",r),$.racc_state.$pop(),$.racc_vstack.$pop(),c($.yydebug)&&($.racc_tstack.$pop(),$.$racc_e_pop($.racc_state,$.racc_tstack,$.racc_vstack));return i}$.$raise("[Racc Bug] unknown action "+i.$inspect())}return c($.yydebug)&&$.$racc_next_state($.racc_state["$[]"](-1),$.racc_state),r}),q(v,"$_racc_do_reduce",function(i,k){var t,se,ue,L,ee,O,ae,$=this,Z=r,Q=r,ne=r,$e=r,ie=r,te=r,K=r,z=r,X=r,Y=r,re=r,J=r,ce=r;return Z=null==(t=S(i))[4]?r:t[4],Q=null==t[5]?r:t[5],ne=null==t[6]?r:t[6],$e=null==t[7]?r:t[7],se=null==t[8]?r:t[8],ie=null==t[9]?r:t[9],ue=null==t[13]?r:t[13],te=$.racc_state,K=$.racc_vstack,z=$.racc_tstack,X=N(k,-3),Y=ie["$[]"](X),L=ie["$[]"](H(X,1)),ee=ie["$[]"](H(X,2)),O=[],c($.yydebug)&&(re=z["$[]"](Y["$-@"](),Y)),J=K["$[]"](Y["$-@"](),Y),c($.yydebug)&&z["$[]="](Y["$-@"](),Y,O),K["$[]="](Y["$-@"](),Y,O),te["$[]="](Y["$-@"](),Y,O),c(ue)?K.$push($.$__send__(ee,J,K,J["$[]"](0))):K.$push($.$__send__(ee,J,K)),z.$push(L),c($.yydebug)&&$.$racc_reduce(re,L,z,K),ae=x(L,se),c(X=$e["$[]"](ae))&&(X=H(X,te["$[]"](-1)),c(U(X,0))&&c(ce=Z["$[]"](X))&&W(Q["$[]"](X),ae))?ce:ne["$[]"](ae)}),q(v,"$on_error",function(i,k,t){var $,l=this;return l.$raise(I("ParseError"),l.$sprintf("\nparse error on value %s (%s)",k.$inspect(),c($=l.$token_to_str(i))?$:"?"))}),q(v,"$yyerror",function(){return this.$throw("racc_jump",1)}),q(v,"$yyaccept",function(){return this.$throw("racc_jump",2)}),q(v,"$yyerrok",a("racc_error_status",0)),q(v,"$racc_read_token",function(i,k,t){var l=this;return l.racc_debug_out.$print("read    "),l.racc_debug_out.$print(k.$inspect(),"(",l.$racc_token2str(i),") "),l.racc_debug_out.$puts(t.$inspect()),l.racc_debug_out.$puts()}),q(v,"$racc_shift",function(i,k,t){var l=this;return l.racc_debug_out.$puts("shift   "+l.$racc_token2str(i)),l.$racc_print_stacks(k,t),l.racc_debug_out.$puts()}),q(v,"$racc_reduce",function(i,k,t,l){var $=this,j=r;return(j=$.racc_debug_out).$print("reduce "),c(i["$empty?"]())?j.$print(" <none>"):A(i,"each",[],function Z(Q){return null==Q&&(Q=r),j.$print(" ",(null==Z.$$s?this:Z.$$s).$racc_token2str(Q))},{$$s:$}),j.$puts(" --\x3e "+$.$racc_token2str(k)),$.$racc_print_stacks(t,l),$.racc_debug_out.$puts()}),q(v,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),q(v,"$racc_e_pop",function(i,k,t){var l=this;return l.racc_debug_out.$puts("error recovering mode: pop token"),l.$racc_print_states(i),l.$racc_print_stacks(k,t),l.racc_debug_out.$puts()}),q(v,"$racc_next_state",function(i,k){var t=this;return t.racc_debug_out.$puts("goto    "+i),t.$racc_print_states(k),t.racc_debug_out.$puts()}),q(v,"$racc_print_stacks",function(i,k){var l=r;return(l=this.racc_debug_out).$print("        ["),A(i,"each_index",[],function $(j){return null==j&&(j=r),l.$print(" (",(null==$.$$s?this:$.$$s).$racc_token2str(i["$[]"](j))," ",k["$[]"](j).$inspect(),")")},{$$s:this}),l.$puts(" ]")}),q(v,"$racc_print_states",function(i){var t=r;return(t=this.racc_debug_out).$print("        ["),A(i,"each",[],function($){return null==$&&($=r),t.$print(" ",$)}),t.$puts(" ]")}),q(v,"$racc_token2str",function(i){var t;return c(t=s(this.$class(),"Racc_token_to_s_table")["$[]"](i))?t:this.$raise("[Racc Bug] can't convert token "+i+" to string")}),q(v,"$token_to_str",function(i){return s(this.$class(),"Racc_token_to_s_table")["$[]"](i)})}(n[0],n)},Opal.modules["bcdice/arithmetic/node"]=function(e){var a,r,w,u,v,f,y,b,n,G=e.module,M=e.klass,c=e.def,P=e.thrower,R=e.return_ivar,E=e.send2,F=e.find_super,q=e.eqeq,S=e.const_set,A=e.eqeqeq,T=e.rb_divide,H=e.truthy,W=e.assign_ivar,U=e.alias,B=[],x=e.nil,V=e.$$$;return a=B,r=n=[G(B[0],"BCDice")].concat(a),w=b=[G(n[0],"Arithmetic")].concat(r),f=[G(b[0],"Node")].concat(w),y=e.$r(f),(v=(u=M(f[0],null,"BinaryOp")).$$prototype).lhs=v.rhs=v.op=x,c(u,"$initialize",function(I,p,o){var i=this;return i.lhs=I,i.op=p,i.rhs=o}),c(u,"$eval",function(I){try{P("eval_return");var k,o=this,i=x;return i=o.lhs.$eval(I),k=o.rhs.$eval(I),i.$send(o.op,k)}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),c(u,"$output",function(){var I=this;return""+I.lhs.$output()+I.op+I.rhs.$output()}),c(u,"$s_exp",function(){var I=this;return"("+I.$op_for_s_exp()+" "+I.lhs.$s_exp()+" "+I.rhs.$s_exp()+")"}),c(u,"$op_for_s_exp",R("op")),function(m,h,u){var v=M(m,h,"DivideBase"),_=[v].concat(u),I=e.$r(_),p=v.$$prototype;p.lhs=p.rhs=p.op=x,c(v,"$initialize",function o(i,k){return o.$$p=null,E(this,F(this,"initialize",o,!1,!0),"initialize",[i,"/",k],null)}),c(v,"$eval",function(i){try{P("eval_return");var l,$,t=this;return l=t.lhs.$eval(i),$=t.rhs.$eval(i),q($,0)&&t.$raise(I("ZeroDivisionError")),t.$divide_and_round(l,$,i)}catch(j){if(j===e.t_eval_return)return j.$v;throw j}}),c(v,"$output",function o(){var i=o.$$p||x,k=this;return o.$$p=null,""+E(k,F(k,"output",o,!1,!0),"output",[],i)+k.$rounding_method()}),v.$private(),c(v,"$rounding_method",function(){return V(this.$class(),"ROUNDING_METHOD")}),c(v,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),c(v,"$divide_and_round",function(i,k,t){return this.$raise(I("NotImplementedError"))})}(f[0],y("BinaryOp"),f),function(m,h,u){var v=M(m,h,"DivideWithGameSystemDefault"),_=[v].concat(u),I=e.$r(_);S(_[0],"ROUNDING_METHOD",""),v.$private(),c(v,"$divide_and_round",function(o,i,k){var t,l=x;return A(V(I("RoundType"),"CEIL"),t=k)?T(o.$to_f(),i).$ceil():A(V(I("RoundType"),"ROUND"),t)?(l=T(o.$to_f(),i),H(l["$negative?"]())?l.$abs().$round()["$-@"]():l.$round()):T(o,i).$floor()})}(f[0],y("DivideBase"),f),function(m,h,u){var v=M(m,h,"DivideWithCeil"),_=[v].concat(u);S(_[0],"ROUNDING_METHOD","C"),v.$private(),c(v,"$divide_and_round",function(p,o,i){return T(p.$to_f(),o).$ceil()})}(f[0],y("DivideBase"),f),function(m,h,u){var v=M(m,h,"DivideWithRound"),_=[v].concat(u);S(_[0],"ROUNDING_METHOD","R"),v.$private(),c(v,"$divide_and_round",function(p,o,i){var k=x;return k=T(p.$to_f(),o),H(k["$negative?"]())?k.$abs().$round()["$-@"]():k.$round()})}(f[0],y("DivideBase"),f),function(m,h,u){var v=M(m,h,"DivideWithFloor"),_=[v].concat(u);S(_[0],"ROUNDING_METHOD","F"),v.$private(),c(v,"$divide_and_round",function(p,o,i){return T(p,o).$floor()})}(f[0],y("DivideBase"),f),function(m,h){var u=M(m,null,"Negative");u.$$prototype.body=x,c(u,"$initialize",W("body")),c(u,"$eval",function(I){try{return P("eval_return"),this.body.$eval(I)["$-@"]()}catch(i){if(i===e.t_eval_return)return i.$v;throw i}}),c(u,"$output",function(){return"-"+this.body.$output()}),c(u,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(f[0]),function(m,h){var u=M(m,null,"Parenthesis");u.$$prototype.expr=x,c(u,"$initialize",W("expr")),c(u,"$eval",function(I){try{return P("eval_return"),this.expr.$eval(I)}catch(i){if(i===e.t_eval_return)return i.$v;throw i}}),c(u,"$output",function(){return"("+this.expr.$output()+")"}),c(u,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(f[0]),function(m,h){var u=M(m,null,"Number");return u.$$prototype.value=x,c(u,"$initialize",W("value")),c(u,"$eval",R("value")),c(u,"$output",function(){return this.value.$to_s()}),U(u,"s_exp","output")}(f[0])},Opal.modules.strscan=function(e){var W,U,B,x,V,M=e.def,c=e.truthy,P=e.eqeqeq,R=e.Opal,E=e.return_ivar,F=e.send,q=e.alias,S=[],A=e.nil;return W=S,B=[U=(0,e.klass)(S[0],null,"StringScanner")].concat(W),x=e.$r(B),(V=U.$$prototype).pos=V.string=V.working=V.matched=V.prev_pos=V.match=A,U.$attr_reader("pos","matched"),M(U,"$initialize",function(a){var d=this;return d.string=a,d.pos=0,d.matched=A,d.working=a,d.match=[]}),U.$attr_reader("string"),M(U,"$beginning_of_line?",function(){var a=this;return 0===a.pos||"\n"===a.string.charAt(a.pos-1)}),M(U,"$scan",function(a){var d=this,n=(a=d.$anchor(a)).exec(d.working);return null==n?d.matched=A:(d.prev_pos=d.pos,d.pos+=n[0].length,d.working=d.working.substring(n[0].length),d.matched=n[0],d.match=n,n[0])}),M(U,"$scan_until",function(a){var d=this;a=d.$anchor(a);for(var n=d.working,D=0;n.length!=D;++D){var r=a.exec(n.substr(D));if(null!==r){var s=D+r[0].length,b=n.substr(0,s);return d.matched=r[0],d.match=r,d.prev_pos=d.pos+D,d.pos+=s,d.working=n.substr(s),b}}return d.matched=A}),M(U,"$[]",function(a){var n;if(c(this.match["$empty?"]()))return A;P(x("Symbol"),n=a)?a=a.$to_s():P(x("String"),n)||(a=R["$coerce_to!"](a,x("Integer"),"to_int"));var D=this.match;return a<0&&(a+=D.length),a<0||a>=D.length||null==D[a]?A:D[a]}),M(U,"$check",function(a){var d=this,n=(a=d.$anchor(a)).exec(d.working);return d.matched=null==n?A:n[0]}),M(U,"$check_until",function(a){var d=this,n=d.prev_pos,D=d.pos,r=d.working,s=d.$scan_until(a);return d.prev_pos=n,d.pos=D,d.working=r,s}),M(U,"$peek",function(a){return this.working.substring(0,a)}),M(U,"$eos?",function(){return 0===this.working.length}),M(U,"$exist?",function(a){var n=a.exec(this.working);return null==n?A:0==n.index?0:n.index+1}),M(U,"$skip",function(a){var d=this,n=(a=d.$anchor(a)).exec(d.working);if(null==n)return d.match=[],d.matched=A;var D=n[0],r=D.length;return d.matched=D,d.match=n,d.prev_pos=d.pos,d.pos+=r,d.working=d.working.substring(r),r}),M(U,"$skip_until",function(a){var n=this.$scan_until(a);return n===A?A:(this.matched=n.substr(-1),n.length)}),M(U,"$get_byte",function(){var a=this,d=A;return a.pos<a.string.length?(a.prev_pos=a.pos,a.pos+=1,d=a.matched=a.working.substring(0,1),a.working=a.working.substring(1)):a.matched=A,d}),M(U,"$match?",function(a){var d=this,n=(a=d.$anchor(a)).exec(d.working);return null==n?A:(d.prev_pos=d.pos,n[0].length)}),M(U,"$pos=",function(a){var d=this;return a<0&&(a+=d.string.$length()),d.pos=a,d.working=d.string.slice(a)}),M(U,"$matched_size",function(){return this.matched===A?A:this.matched.length}),M(U,"$post_match",function(){var a=this;return a.matched===A?A:a.string.substr(a.pos)}),M(U,"$pre_match",function(){var a=this;return a.matched===A?A:a.string.substr(0,a.prev_pos)}),M(U,"$reset",function(){var a=this;return a.working=a.string,a.matched=A,a.pos=0}),M(U,"$rest",E("working")),M(U,"$rest?",function(){return 0!==this.working.length}),M(U,"$rest_size",function(){return this.$rest().$size()}),M(U,"$terminate",function(){var a,d=this;return d.match=A,a=[d.string.$length()],F(d,"pos=",a),a[a.length-1]}),M(U,"$unscan",function(){var a=this;return a.pos=a.prev_pos,a.prev_pos=A,a.match=A,a}),q(U,"bol?","beginning_of_line?"),q(U,"getch","get_byte"),U.$private(),M(U,"$anchor",function(a){var d=a.toString().match(/\/([^\/]+)$/);return d=d?d[1]:void 0,new RegExp("^(?:"+a.source+")",d)})},Opal.modules["bcdice/normalize"]=function(e){var q,H,A,G=e.module,M=e.eqeqeq,c=e.def,P=e.eqeq,R=[],E=e.nil;return q=R,A=[G(R[0],"BCDice")].concat(q),(H=G(A[0],"Normalize")).$module_function(),c(H,"$comparison_operator",function(U){var B;return M(/<=|=</,B=U)?"<=":M(/>=|=>/,B)?">=":M(/<>|!=|=!/,B)?"!=":M(/</,B)?"<":M(/>/,B)?">":M(/=/,B)?"==":E}),c(H,"$target_number",function(U){return P(U,"?")?U:U.$to_i()})},Opal.modules["bcdice/command/lexer"]=function(e){var W,V,D,r,s,b,C,a,B,G=e.module,M=e.klass,c=e.const_set,P=e.hash2,R=e.truthy,E=e.send,F=e.def,q=e.thrower,S=e.top,A=[],T=e.nil;return S.$require("strscan"),S.$require("bcdice/normalize"),W=A,V=B=[G(A[0],"BCDice")].concat(W),D=a=[G(B[0],"Command")].concat(V),s=[r=M(a[0],null,"Lexer")].concat(D),b=e.$r(s),(C=r.$$prototype).scanner=C.notations=T,c(s[0],"SYMBOLS",P(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),F(r,"$initialize",function(g,f){var y,m,u;return g=R(u=(y=(m=g)===T||null==m?T:m.$split(" ",2))===T||null==y?T:y.$first())?u:"",this.scanner=b("StringScanner").$new(g),this.notations=E(f,"map",[],function(_){return null==_&&(_=T),R(_["$is_a?"](b("String")))?b("Regexp").$new(_):_})}),F(r,"$next_token",function(){try{var g=q("return"),f=this,y=T,m=T,u=T,v=T;return R(f.scanner["$eos?"]())?[!1,"$"]:(E(f.notations,"each",[],function _(I){var o,p=null==_.$$s?this:_.$$s;if(null==p.scanner&&(p.scanner=T),null==I&&(I=T),o=p.scanner.$scan(I),!R(o))return T;g.$throw(["NOTATION",o])},{$$s:f,$$ret:g}),R(y=f.scanner.$scan(/\d+/))?["NUMBER",y.$to_i()]:R(m=f.scanner.$scan(/[<>!=]+/))?(m=b("Normalize").$comparison_operator(m),[R(m)?"CMP_OP":"ILLEGAL",m]):(u=f.scanner.$getch().$upcase(),[R(v=b("SYMBOLS")["$[]"](u))?v:u.$to_sym(),u]))}catch(_){if(_===g)return _.$v;throw _}}),F(r,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function(e){var S,W,N,a,d,n,D,B,T,G=e.module,M=e.klass,c=e.def,P=e.return_ivar,R=e.truthy,E=[],F=e.nil;return S=E,W=T=[G(E[0],"BCDice")].concat(S),N=B=[G(T[0],"Command")].concat(W),d=[a=M(B[0],null,"Parsed")].concat(N),n=e.$r(d),(D=a.$$prototype).critical=D.fumble=D.dollar=D.modify_number=D.question_target=D.target_number=D.prefix_number=D.command=D.suffix_number=D.cmp_op=F,a.$attr_accessor("command"),a.$attr_accessor("prefix_number"),a.$attr_accessor("suffix_number"),a.$attr_accessor("critical"),a.$attr_accessor("fumble"),a.$attr_accessor("dollar"),a.$attr_accessor("modify_number"),a.$attr_accessor("cmp_op"),a.$attr_accessor("target_number"),a.$attr_writer("question_target"),c(a,"$initialize",function(){var s=this;return s.prefix_number=F,s.suffix_number=F,s.critical=F,s.fumble=F,s.dollar=F,s.cmp_op=F,s.target_number=F,s.question_target=!1}),c(a,"$question_target?",P("question_target")),c(a,"$to_s",function(s){var b=this,C=F,w=F,g=F,f=F,y=F;switch(null==s&&(s="after_command"),C=R(b.critical)?"@"+b.critical:F,w=R(b.fumble)?"#"+b.fumble:F,g=R(b.dollar)?"$"+b.dollar:F,f=n("Format").$modifier(b.modify_number),y=R(b.question_target)?"?":b.target_number,s){case"after_command":return[b.prefix_number,b.command,b.suffix_number,C,w,g,f,b.cmp_op,y].$join();case"after_modify_number":return[b.prefix_number,b.command,b.suffix_number,f,C,w,g,b.cmp_op,y].$join();case"after_target_number":return[b.prefix_number,b.command,b.suffix_number,f,b.cmp_op,y,C,w,g].$join();default:return F}},-1)},Opal.modules["bcdice/command/parser"]=function(e){var s,g,v,o,i,k,t,l,$,j,Z,Q,se,_,I,p,te,y,m,C,G=e.klass,M=e.module,c=e.slice,P=e.extract_kwargs,R=e.ensure_kwargs,E=e.get_kwarg,F=e.send2,q=e.find_super,S=e.def,A=e.send,T=e.eqeq,H=e.thrower,W=e.hash,U=e.const_set,B=e.truthy,x=e.to_ary,V=e.hash2,N=e.top,a=[],d=e.$r(a),n=e.nil,D=e.$$$;return N.$require("racc/parser.rb"),N.$require("bcdice/arithmetic/node"),N.$require("bcdice/command/lexer"),N.$require("bcdice/command/parsed"),G(D(d("BCDice"),"Command"),D(d("Racc"),"Parser"),"Parser"),s=a,g=C=[M(a[0],"BCDice")].concat(s),y=[M(C[0],"Command")].concat(g),m=e.$r(y),v=y,I=[_=G(y[0],D(m("Racc"),"Parser"),"Parser")].concat(v),p=e.$r(I),(te=_.$$prototype).notations=te.lexer=te.modifier=te.suffix_number=te.prefix_number=te.need_suffix_number=te.need_prefix_number=te.critical=te.fumble=te.dollar=te.allowed_cmp_op=te.question_target=n,S(_,"$initialize",function K(z,X){var Y,L,ee,O,J=this;return K.$$p=null,Y=c(arguments),L=P(Y),L=R(L),ee=Y,O=E(L,"round_type"),F(J,q(J,"initialize",K,!1,!0),"initialize",[],null),J.notations=ee,J.round_type=O,J.prefix_number=!1,J.suffix_number=!1,J.need_prefix_number=!1,J.need_suffix_number=!1,J.modifier=!0,J.critical=!1,J.fumble=!1,J.dollar=!1,J.allowed_cmp_op=[n,">=",">","<=","<","==","!="],J.question_target=!1},-2),S(_,"$disable_modifier",function(){return this.modifier=!1,this}),S(_,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),S(_,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),S(_,"$has_prefix_number",function(){var z=this;return z.prefix_number=!0,z.need_prefix_number=!0,z}),S(_,"$has_suffix_number",function(){var z=this;return z.suffix_number=!0,z.need_suffix_number=!0,z}),S(_,"$enable_critical",function(){return this.critical=!0,this}),S(_,"$enable_fumble",function(){return this.fumble=!0,this}),S(_,"$enable_dollar",function(){return this.dollar=!0,this}),S(_,"$restrict_cmp_op_to",function(z){var X,L=this;return X=c(arguments),L.allowed_cmp_op=X,L},-1),S(_,"$enable_question_target",function(){return this.question_target=!0,this}),S(_,"$parse",function(z){var X=this;try{return X.lexer=p("Lexer").$new(z,X.notations),X.$do_parse()}catch(Y){if(!e.rescue(Y,[p("ParseError"),p("ZeroDivisionError")]))throw Y;try{return n}finally{e.pop_exception()}}}),_.$private(),S(_,"$parsed",function(z,X,Y,L){try{return H("eval_return"),A(p("Parsed").$new(),"tap",[],function re(J){var ae,ce,oe,fe,de,le,me,_e=null==re.$$s?this:re.$$s;return null==_e.round_type&&(_e.round_type=n),null==J&&(J=n),J["$command="](z["$[]"]("command")),J["$prefix_number="]((ae=z["$[]"]("prefix"))===n||null==ae?n:ae.$eval(_e.round_type)),J["$suffix_number="]((ce=z["$[]"]("suffix"))===n||null==ce?n:ce.$eval(_e.round_type)),J["$critical="]((oe=X["$[]"]("critical"))===n||null==oe?n:oe.$eval(_e.round_type)),J["$fumble="]((fe=X["$[]"]("fumble"))===n||null==fe?n:fe.$eval(_e.round_type)),J["$dollar="]((de=X["$[]"]("dollar"))===n||null==de?n:de.$eval(_e.round_type)),J["$modify_number="](Y.$eval(_e.round_type)),J["$cmp_op="](L["$[]"]("cmp_op")),T(L["$[]"]("target"),"?")?(J["$question_target="](!0),A(J,"target_number=",le=[0]),le[le.length-1]):(J["$question_target="](!1),le=[(me=L["$[]"]("target"),me===n||null==me?n:me.$eval(_e.round_type))],A(J,"target_number=",le),le[le.length-1])},{$$s:this})}catch(re){if(re===e.t_eval_return)return re.$v;throw re}}),S(_,"$next_token",function(){return this.lexer.$next_token()}),o=e.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),i=e.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),k=e.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),t=e.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),l=e.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),$=e.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),j=[n,6,13,3,9,-1,27,-15,-10,-1,-38],Z=[n,n,n,n,n,n,19,16,15,n,n],Q=e.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),se=W(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),U(I[0],"Racc_arg",[o,i,t,k,l,$,Z,j,19,Q,se,58,35,!0]),U(I[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),U(I[0],"Racc_debug_parser",!1),S(_,"$_reduce_1",function(z,X,Y){var L,O=this;return B(O.modifier)||O.$raise(p("ParseError")),L=x(z),O.$parsed(null==L[0]?n:L[0],null==L[1]?n:L[1],null==L[2]?n:L[2],null==L[3]?n:L[3])}),S(_,"$_reduce_2",function(z,X,Y){var L,O=this;return B(O.modifier)||O.$raise(p("ParseError")),L=x(z),O.$parsed(null==L[0]?n:L[0],null==L[2]?n:L[2],null==L[1]?n:L[1],null==L[3]?n:L[3])}),S(_,"$_reduce_3",function(z,X,Y){var L,ae;return ae=null==(L=x(z))[2]?n:L[2],this.$parsed(null==L[0]?n:L[0],null==L[1]?n:L[1],D(D(p("Arithmetic"),"Node"),"Number").$new(0),ae)}),S(_,"$_reduce_4",function(z,X,Y){var L=this;return B(L.prefix_number)&&B(L.suffix_number)||L.$raise(p("ParseError")),V(["command","prefix","suffix"],{command:z["$[]"](1),prefix:z["$[]"](0),suffix:z["$[]"](2)})}),S(_,"$_reduce_5",function(z,X,Y){var L=this;return B(L.prefix_number)||L.$raise(p("ParseError")),B(L.need_suffix_number)&&L.$raise(p("ParseError")),V(["command","prefix"],{command:z["$[]"](1),prefix:z["$[]"](0)})}),S(_,"$_reduce_6",function(z,X,Y){var L=this;return B(L.suffix_number)||L.$raise(p("ParseError")),B(L.need_prefix_number)&&L.$raise(p("ParseError")),V(["command","suffix"],{command:z["$[]"](0),suffix:z["$[]"](1)})}),S(_,"$_reduce_7",function(z,X,Y){var L=this;return(B(L.need_prefix_number)||B(L.need_suffix_number))&&L.$raise(p("ParseError")),V(["command"],{command:z["$[]"](0)})}),S(_,"$_reduce_8",function(z,X,Y){return V([],{})}),S(_,"$_reduce_9",function(z,X,Y){var L,ae,re=n;return re=null==(L=x(z))[0]?n:L[0],ae=null==L[2]?n:L[2],B(this.critical)&&B(re["$[]"]("critical")["$nil?"]())||this.$raise(p("ParseError")),re["$[]="]("critical",ae),re}),S(_,"$_reduce_10",function(z,X,Y){var L,ae,re=n;return re=null==(L=x(z))[0]?n:L[0],ae=null==L[2]?n:L[2],B(this.fumble)&&B(re["$[]"]("fumble")["$nil?"]())||this.$raise(p("ParseError")),re["$[]="]("fumble",ae),re}),S(_,"$_reduce_11",function(z,X,Y){var L,ae,re=n;return re=null==(L=x(z))[0]?n:L[0],ae=null==L[2]?n:L[2],B(this.dollar)&&B(re["$[]"]("dollar")["$nil?"]())||this.$raise(p("ParseError")),re["$[]="]("dollar",ae),re}),S(_,"$_reduce_12",function(z,X,Y){return z["$[]"](1)}),S(_,"$_reduce_13",function(z,X,Y){return D(D(p("Arithmetic"),"Node"),"Negative").$new(z["$[]"](1))}),S(_,"$_reduce_14",function(z,X,Y){return D(D(p("Arithmetic"),"Node"),"BinaryOp").$new(z["$[]"](0),"+",z["$[]"](2))}),S(_,"$_reduce_15",function(z,X,Y){return D(D(p("Arithmetic"),"Node"),"BinaryOp").$new(z["$[]"](0),"-",z["$[]"](2))}),S(_,"$_reduce_16",function(z,X,Y){return B(this.allowed_cmp_op["$include?"](n))||this.$raise(p("ParseError")),V([],{})}),S(_,"$_reduce_17",function(z,X,Y){var L,re,J;return J=null==(L=x(z))[1]?n:L[1],B(this.allowed_cmp_op["$include?"](re=null==L[0]?n:L[0]))||this.$raise(p("ParseError")),V(["cmp_op","target"],{cmp_op:re,target:J})}),S(_,"$_reduce_18",function(z,X,Y){var ee,L=this;return ee=z["$[]"](0),B(L.question_target)||L.$raise(p("ParseError")),B(L.allowed_cmp_op["$include?"](ee))||L.$raise(p("ParseError")),V(["cmp_op","target"],{cmp_op:ee,target:"?"})}),S(_,"$_reduce_19",function(z,X,Y){return D(D(p("Arithmetic"),"Node"),"BinaryOp").$new(z["$[]"](0),"+",z["$[]"](2))}),S(_,"$_reduce_20",function(z,X,Y){return D(D(p("Arithmetic"),"Node"),"BinaryOp").$new(z["$[]"](0),"-",z["$[]"](2))}),S(_,"$_reduce_22",function(z,X,Y){return D(D(p("Arithmetic"),"Node"),"BinaryOp").$new(z["$[]"](0),"*",z["$[]"](2))}),S(_,"$_reduce_23",function(z,X,Y){return z["$[]"](3).$new(z["$[]"](0),z["$[]"](2))}),S(_,"$_reduce_25",function(z,X,Y){return D(D(p("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),S(_,"$_reduce_26",function(z,X,Y){return D(D(p("Arithmetic"),"Node"),"DivideWithCeil")}),S(_,"$_reduce_27",function(z,X,Y){return D(D(p("Arithmetic"),"Node"),"DivideWithCeil")}),S(_,"$_reduce_28",function(z,X,Y){return D(D(p("Arithmetic"),"Node"),"DivideWithRound")}),S(_,"$_reduce_29",function(z,X,Y){return D(D(p("Arithmetic"),"Node"),"DivideWithFloor")}),S(_,"$_reduce_30",function(z,X,Y){return z["$[]"](1)}),S(_,"$_reduce_31",function(z,X,Y){return D(D(p("Arithmetic"),"Node"),"Negative").$new(z["$[]"](1))}),S(_,"$_reduce_33",function(z,X,Y){return z["$[]"](1)}),S(_,"$_reduce_34",function(z,X,Y){return D(D(p("Arithmetic"),"Node"),"Number").$new(z["$[]"](0))}),S(_,"$_reduce_none",function(z,X,Y){return z["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function(e){var A,U,N,a,d,n,x,H,G=e.module,M=e.send,c=e.eqeqeq,P=e.truthy,R=e.def,E=e.return_val,F=[],q=e.nil;return A=F,U=H=[G(F[0],"BCDice")].concat(A),N=x=[G(H[0],"Deprecated")].concat(U),d=[a=G(x[0],"Checker")].concat(N),n=e.$r(d),a.$private(),R(a,"$check_result_legacy",function(r,s,b,C){var y,w=this,g=q,f=q,m=q,h=q;return g=M(s,"map",[],"sides".$to_proc()),y=(f=M(s,"map",[],"value".$to_proc())).$sum(),m=c([100],h=g)?w.$check_1D100(r,y,b,C):c([20],h)?w.$check_1D20(r,y,b,C):c([6,6],h)?w.$check_2D6(r,y,f,b,C):q,(P(m["$nil?"]())||P(m["$empty?"]()))&&(m=c([10],h=g.$uniq())?w.$check_nD10(r,y,f,b,C):c([6],h)?w.$check_nD6(r,y,f,b,C):q,P(m["$nil?"]())||P(m["$empty?"]()))?q:n("Result").$new(m.$delete_prefix(" \uff1e "))}),R(a,"$check_1D100",E(q)),R(a,"$check_1D20",E(q)),R(a,"$check_nD10",E(q)),R(a,"$check_2D6",E(q)),R(a,"$check_nD6",E(q))},Opal.modules["bcdice/base"]=function(e){var d,w,h,p,i,k,u,v,_,I,f,G=e.module,M=e.klass,c=e.slice,P=e.rb_plus,R=e.truthy,E=e.def,F=e.regexp,q=e.send,S=e.thrower,A=e.return_ivar,T=e.assign_ivar_val,H=e.eqeqeq,W=e.eqeq,U=e.return_val,B=e.range,x=e.rb_minus,V=e.rb_divide,N=e.rb_times,a=e.rb_ge,n=e.top,D=[],r=e.$r(D),s=e.nil,b=e.$$$;return n.$require("i18n"),n.$require("i18n/backend/fallbacks"),n.$require("bcdice/randomizer"),n.$require("bcdice/dice_table"),n.$require("bcdice/enum"),n.$require("bcdice/translate"),n.$require("bcdice/result"),n.$require("bcdice/command/parser"),n.$require("bcdice/deprecated/checker"),w=D,h=f=[G(D[0],"BCDice")].concat(w),v=[u=M(f[0],null,"Base")].concat(h),_=e.$r(v),(I=u.$$prototype).raw_input=I.randomizer=I.enabled_upcase_input=I.debug=s,i=[p=e.get_singleton_class(u)].concat(v),k=e.$r(i),p.$attr_reader("prefixes"),E(p,"$register_prefix",function(l){var j,Z=this,Q=s;return null==Z.prefixes&&(Z.prefixes=s),j=c(arguments),Z.prefixes=P(R(Q=Z.prefixes)?Q:[],j.$flatten())},-1),E(p,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),E(p,"$prefixes_pattern",function(){var l=this,$=s;return null==l.prefixes_pattern&&(l.prefixes_pattern=s),null==l.prefixes&&(l.prefixes=s),l.prefixes_pattern=R($=l.prefixes_pattern)?$:s,R(l.prefixes_pattern)?l.prefixes_pattern:(l.prefixes=R($=l.prefixes)?$:[],l.prefixes.$freeze(),l.prefixes_pattern=(R(l.prefixes["$empty?"]())?/(?!)/:F(["^(S)?(",l.prefixes.$join("|"),")"],"i")).$freeze())}),E(p,"$command_pattern",function(){var l=this,$=s,j=s;return null==l.command_pattern&&(l.command_pattern=s),null==l.prefixes&&(l.prefixes=s),l.command_pattern=R($=l.command_pattern)?$:s,R(l.command_pattern)?l.command_pattern:(l.prefixes=R($=l.prefixes)?$:[],l.prefixes.$freeze(),j=P(q(b(k("CommonCommand"),"COMMANDS"),"map",[],function(Q){return null==Q&&(Q=s),b(Q,"PREFIX_PATTERN").$source()}),l.prefixes),l.command_pattern=F(["^S?(",j.$join("|"),")"],"i").$freeze())}),E(p,"$eval",function(l){try{return S("eval_return"),this.$new(l).$eval()}catch(Z){if(Z===e.t_eval_return)return Z.$v;throw Z}}),u.$include(_("Translate")),u.$include(b(_("Deprecated"),"Checker")),E(u,"$initialize",function(o){var i=this;return i.raw_input=o,i.sort_add_dice=!1,i.sort_barabara_dice=!1,i.d66_sort_type=b(_("D66SortType"),"NO_SORT"),i.enabled_d9=!1,i.round_type=b(_("RoundType"),"FLOOR"),i.sides_implicit_d=6,i.upper_dice_reroll_threshold=s,i.reroll_dice_reroll_threshold=s,i.default_cmp_op=s,i.default_target_number=s,i.enabled_upcase_input=!0,i.locale="ja_jp",i.randomizer=b(_("BCDice"),"Randomizer").$new(),i.debug=!1}),u.$attr_accessor("randomizer"),u.$attr_reader("d66_sort_type"),u.$attr_reader("round_type"),u.$attr_reader("sides_implicit_d"),u.$attr_reader("upper_dice_reroll_threshold"),u.$attr_reader("reroll_dice_reroll_threshold"),u.$attr_reader("default_cmp_op"),u.$attr_reader("default_target_number"),E(u,"$sort_add_dice?",A("sort_add_dice")),E(u,"$sort_barabara_dice?",A("sort_barabara_dice")),E(u,"$enabled_d9?",A("enabled_d9")),E(u,"$enable_debug",T("debug",!0)),E(u,"$eval",function(){var i,t,o=this,k=s;return i=b(_("BCDice"),"Preprocessor").$process(o.raw_input,o),k=R(t=o.$dice_command(i))?t:o.$eval_common_command(o.raw_input),R(k)?(k["$rands="](o.randomizer.$rand_results()),k["$detailed_rands="](o.randomizer.$detailed_rand_results()),k):s}),E(u,"$change_text",function(o){return o}),E(u,"$check_result",function(o,i,k,t){var l=this,$=s,j=s,Z=s,Q=s,ne=s;return $=l.$check_result_legacy(o,i,k,t),R($)?$:(j=q(i,"map",[],"sides".$to_proc()),Q=(Z=q(i,"map",[],"value".$to_proc())).$sum(),$=H([100],ne=j)?l.$result_1d100(o,Q,k,t):H([20],ne)?l.$result_1d20(o,Q,k,t):H([6,6],ne)?l.$result_2d6(o,Q,Z,k,t):s,W($,_("Result").$nothing())?s:R($)?$:($=H([10],ne=j.$uniq())?l.$result_nd10(o,Q,Z,k,t):H([6],ne)?l.$result_nd6(o,Q,Z,k,t):s,W($,_("Result").$nothing())?s:R($)?$:l.$result_ndx(o,k,t)))}),E(u,"$grich_text",U(s)),u.$private(),E(u,"$eval_common_command",function(o){try{S("eval_return");var k=S("return");return o=this.$change_text(o),q(b(_("CommonCommand"),"COMMANDS"),"each",[],function l($){var Z,j=null==l.$$s?this:l.$$s;if(null==j.randomizer&&(j.randomizer=s),null==$&&($=s),Z=$.$eval(o,j,j.randomizer),!R(Z))return s;k.$throw(Z)},{$$s:this,$$ret:k}),s}catch(l){if(l===e.t_eval_return||l===k)return l.$v;throw l}}),E(u,"$dice_command",function(o){var i=this,k=s,t=s,l=s,$=s;return R(i.enabled_upcase_input)&&(o=o.$upcase()),k=i.$class().$prefixes_pattern().$match(o),R(k)?(t=k["$[]"](1)["$nil?"]()["$!"](),R(t)&&(o=o["$[]"](B(1,-1,!1))),l=i.$eval_game_system_specific_command(o),R(l["$is_a?"](_("Result")))?(l["$secret="](R($=l["$secret?"]())?$:t),l):R(l["$nil?"]())||R(l["$empty?"]())||W(l,"1")?s:q(_("Result").$new(),"tap",[],function(Z){var Q;return null==Z&&(Z=s),Z["$text="](l.$to_s()),q(Z,"secret=",Q=[t]),Q[Q.length-1]})):s}),E(u,"$eval_game_system_specific_command",U(s)),E(u,"$result_ndx",function(o,i,k){return R(k["$is_a?"](_("String")))?s:R(o.$send(i,k))?_("Result").$success(this.$translate("success")):_("Result").$failure(this.$translate("failure"))}),E(u,"$result_1d100",U(s)),E(u,"$result_1d20",U(s)),E(u,"$result_nd10",U(s)),E(u,"$result_2d6",U(s)),E(u,"$result_nd6",U(s)),E(u,"$get_table_by_2d6",function(o){return this.$get_table_by_nD6(o,2)}),E(u,"$get_table_by_1d6",function(o){return this.$get_table_by_nD6(o,1)}),E(u,"$get_table_by_nD6",function(o,i){return this.$get_table_by_nDx(o,i,6)}),E(u,"$get_table_by_nDx",function(o,i,k){var l,$=s;return l=this.randomizer.$roll_sum(i,k),$=this.$get_table_value(o["$[]"](x(l,i))),R($["$nil?"]())?["1",0]:[$,l]}),E(u,"$get_table_by_1d3",function(o){var t,l,i=this,$=s;return i.$debug("get_table_by_1d3"),t=i.randomizer.$roll_sum(1,6),i.$debug("num",t),l=V(x(t,1),2).$to_i(),i.$debug("index",l),$=o["$[]"](l),R($["$nil?"]())?["1",0]:[$,t]}),E(u,"$get_table_by_d66_swap",function(o){var k;return k=this.randomizer.$roll_d66(b(_("D66SortType"),"ASC")),[this.$get_table_by_number(k,o),k]}),E(u,"$get_table_by_d66",function(o){var k,t,l,j,$=s;return k=this.randomizer.$roll_once(6),t=this.randomizer.$roll_once(6),l=P(N(x(k,1),6),x(t,1)),$=o["$[]"](l),j=""+k+t,R($["$nil?"]())?["1",j]:[$,j]}),E(u,"$get_table_by_number",function(o,i,k){try{var t=S("return");return null==k&&(k="1"),q(i,"each",[],function $(j){var Q,Z=null==$.$$s?this:$.$$s;if(null==j&&(j=s),Q=j["$[]"](0),!R(a(Q,o)))return s;t.$throw(Z.$get_table_value(j["$[]"](1)))},{$$s:this,$$ret:t}),this.$get_table_value(k)}catch($){if($===t)return $.$v;throw $}},-3),E(u,"$get_table_value",function(o){return R(o["$is_a?"](_("Proc")))?o.$call():o}),E(u,"$roll_tables",function(o,i){var t=s;return t=i["$[]"](o),R(t)?t.$roll(this.randomizer).$to_s():s}),E(u,"$debug",function(o,i){var t,l=this,$=s,j=s;return t=c(arguments,1),R(l.debug)?($=R(o["$is_a?"](_("String")))?o:o.$inspect(),R(t["$empty?"]())?l.$warn($):(j=q(t,"map",[],function(Q){return null==Q&&(Q=s),R(Q["$is_a?"](_("String")))?'"'+Q+'"':Q.$inspect()}),l.$warn($+": "+j.$join(", ")))):s},-2),b(b(r("I18n"),"Backend"),"Simple").$include(b(b(r("I18n"),"Backend"),"Fallbacks")),r("I18n").$load_path()["$<<"](r("Dir")["$[]"](r("File").$join("bcdice","../../i18n/**/*.yml"))),r("I18n")["$default_locale="]("ja_jp"),d=[["ja_jp"]],q(r("I18n").$fallbacks(),"defaults=",d),d[d.length-1]},Opal.queue(function(e){var n,b,m,h,u,v,w,g,r,G=e.module,M=e.klass,c=e.const_set,P=e.hash2,R=e.send2,E=e.find_super,F=e.def,q=e.truthy,S=e.to_ary,A=e.rb_plus,T=e.range,H=e.neqeq,W=e.eqeq,U=e.rb_ge,B=e.rb_minus,V=[],N=e.nil,a=e.$$$;return e.top.$require("bcdice/base"),n=V,b=r=[G(V[0],"BCDice")].concat(n),w=[G(r[0],"GameSystem")].concat(b),g=e.$r(w),m=w,u=[h=M(w[0],g("Base"),"DesperateRun")].concat(m),v=e.$r(u),h.$$prototype.randomizer=N,c(u[0],"ID","DesperateRun"),c(u[0],"NAME","Desperate Run TRPG"),c(u[0],"SORT_KEY","\u3066\u3059\u3078\u308c\u3044\u3068\u3089\u3093TRPG"),c(u[0],"HELP_MESSAGE","\u30fb\u96e3\u6613\u5ea6\u7b97\u51fa\u30b3\u30de\u30f3\u30c9\u3000DDC\n\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9\u3000RCx\u3000or\u3000RCx+y\u3000or\u3000RCx-y\uff08x\uff1d\u96e3\u6613\u5ea6\u3001y=\u4fee\u6b63\u5024\uff08\u7701\u7565\u53ef\u80fd\uff09\uff09\n\u30fb\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\u8868\u3000ACT\n\u30fb\u521d\u671f\u30a2\u30a4\u30c6\u30e0\u8868\u3000ITEMT\n\u30fb\u52d5\u6a5f\u8868\u3000DOUKIT\n\u30fb\u6b7b\u4ea1\u30d5\u30e9\u30b0\u53f0\u8a5e\u8868\u3000FLAGT\n\u30fb\u9014\u4e2d\u53c2\u52a0\u52d5\u6a5f\u8868\u3000ENTRYT\n\u30fb\u9014\u4e2d\u53c2\u52a0\u9053\u4e2d\u8868\u3000ROADT\n"),c(u[0],"TABLES",P(["ACT","ITEMT","DOUKIT","FLAGT","ENTRYT","ROADT"],{ACT:a(v("DiceTable"),"Table").$new("\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\u8868","1D6",["PC\u5168\u54e1\u3001\u968a\u5217\u30921D6\u3067\u6c7a\u3081\u308b\uff0812\uff1a\u524d\u5217\u300134\uff1a\u4e2d\u5217\u300156\uff1a\u5f8c\u5217\uff09","1\u30bf\u30fc\u30f3\u3001\u30e2\u30f3\u30b9\u30bf\u30fc\u5074\u306e\u307f\u884c\u52d5\u3059\u308b\u3002","\u3053\u306e\u6226\u95d8\u306e\u884c\u52d5\u9806\u304c\u3001PC\u2192\u30e2\u30f3\u30b9\u30bf\u30fc\u3001\u304b\u3089\u3001\u30e2\u30f3\u30b9\u30bf\u30fc\u2192PC\u306b\u5909\u308f\u308b\u3002","PC\u5168\u54e1\u3001\u30a2\u30a4\u30c6\u30e01\u3064\u3092\u9078\u3093\u3067\u5931\u3046\u3002","PC\u5168\u54e11D6\u3092\u632f\u308b\u3002\u3053\u306e\u6226\u95d8\u4e2d\u3001\u305d\u306e\u51fa\u76ee\u306f\u30ce\u30fc\u30d7\u30e9\u30f3\u306b\u306a\u308b\u3002","PC\u5168\u54e1\u3001Flag\u304c1\u5897\u52a0\u3059\u308b\u3002"]),ITEMT:a(v("DiceTable"),"Table").$new("\u521d\u671f\u30a2\u30a4\u30c6\u30e0\u8868","2D6",["\u30ed\u30b1\u30c3\u30c8\u30e9\u30f3\u30c1\u30e3\u30fc\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30de\u30ab\u30d6\u30ebLv+3\u3000\u56de\u6570\uff1a\u653b\u64831\u56de","\u30ad\u30fc\u30d4\u30c3\u30af\u3000\u52b9\u679c\uff1a\uff08\u6d88\u8cbb\uff09\u30e0\u30fc\u30d6\u30b7\u30fc\u30f3\u3067\u4f7f\u7528\u53ef\u3002\u5224\u5b9a\u306e\u51fa\u76ee\u306e\u5408\u8a08+1\u3000\u56de\u6570\uff1a2\u56de","\u30ec\u30fc\u30c0\u30fc\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30ce\u30fc\u30d7\u30e9\u30f3\u3000\u88c5\u5099\u6642\u3001\u300c\u5371\u967a\u300d\u30921\u6e1b\u3089\u3059\u3053\u3068\u304c\u51fa\u6765\u308b\u3000\u56de\u6570\uff1a\u5371\u967a\u6e1b\u5c112\u56de","\u98df\u6599\u3000\u52b9\u679c\uff1a\uff08\u6d88\u8cbb\uff09\u30e0\u30fc\u30d6\u30b7\u30fc\u30f3\u3067\u4f7f\u7528\u53ef\u3002Life3\u56de\u5fa9\u3000\u56de\u6570\uff1a1\u56de","\u5fdc\u6025\u30ad\u30c3\u30c8\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30e1\u30c7\u30a3\u30ab\u30ebLv+1\u3000\u56de\u6570\uff1a\u56de\u5fa93\u56de","\u5203\u7269\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30a2\u30bf\u30c3\u30afLv+1\u3000\u56de\u6570\uff1a\u653b\u64836\u56de","\u9283\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30b7\u30e5\u30fc\u30c8Lv+1\u3000\u56de\u6570\uff1a\u653b\u64836\u56de","\u30c9\u30e9\u30c3\u30b0\u3000\u52b9\u679c\uff1a\uff08\u6d88\u8cbb\uff09\u3044\u3064\u3067\u3082\u4f7f\u7528\u53ef\u3002Brave1\u56de\u5fa9\u3000\u56de\u6570\uff1a1\u56de","\u91d1\u5238\u3000\u52b9\u679c\uff1a\uff08\u6d88\u8cbb\uff09\u30a2\u30d5\u30bf\u30fc\u30d7\u30ec\u30a4\u3067\u4f7f\u7528\u53ef\u3002\u7d4c\u9a13\u70b9+2\u3000\u56de\u6570\uff1a1\u56de","\u30d7\u30ed\u30c6\u30af\u30bf\u30fc\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30ac\u30fc\u30c9Lv+1\u3000\u56de\u6570\uff1a\u9632\u5fa15\u56de","\u30c8\u30df\u30fc\u30ac\u30f3\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30c1\u30a7\u30fc\u30f3Lv+5\u3000\u56de\u6570\uff1a\u653b\u64831\u56de"]),DOUKIT:a(v("DiceTable"),"Table").$new("\u52d5\u6a5f\u8868","1D6",["\u96b7\u5c5e\u3002\u4f55\u304b\u5f31\u307f\u306b\u4ed8\u3051\u8fbc\u307e\u308c\u3001\u5acc\u3005\u306a\u304c\u3089\u3082\u53c2\u52a0\u3059\u308b\u3053\u3068\u3068\u306a\u308b\u3002\u5f8c\u308d\u3081\u305f\u3044\u4e8b\u3001\u501f\u91d1\u3001\u306a\u3069\u3002","\u732e\u8eab\u3002\u3053\u306e\u756a\u7d44\u306f\u8ab0\u304b\u306e\u305f\u3081\u306b\u51fa\u3066\u3044\u308b\u3002\u75c5\u6c17\u306e\u5bb6\u65cf\u3092\u6551\u3046\u305f\u3081\u3001\u53c2\u52a0\u8005\u306e\u4e00\u4eba\u304c\u604b\u4eba\u3067\u3042\u308b\u3001\u306a\u3069\u3002","\u6210\u884c\u3002\u671b\u3093\u3067\u3044\u306a\u3044\u306e\u306b\u53c2\u52a0\u3059\u308b\u3053\u3068\u3068\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u3002\u8ab0\u304b\u304c\u52dd\u624b\u306b\u7533\u3057\u8fbc\u3093\u3060\u3001\u7d1b\u308c\u8fbc\u3093\u3067\u3057\u307e\u3063\u305f\u3001\u306a\u3069\u3002","\u6e07\u671b\u3002\u3068\u306b\u304b\u304f\u4f55\u304b\u3092\u6b32\u3057\u3066\u53c2\u52a0\u3057\u3066\u3044\u308b\u3002\u91d1\u3001\u30b9\u30ea\u30eb\u3001\u91d1\u3067\u624b\u306b\u5165\u308b\u3082\u306e\u3001\u306a\u3069\u3002","\u5947\u4eba\u3002\u597d\u304d\u597d\u3093\u3067\u3053\u306e\u756a\u7d44\u306b\u51fa\u3066\u3044\u308b\u3002\u6bba\u4eba\u7656\u3001\u30ca\u30eb\u30b7\u30b9\u30c8\u3001\u81ea\u6bba\u9858\u671b\u3001\u5316\u3051\u7269\u30de\u30cb\u30a2\u3001\u306a\u3069\u3002","\u4ed5\u4e8b\u3002\u3053\u306e\u756a\u7d44\u306b\u51fa\u308b\u306e\u306f\u4ed5\u4e8b\u3060\u304b\u3089\u3060\u3002\u8cde\u91d1\u7a3c\u304e\u3001\u82b8\u80fd\u4eba\u3001\u8a18\u8005\u3001\u756a\u7d44\u30b9\u30bf\u30c3\u30d5\u3001\u306a\u3069\u3002"]),FLAGT:a(v("DiceTable"),"Table").$new("\u6b7b\u4ea1\u30d5\u30e9\u30b0\u53f0\u8a5e\u8868","1D6",["\u5e0c\u671b\u3002\u300c\u3053\u308c\u304c\u7d42\u308f\u3063\u305f\u3089\u3001\u4e00\u7dd2\u306b\u9152\u3067\u3082\u98f2\u3082\u3046\u3084\u300d\u300c\u3082\u3046\u4f55\u3082\u6016\u304f\u306a\u3044\u300d\u306a\u3069\u3002","\u671b\u90f7\u3002\u300c\u304f\u305d\u3063\u3001\u3001\u3001\u4ffa\u306b\u306f\u3001\u5e30\u308a\u3092\u5f85\u3064\u4eba\u304c\u3001\u3001\u3001\u3063\uff01\u300d\u300c\u3042\u3042\u3001\u6545\u90f7\u306e\u30de\u30eb\u30b2\u30ea\u30fc\u30bf\u3092\u3082\u3046\u4e00\u5ea6\u98df\u3079\u305f\u304b\u3063\u305f\u3001\u3001\u3001\u300d\u306a\u3069\u3002","\u72c2\u4e71\u3002\u300c\u304a\u524d\u3092\u3001\u6bba\u305b\u3070\u3001\u4ffa\u306f\u3001\u5104\u4e07\u9577\u8005\u306a\u3093\u3060\u3088\u3049\u3049\u3049\u304a\uff01\uff01\u300d\u300c\u30d2\u30cf\u30c3\u3001\u6b7b\u306d\u6b7b\u306d\u6b7b\u306d\u6b7b\u306d\u3047\u3047\u3047\u3047\u300d\u306a\u3069\u3002","\u7d76\u671b\u3002\u300c\u3082\u3046\u3060\u3081\u3060\u3041\u3001\u3001\u3001\u304a\u3057\u307e\u3044\u3060\u3041\u3001\u3001\u3001\u300d\u300c\u304f\u3001\u304f\u308b\u306a\u3063\u3001\u304f\u308b\u306a\u3041\u3041\u3041\u3041\uff01\uff01\u300d\u306a\u3069\u3002","\u6162\u5fc3\u3002\u300c\u306a\u3093\u3060\u3001\u3053\u3093\u306a\u3084\u3064\u3001\u4ffa\u3060\u3051\u3067\u5341\u5206\u3060\u300d\u300c\u5927\u4e08\u592b\u3060\u3001\u554f\u984c\u306a\u3044\u300d\u306a\u3069\u3002","\u72a0\u7272\u3002\u300c\u3075\u3075\u3001\u4ffa\u306a\u3089\u5927\u4e08\u592b\u3060\u3001\u3001\u3001\u6c17\u306b\u3059\u308b\u306a\u300d\u300c\u304a\u524d\u3089\u4e0b\u304c\u308c\u3063\uff01\u3053\u3053\u306f\u4ffa\u306b\u4efb\u305b\u308d\uff01\u300d\u306a\u3069\u3002"]),ENTRYT:a(v("DiceTable"),"Table").$new("\u9014\u4e2d\u53c2\u52a0\u52d5\u6a5f\u8868","1D6",["\u9045\u523b\u3002\u3082\u3068\u3082\u3068\u53c2\u52a0\u3059\u308b\u4e88\u5b9a\u3060\u3063\u305f\u306e\u3060\u304c\u9045\u308c\u3066\u3057\u307e\u3063\u305f\u3002\u4eca\u304b\u3089\u3067\u3082\u8d70\u308c\u3068\u7121\u7406\u77e2\u7406\u53c2\u52a0\u3002","\u73fe\u4f4f\u3002\u3082\u3068\u3082\u3068\u3053\u3053\u306b\u4f4f\u3093\u3067\u3044\u305f\u3002\u4f55\uff1f\u756a\u7d44\uff1f\u3048\uff1f\u3042\u3001\u304a\u91d1\u3082\u3089\u3048\u3093\u306e\uff1f\u30a4\u30a4\u30cd\uff01","\u7a81\u767a\u3002\u3082\u3068\u3082\u3068\u8996\u8074\u8005\u3068\u3057\u3066\u30b9\u30bf\u30b8\u30aa\u306b\u5c45\u305f\u3093\u3060\u3051\u3069\u3001\u53f8\u4f1a\u306b\u3046\u307e\u304f\u4e57\u305b\u3089\u308c\u3066\u30fb\u30fb\u30fb","\u4e71\u5165\u3002\u4f55\u304b\u76ee\u7684\u304c\u3042\u3063\u3066\u4e71\u5165\u3057\u305f\u3002\u4eca\u56de\u306e\u30b9\u30c6\u30fc\u30b8\u304c\u7c21\u5358\u306b\u898b\u3048\u305f\u308a\u3001\u53c2\u52a0\u8005\u306b\u5927\u4e8b\u306a\u4eba\u304c\u3044\u305f\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3002","\u795e\u96a0\u3002\u4eca\u56de\u3088\u308a\u524d\u306e\u756a\u7d44\u306b\u53c2\u52a0\u3057\u3066\u3044\u305f\u304c\u884c\u65b9\u4e0d\u660e\u30fb\u6b7b\u3093\u3060\u3068\u601d\u308f\u308c\u3066\u3044\u305f\u3002\u304c\u3002\u541b\u306f\u307e\u3060\u3053\u3053\u306b\u3044\u308b\u3002","\u8077\u54e1\u3002\u3042\u308c\u3001\u9003\u3052\u9045\u308c\u307e\u3057\u305f\uff1f\u3042\u3089\u3042\u3089\u3001\u5927\u5909\u3067\u3059\u306d\u3001\u3057\u3087\u3046\u304c\u306a\u3044\u304b\u3089\u53c2\u52a0\u8005\u3055\u3093\u3068\u4e00\u7dd2\u306b\u8d70\u3063\u3066\u304f\u3060\u3055\u3044\u3002"]),ROADT:a(v("DiceTable"),"Table").$new("\u9014\u4e2d\u53c2\u52a0\u9053\u4e2d\u8868","1D6",["\u6b7b\u7dda\u3002\u6b7b\u306c\u304b\u3068\u601d\u3063\u305f\u3002Flag+1","\u602a\u6211\u3002\u75db\u3044\u3002Life-1","\u5931\u610f\u3002\u3069\u3046\u3057\u3066\u3053\u3046\u306a\u3063\u305f\u3002Brave-1\u3002\u6e1b\u3089\u305b\u306a\u3044\u5834\u5408\u3001Flag+1","\u7d1b\u5931\u3002\u3069\u3063\u304b\u3044\u3063\u305f\u3002Item\u3092\u3069\u308c\u304b1\u3064\u6368\u3066\u308b\u3002\u6368\u3066\u308c\u306a\u3044\u5834\u5408\u3001Flag+1","\u8ffd\u5c3e\u3002\u5f8c\u308d\uff01\u5f8c\u308d\u30fc\u3063\uff01\u53c2\u52a0\u958b\u59cb\u90e8\u5c4b\u306e\u5371\u967a+1","\u8ff7\u5b50\u3002\u3042\u308c\u3001\u3053\u3053\u3069\u3053\u3060\uff1f\u9014\u4e2d\u53c2\u52a0\u9053\u4e2d\u8868\u3092\u632f\u308b\u56de\u6570+2"])}).$freeze()),h.$register_prefix("RC","DDC",v("TABLES").$keys()),F(h,"$initialize",function I(p){var i=this;return I.$$p=null,R(i,E(i,"initialize",I,!1,!0),"initialize",[p],null),i.sort_add_dice=!0,i.d66_sort_type=a(v("D66SortType"),"ASC")}),h.$private(),F(h,"$eval_game_system_specific_command",function(p){var i,k,o=this;return q(i=q(k=o.$check_roll(p))?k:o.$ddc_table(p))?i:o.$roll_tables(p,a(o.$class(),"TABLES"))}),F(h,"$check_roll",function(p){var o,i,l=N,$=N,j=N,Z=N,Q=N,ne=N,$e=N,se=N,ie=N;return l=a(v("Command"),"Parser").$new(/RC\d+/,P(["round_type"],{round_type:this.$round_type()})).$restrict_cmp_op_to(N).$parse(p),q(l)?(i=this.randomizer.$roll_barabara(2,6),o=S(i),Z=A($=null==o[0]?N:o[0],j=null==o[1]?N:o[1]),Q=A(A($,j),l.$modify_number()),ne=l.$command()["$[]"](T(2,-1,!1)).$to_i(),H(l.$modify_number(),0)&&($e="\u3000\u4fee\u6b63\u5024\uff1a"+l.$modify_number()),ie=["\u5224\u5b9a\u3000\u96e3\u6613\u5ea6\uff1a"+ne+$e,"\u51fa\u76ee\uff1a"+$+"\u3001"+j,(se=W($,j)?v("Result").$critical("\u30be\u30ed\u76ee\uff01\u3010Critical\u3011"):W(Z,7)?v("Result").$fumble("\u30c0\u30a4\u30b9\u306e\u51fa\u76ee\u304c\u8868\u88cf\uff01\u3010Fumble\u3011"):q(U(Q,ne))?v("Result").$success(Q+"\u3001\u96e3\u6613\u5ea6\u4ee5\u4e0a\uff01\u3010Success\u3011"):v("Result").$failure(Q+"\u3001\u96e3\u6613\u5ea6\u672a\u6e80\uff01\u3010Miss\u3011")).$text()],se["$text="](ie.$join(" \uff1e ")),se):N}),F(h,"$ddc_table",function(p){var o,i,t=N,l=N,$=N,j=N,Z=N;return H(p,"DDC")?N:(i=this.randomizer.$roll_barabara(2,6),i=[t=null==(o=S(i))[0]?N:o[0],l=null==o[1]?N:o[1]].$sort(),"\u96e3\u6613\u5ea6\u6c7a\u5b9a \uff1e \u51fa\u76ee\uff1a"+t+"\u3001"+l+" \uff1e "+(j=null==(o=S(i))[1]?N:o[1])+"-"+($=null==o[0]?N:o[0])+"="+(Z=B(j,$))+" \uff1e \u96e3\u6613\u5ea6"+A(5,Z))})})}}]);