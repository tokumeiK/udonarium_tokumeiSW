(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[7276],{1175:(ie,se,ne)=>{ne(9993),Opal.modules["bcdice/arithmetic_evaluator"]=function(r){var B,P,j,U,k,F,K,y,w=r.module,G=r.ensure_kwargs,M=r.truthy,R=r.thrower,L=r.def,e=[],V=r.nil,T=r.$$$;return B=e,P=y=[w(e[0],"BCDice")].concat(B),K=[F=w(y[0],"ArithmeticEvaluator")].concat(P),U=[j=r.get_singleton_class(F)].concat(K),k=r.$r(U),L(j,"$eval",function(p,f){try{R("eval_return");var o,A=V;return null==(o=(f=G(f)).$$smap.round_type)&&(o=T(k("RoundType"),"FLOOR")),M(p)&&M(A=k("Arithmetic").$eval(p,o))?A:0}catch(g){if(g===r.t_eval_return)return g.$v;throw g}},-2)},Opal.modules["bcdice/dice_table/range_table"]=function(r){var D,j,p,f,x,o,A,U,F,w=r.module,G=r.klass,M=r.const_set,R=r.send,L=r.truthy,e=r.def,V=r.eqeqeq,T=r.rb_times,H=r.rb_plus,B=[],t=r.nil;return D=B,j=F=[w(B[0],"BCDice")].concat(D),p=U=[w(F[0],"DiceTable")].concat(j),x=[f=G(U[0],null,"RangeTable")].concat(p),o=r.$r(x),(A=f.$$prototype).name=A.items=A.num_of_dice=A.num_of_sides=A.formatter=t,M(x[0],"RollResult",R(o("Struct"),"new",["sum","values","content","formatted"],function g(){return(null==g.$$s?this:g.$$s).$alias_method("to_s","formatted")},{$$s:f})),M(x[0],"Item",o("Struct").$new("range","content")),M(x[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),M(x[0],"DEFAULT_FORMATTER",R(f,"lambda",[],function(i,n){return null==i&&(i=t),null==n&&(n=t),i.$name()+"("+n.$sum()+") \uff1e "+n.$content()})),f.$attr_reader("name"),f.$attr_reader("num_of_dice"),f.$attr_reader("num_of_sides"),e(f,"$initialize",function g(i,n,s){var l,_=g.$$p||t,a=this,c=t;return g.$$p=null,a.name=i.$freeze(),a.formatter=L(l=_)?l:o("DEFAULT_FORMATTER"),c=o("DICE_ROLL_METHOD_RE").$match(n),L(c)||a.$raise(o("ArgumentError"),a.name+": invalid dice roll method: "+n),a.num_of_dice=c["$[]"](1).$to_i(),a.num_of_sides=c["$[]"](2).$to_i(),a.$store(s)}),e(f,"$fetch",function(i){var s,n=this;return s=R(n.items,"find",[],function(a){return null==a&&(a=t),a.$range()["$include?"](i)}),L(s)||n.$raise(o("RangeError"),n.name+": value is out of range: "+i),s}),e(f,"$roll",function(i){var _,n=this,s=t,a=t;return _=(s=i.$roll_barabara(n.num_of_dice,n.num_of_sides)).$sum(),(a=o("RollResult").$new(_,s,n.$fetch(_).$content()))["$formatted="](n.formatter["$[]"](n,a)),a}),f.$private(),e(f,"$store",function(i){var s,_,n=this;return s=R(i,"map",[],function a(l,c){return null==l&&(l=t),null==c&&(c=t),[(null==a.$$s?this:a.$$s).$coerce_to_int_range(l),c]},{$$s:n}),_=R(s,"sort_by",[],function(l,c){return null==l&&(l=t),null==c&&(c=t),l.$min()}),n.$assert_min_sum_is_covered(_),n.$assert_max_sum_is_covered(_),n.$assert_no_gap_or_overlap_in_ranges(_),n.items=R(_,"map",[],function(l,c){return null==l&&(l=t),null==c&&(c=t),o("Item").$new(l,c.$freeze()).$freeze()}).$freeze(),n}),e(f,"$coerce_to_int_range",function(i){var s;return V(o("Integer"),s=i)?o("Range").$new(i,i):V(o("Range"),s)&&L(i.$begin()["$is_a?"](o("Integer")))&&L(i.$end()["$is_a?"](o("Integer")))?i:this.$raise(o("TypeError"),this.name+": "+i+" ("+i.$class()+") must be an Integer or a Range with Integers ")}),e(f,"$assert_min_sum_is_covered",function(i){var s,n=this,_=t;return s=n.num_of_dice,_=i.$first()["$[]"](0),L(_["$include?"](s))||n.$raise(o("RangeError"),n.name+": min value ("+s+") is not covered: "+_),n}),e(f,"$assert_max_sum_is_covered",function(i){var s,n=this,_=t;return s=T(n.num_of_dice,n.num_of_sides),_=i.$last()["$[]"](0),L(_["$include?"](s))||n.$raise(o("RangeError"),n.name+": max value ("+s+") is not covered: "+_),n}),e(f,"$assert_no_gap_or_overlap_in_ranges",function(i){return R(i,"each_cons",[2],function s(_,a){var C,d,l=null==s.$$s?this:s.$$s,c=t,h=t;return null==l.name&&(l.name=t),null==_&&(_=t),null==a&&(a=t),c=_["$[]"](0),h=a["$[]"](0),C=c.$max(),d=H(C,1),L(h["$include?"](C))&&l.$raise(o("RangeError"),l.name+": Range overlap: "+c+" and "+h),L(h["$include?"](d))?t:l.$raise(o("RangeError"),l.name+": Range gap: "+c+" and "+h)},{$$s:this}),this})},Opal.queue(function(r){var x,i,c,h,C,d,O,s,_,A,w=r.module,G=r.klass,M=r.const_set,R=r.truthy,L=r.eqeqeq,e=r.hash2,V=r.thrower,T=r.def,H=r.send,B=r.neqeq,t=r.rb_ge,y=r.rb_le,D=r.eqeq,P=r.rb_gt,F=r.rb_lt,K=r.rb_plus,j=r.rb_minus,S=r.range,U=r.top,k=[],$=r.nil,p=r.$$$;return U.$require("bcdice/arithmetic_evaluator"),U.$require("bcdice/dice_table/range_table"),x=k,i=A=[w(k[0],"BCDice")].concat(x),s=[w(A[0],"GameSystem")].concat(i),_=r.$r(s),c=s,C=[h=G(s[0],_("Base"),"MetalHead")].concat(c),d=r.$r(C),(O=h.$$prototype).round_type=O.randomizer=$,M(C[0],"ID","MetalHead"),M(C[0],"NAME","\u30e1\u30bf\u30eb\u30d8\u30c3\u30c9"),M(C[0],"SORT_KEY","\u3081\u305f\u308b\u3078\u3064\u3068"),M(C[0],"HELP_MESSAGE","\u30fb\u30a2\u30d3\u30ea\u30c6\u30a3\u30ed\u30fc\u30eb  AR>=\u76ee\u6a19\u5024\n\u30fb\u30b9\u30ad\u30eb\u30ed\u30fc\u30eb      SR<=\u76ee\u6a19\u5024(%)\n\u30fb\u547d\u4e2d\u5224\u5b9a\u30ed\u30fc\u30eb    HR<=\u76ee\u6a19\u5024(%)\n\n  \u4f8b\uff09AR>=5\n  \u4f8b\uff09SR<=(40+25)\n  \u4f8b\uff09HR<=(50-10)\n\n  \u3053\u308c\u3089\u306e\u30ed\u30fc\u30eb\u3067\u6210\u5426\u3001\u7d76\u5bfe\u6210\u529f/\u7d76\u5bfe\u5931\u6557\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb/\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\u3092\u81ea\u52d5\u5224\u5b9a\u3057\u307e\u3059\u3002\n\n\u30fb\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30c1\u30e3\u30fc\u30c8  CC\n\u30fb\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\u30c1\u30e3\u30fc\u30c8  \u5c04\u6483\u30fb\u6295\u64f2\u7528:ACL  \u683c\u95d8\u7528:ACS\n\u30fb\u6226\u95d8\u7d50\u679c\u30c1\u30e3\u30fc\u30c8      CRCsn   s=\u8010\u4e45\u30ec\u30d9\u30eb(SUV) n=\u6570\u5024\n\n  \u4f8b\uff09CRCA61 SUV=A\u3092\u5bfe\u8c61\u3068\u3057\u305f\u6570\u502461(62\u306b\u5909\u63db\u3055\u308c\u308b)\u306e\u6226\u95d8\u7d50\u679c\u3092\u53c2\u7167\u3059\u308b\u3002\n  \u4f8b\uff09CRCM98 \u5bfe\u7269\u3067\u6570\u502498\u306e\u6226\u95d8\u7d50\u679c\u3092\u53c2\u7167\u3059\u308b\u3002\n"),h.$register_prefix("AR","SR","HR<=","CC","ACT","ACL","ACS","CRC[A-Z]"),T(h,"$eval_game_system_specific_command",function(u){try{V("eval_return");var W,v=this,E=$,b=$,q=$,N=$;return W=v.$roll_tables(u,d("TABLES")),R(W)?W:L(/^CRC(\w)(\d+)$/,E=u)?(b=d("Regexp").$last_match(1),q=d("Regexp").$last_match(2),v.$mh_crc_table(b,q)):L(/^HR<=(.+)/,E)?(N=d("ArithmeticEvaluator").$eval(d("Regexp").$last_match(1),e(["round_type"],{round_type:v.round_type})),v.$rollHit(N)):$}catch(I){if(I===r.t_eval_return)return I.$v;throw I}}),T(h,"$change_text",function(u){return u=H(u,"gsub",[/^(S)?AR/i],function(){return d("Regexp").$last_match(1)+"2D6"}),H(u,"gsub",[/^(S)?SR/i],function(){return d("Regexp").$last_match(1)+"1D100"})}),T(h,"$result_2d6",function(u,m,v,W,E){return B(W,">=")?$:R(t(m,12))?d("Result").$critical("\u7d76\u5bfe\u6210\u529f"):R(y(m,2))?d("Result").$fumble("\u7d76\u5bfe\u5931\u6557"):$}),T(h,"$rollHit",function(u){var v;return"(1D100<="+u+") \uff1e "+(v=this.randomizer.$roll_once(100))+this.$getHitResult(v,v,u)}),T(h,"$result_1d100",function(u,m,v,W){return D(v,"<=")?R(y(m,5))?d("Result").$critical("\u7d76\u5bfe\u6210\u529f"):R(t(m,96))?d("Result").$fumble("\u7d76\u5bfe\u5931\u6557"):$:$}),T(h,"$getHitResult",function(u,m,v){var b;return b=u["$%"](100)["$%"](10),this.$debug("total_n",u),R(P(u,v))?" \uff1e \u5931\u6557":D(b,1)?" \uff1e \u6210\u529f\uff08\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\uff09":D(b,0)?" \uff1e \u5931\u6557\uff08\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\uff09":" \uff1e \u6210\u529f"}),T(h,"$mh_crc_table",function(u,m){var W,E,v=this,b=$,q=$,N=$,I=$,Y=$,X=$;return W=["\u6226\u95d8\u7d50\u679c\u30c1\u30e3\u30fc\u30c8",m],E=" \uff1e ",u=u.$to_s().$upcase(),b=m.$to_i(),R(F(b,1))?K(W,["\u6570\u5024\u304c\u4e0d\u6b63\u3067\u3059"]).$join(E):(q=b["$%"](10),v.$debug("num_d1["+q+"]"),D(q,1)&&(b=K(b,1)),D(q,0)&&(b=j(b,1)),q=b["$%"](10),v.$debug("num_d1["+q+"]"),N=[$,$,"\u8155\u90e8","\u8155\u90e8","\u811a\u90e8","\u811a\u90e8","\u80f4\u90e8","\u80f4\u90e8","\u80f4\u90e8","\u982d\u90e8"],I=e(["S","A","B","C","D","E","F","G","M"],{S:[e(["N"],{N:2}),e(["LW"],{LW:16}),e(["MD"],{MD:46}),e(["MW"],{MW:56}),e(["HD"],{HD:76}),e(["HW"],{HW:96}),e(["MO"],{MO:106}),e(["K"],{K:116})],A:[e(["LW"],{LW:2}),e(["MW"],{MW:46}),e(["HW"],{HW:76}),e(["MO"],{MO:96}),e(["K"],{K:116})],B:[e(["LW"],{LW:2}),e(["MW"],{MW:36}),e(["HW"],{HW:66}),e(["MO"],{MO:96}),e(["K"],{K:106})],C:[e(["LW"],{LW:2}),e(["MW"],{MW:26}),e(["HW"],{HW:66}),e(["MO"],{MO:86}),e(["K"],{K:106})],D:[e(["LW"],{LW:2}),e(["MW"],{MW:26}),e(["HW"],{HW:46}),e(["MO"],{MO:76}),e(["K"],{K:96})],E:[e(["LW"],{LW:2}),e(["MW"],{MW:26}),e(["HW"],{HW:39}),e(["MO"],{MO:54}),e(["K"],{K:76})],F:[e(["LW"],{LW:2}),e(["MW"],{MW:16}),e(["HW"],{HW:39}),e(["MO"],{MO:54}),e(["K"],{K:66})],G:[e(["LW"],{LW:2}),e(["MW"],{MW:6}),e(["HW"],{HW:16}),e(["MO"],{MO:26}),e(["K"],{K:39})],M:[e(["0"],{0:2}),e(["1"],{1:22}),e(["2"],{2:42}),e(["3"],{3:62}),e(["4"],{4:82}),e(["5"],{5:92}),e(["6"],{6:102}),e(["8"],{8:112})]}),R(I["$[]"](u)["$nil?"]())?K(W,["\u8010\u4e45\u30ec\u30d9\u30eb(SUV)["+u+"]","\u8010\u4e45\u30ec\u30d9\u30eb(SUV)\u306e\u5024\u304c\u4e0d\u6b63\u3067\u3059"]).$join(E):(Y="",H(I["$[]"](u),"each",[],function ee(Z){return null==Z&&(Z=$),H(Z,"each",[],function re(J,Q){return null==J&&(J=$),null==Q&&(Q=$),(null==re.$$s?this:re.$$s).$debug("suv["+u+"] "+Z+" "+J+" "+Q),R(y(Q,b))?Y=J:$},{$$s:null==ee.$$s?this:ee.$$s})},{$$s:v}),X=[],B(b,m.$to_i())&&X.$push(b.$to_s()),D(u,"M")?X.$push("\u8010\u7269","HP["+Y+"]"):X.$push("\u8010\u4e45\u30ec\u30d9\u30eb(SUV)["+u+"]","\u90e8\u4f4d["+N["$[]"](q)+"] \uff1a \u640d\u50b7\u7a2e\u5225["+Y+"]"),K(W,X).$join(E)))}),M(C[0],"TABLE_ROLL_RESULT_FORMATTER",H(h,"lambda",[],function(u,m){return null==u&&(u=$),null==m&&(m=$),[u.$name(),m.$sum(),m.$content()].$join(" \uff1e ")})),M(C[0],"TABLES",e(["CC","ACL","ACS"],{CC:H(p(d("DiceTable"),"RangeTable"),"new",["\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30c1\u30e3\u30fc\u30c8","1D10",[[1,"\u76f8\u624b\u306f\u77e5\u899a\u7cfb\u306b\u591a\u5927\u306a\u30c0\u30e1\u30fc\u30b8\u3092\u53d7\u3051\u305f\u3002PER\u30921\u306b\u3057\u3066\u982d\u90e8\u306bHW\u306e\u30c0\u30e1\u30fc\u30b8\u3001\u304a\u3088\u3073\u5fc3\u7406\u30c1\u30a7\u30c3\u30af\u3002"],[2,"\u76f8\u624b\u306e\u904b\u52d5\u795e\u7d4c\u3092\u65ad\u3061\u5207\u3063\u305f\u3002DEX\u30921\u306b\u3057\u3066\u8155\u90e8\u306bHW\u306e\u30c0\u30e1\u30fc\u30b8\u3001\u304a\u3088\u3073\u5fc3\u7406\u30c1\u30a7\u30c3\u30af\u3002\u3055\u3089\u306b\u8155\u306b\u6301\u3063\u3066\u3044\u305f\u6b66\u5668\u306a\u3069\u306f\u843d\u3068\u3057\u3066\u3057\u307e\u3046\u3002"],[3,"\u76f8\u624b\u306e\u79fb\u52d5\u624b\u6bb5\u306f\u5b8c\u5168\u306b\u596a\u308f\u308c\u305f\u3002REF\u30921\u306b\u3057\u3066\u811a\u90e8\u306bHW\u30c0\u30e1\u30fc\u30b8\u3068\u5fc3\u7406\u30c1\u30a7\u30c3\u30af\u3002\u307e\u305f\u3001\u6b21\u56de\u304b\u3089\u306e\u3053\u3061\u3089\u306e\u653b\u6483\u306f\u5fc5\u305a\u547d\u4e2d\u3059\u308b\u3002"],[S(4,5,!1),"\u76f8\u624b\u306e\u6025\u6240\u306b\u547d\u4e2d\u3002\u6fc0\u75db\u306e\u305f\u3081\u6c17\u7d76\u3057\u305f\u4e0a\u3001\u80f4\u306bHW\u30c0\u30e1\u30fc\u30b8\u3002"],[6,"\u52b9\u679c\u7684\u306a\u4e00\u6483\u3002\u80f4\u306bHW\u30c0\u30e1\u30fc\u30b8\u3002\u5fc3\u7406\u30c1\u30a7\u30c3\u30af\u3002"],[7,"\u52b9\u679c\u7684\u306a\u4e00\u6483\u3002\u80f4\u306bMO\u30c0\u30e1\u30fc\u30b8\u3002\u5fc3\u7406\u30c1\u30a7\u30c3\u30af\u3002"],[S(8,10,!1),"\u541b\u306e\u4e00\u6483\u306f\u76f8\u624b\u306e\u4e2d\u67a2\u3092\u5b8c\u5168\u306b\u7834\u58ca\u3057\u305f\u3002\u5373\u6b7b\u3067\u3042\u308b\u3002"]]],d("TABLE_ROLL_RESULT_FORMATTER").$to_proc()),ACL:H(p(d("DiceTable"),"RangeTable"),"new",["\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\u30c1\u30e3\u30fc\u30c8\uff08\u5c04\u6483\u30fb\u6295\u64f2\uff09","1D10",[[S(1,7,!1),"\u3055\u3055\u3044\u306a\u30df\u30b9\u3002\u7279\u306b\u30da\u30ca\u30eb\u30c6\u30a3\u30fc\u306f\u306a\u3044\u3002"],[8,"\u4e0d\u767a\u3001\u307e\u305f\u306f\u30b8\u30e3\u30e0\u3002\u5f3e\u3092\u53d6\u308a\u51fa\u3055\u306d\u3070\u306a\u3089\u306a\u3044\u7269\u306f\u6b21\u306e\u30bf\u30fc\u30f3\u306f\u5c04\u6483\u3067\u304d\u306a\u3044\u3002"],[9,"\u3055\u3055\u3044\u306a\u6545\u969c\u3002\u53ef\u80fd\u306a\u3089\u6b21\u306e\u30bf\u30fc\u30f3\u304b\u3089\u500b\u5225\u6b66\u5668\u306e\u30b9\u30ad\u30eb\u30ed\u30fc\u30eb\u3067\u4fee\u7406\u3092\u884c\u3048\u308b\u3002"],[10,"\u6b66\u5668\u306e\u66b4\u767a\u3001\u307e\u305f\u306f\u7206\u767a\u3002\u982d\u90e8HW\u306e\u5fc3\u7406\u52b9\u679c\u30ed\u30fc\u30eb\u3002\u3055\u3089\u306b\u3001\u305d\u306e\u6b66\u5668\u306f\u7834\u58ca\u3055\u308cPER\u3068DEX\u306e\u3069\u3061\u3089\u304b\u3001\u307e\u305f\u306f\u4e21\u65b9\u306b\u8a082\u30dd\u30a4\u30f3\u30c8\u306e\u30de\u30a4\u30ca\u30b9\u3092\u4e0e\u3048\u308b\u3002\uff08\u9060\u9694\u64cd\u4f5c\u306e\u5834\u5408\u3001\u5c04\u624b\u3078\u306e\u88ab\u5bb3\u306f\u7121\u3057\uff09"]]],d("TABLE_ROLL_RESULT_FORMATTER").$to_proc()),ACS:H(p(d("DiceTable"),"RangeTable"),"new",["\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\u30c1\u30e3\u30fc\u30c8\uff08\u683c\u95d8\uff09","1D10",[[S(1,3,!1),"\u8db3\u3092\u6ed1\u3089\u305b\u3066\u8ee2\u5012\u3057\u3001\u8d77\u304d\u4e0a\u304c\u308b\u307e\u3067\u76f8\u624b\u306b+20\u306e\u547d\u4e2d\u4fee\u6b63\u3092\u4e0e\u3048\u308b\u3002"],[S(4,6,!1),"\u624b\u3092\u6ed1\u3089\u305b\u3066\u3001\u6b66\u5668\u3092\u843d\u3068\u3059\u3002\u7d20\u624b\u306e\u6642\u306f\u95a2\u4fc2\u306a\u3044\u3002"],[S(7,9,!1),"\u4f7f\u7528\u6b66\u5668\u306e\u7834\u58ca\u3002\u7d20\u624b\u6226\u95d8\u306e\u3068\u304d\u306fMW\u306e\u30c0\u30e1\u30fc\u30b8\u3092\u53d7\u3051\u308b\u3002"],[10,"\u624b\u3092\u6ed1\u3089\u305b\u3001\u4e0d\u5e78\u306b\u3082\u6b66\u5668\u306f\u98db\u3093\u3067\u3044\u304d\u30015m\u4ee5\u5185\u306b\u4eba\u304c\u3044\u308c\u3070\u8ab0\u304b\u306b\u523a\u3055\u308b\u304b\u3001\u307e\u305f\u306f\u6253\u6483\u3092\u4e0e\u3048\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\u30e9\u30f3\u30c0\u30e0\u306b\u6c7a\u5b9a\u3057\u3001\u666e\u901a\u3069\u304a\u308a\u5224\u5b9a\u3092\u7d9a\u3051\u308b\u3002\u7d20\u624b\u306e\u3068\u304d\u306f\u95a2\u4fc2\u306a\u3044\u3002"]]],d("TABLE_ROLL_RESULT_FORMATTER").$to_proc())}).$freeze())})}}]);