(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[1091],{2004:(V,X,Y)=>{Y(9993),Opal.modules["bcdice/normalize"]=function(t){var q,g,W,y=t.module,l=t.eqeqeq,d=t.def,x=t.eqeq,S=[],c=t.nil;return q=S,W=[y(S[0],"BCDice")].concat(q),(g=y(W[0],"Normalize")).$module_function(),d(g,"$comparison_operator",function(h){var b;return l(/<=|=</,b=h)?"<=":l(/>=|=>/,b)?">=":l(/<>|!=|=!/,b)?"!=":l(/</,b)?"<":l(/>/,b)?">":l(/=/,b)?"==":c}),d(g,"$target_number",function(h){return x(h,"?")?h:h.$to_i()})},Opal.modules["bcdice/format"]=function(t){var W,h,b,P,F,g,y=t.module,l=t.eqeqeq,d=t.def,x=t.truthy,S=t.eqeq,c=t.rb_gt,_=[],q=t.nil;return W=_,h=g=[y(_[0],"BCDice")].concat(W),P=[b=y(g[0],"Format")].concat(h),F=t.$r(P),b.$module_function(),d(b,"$comparison_operator",function(v){var k;return l("==",k=v)?"=":l("!=",k)?"<>":l(F("Symbol"),k)?v.$to_s():q}),d(b,"$modifier",function(v){return x(v["$nil?"]())?q:S(v,0)?"":x(c(v,0))?"+"+v:v.$to_s()})},Opal.modules["bcdice/game_system/NightWizard"]=function(t){var k,D,J,Q,U,e,p,E,w,R,T,B,A,y=t.module,l=t.klass,d=t.const_set,x=t.send2,S=t.find_super,c=t.def,_=t.truthy,q=t.to_ary,m=t.rb_plus,W=t.regexp,z=t.send,g=t.thrower,N=t.eqeq,h=t.neqeq,b=t.rb_minus,P=t.top,F=[],r=t.nil;return P.$require("bcdice/normalize"),P.$require("bcdice/format"),k=F,D=A=[y(F[0],"BCDice")].concat(k),T=[y(A[0],"GameSystem")].concat(D),B=t.$r(T),J=T[0],Q=B("Base"),U=T,E=[p=l(J,Q,"NightWizard")].concat(U),w=t.$r(E),(R=p.$$prototype).nw_command=R.randomizer=R.total=R.interim_expr=R.status=R.fumble_numbers=R.critical_numbers=r,d(E[0],"ID","NightWizard"),d(E[0],"NAME","\u30ca\u30a4\u30c8\u30a6\u30a3\u30b6\u30fc\u30c9 The 2nd Edition"),d(E[0],"SORT_KEY","\u306a\u3044\u3068\u3046\u3044\u3055\u3042\u30682"),d(E[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u7528\u30b3\u30de\u30f3\u30c9\u3000(aNW+b@x#y$z+c)\n\u3000\u3000a : \u57fa\u672c\u5024\n\u3000\u3000b : \u5e38\u6642\u306b\u6e96\u3058\u308b\u7279\u6280\u306b\u3088\u308b\u88dc\u6b63\n\u3000\u3000c : \u5e38\u6642\u4ee5\u5916\u306e\u7279\u6280\u3001\u304a\u3088\u3073\u652f\u63f4\u52b9\u679c\u306b\u3088\u308b\u88dc\u6b63\uff08\u30d5\u30a1\u30f3\u30d6\u30eb\u6642\u306b\u306f\u9069\u7528\u3055\u308c\u306a\u3044\uff09\n\u3000\u3000x : \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u306e\u30ab\u30f3\u30de\u533a\u5207\u308a\uff08\u7701\u7565\u6642 10\uff09\n\u3000\u3000y : \u30d5\u30a1\u30f3\u30d6\u30eb\u5024\u306e\u30ab\u30f3\u30de\u533a\u5207\u308a\uff08\u7701\u7565\u6642 5\uff09\n\u3000\u3000z : \u30d7\u30e9\u30fc\u30ca\u306b\u3088\u308b\u9054\u6210\u5024\u88dc\u6b63\u306e\u30d7\u30e9\u30fc\u30ca\u6d88\u8cbb\u6570\uff08\u30d5\u30a1\u30f3\u30d6\u30eb\u6642\u306b\u306f\u9069\u7528\u3055\u308c\u306a\u3044\uff09\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\u304c\u7121\u3044\u5834\u5408\u306f1\u308413\u306a\u3069\u306e\u3042\u308a\u5f97\u306a\u3044\u6570\u5024\u3092\u5165\u308c\u3066\u304f\u3060\u3055\u3044\u3002\n\u3000\u4f8b\uff0912NW-5@7#2$3 1NW 50nw+5@7,10#2,5 50nw-5+10@7,10#2,5+15+25\n"),p.$register_prefix("([-+]?\\d+)?NW","2R6"),c(p,"$initialize",function f(u){var n=this;return f.$$p=null,x(n,S(n,"initialize",f,!1,!0),"initialize",[u],null),n.nw_command="NW"}),c(p,"$eval_game_system_specific_command",function(u){var e,n,s,$=this,i=r,o=r,a=r,C=r,M=r;return i=_(s=$.$parse_nw(u))?s:$.$parse_2r6(u),_(i)?(n=$.$roll_nw(i),o=null==(e=q(n))[0]?r:e[0],a=null==e[1]?r:e[1],C=null==e[2]?r:e[2],M=_(i.$cmp_op())?_(o.$send(i.$cmp_op(),i.$target_number()))?"\u6210\u529f":"\u5931\u6557":r,["("+i+")",a,C,o.$to_s(),M].$compact().$join(" \uff1e ")):r}),p.$private(),(e=l(E[0],null,"Parsed")).$attr_accessor("critical_numbers"),e.$attr_accessor("fumble_numbers"),e.$attr_accessor("prana"),e.$attr_accessor("active_modify_number"),e.$attr_accessor("cmp_op"),e.$attr_accessor("target_number"),function(f,u,e){var n=l(f,u,"ParsedNW"),$=[n].concat(e),i=t.$r($),s=n.$$prototype;s.base=s.modify_number=s.active_modify_number=s.prana=s.command=s.critical_numbers=s.fumble_numbers=s.cmp_op=s.target_number=r,n.$attr_accessor("base"),n.$attr_accessor("modify_number"),c(n,"$initialize",function o(a){var M=this;return o.$$p=null,x(M,S(M,"initialize",o,!1,!0),"initialize",[],null),M.command=a}),c(n,"$passive_modify_number",function(){return m(this.base,this.modify_number)}),c(n,"$to_s",function(){var C,M,G,K,L,a=this;return C=_(a.base["$zero?"]())?r:a.base,M=i("Format").$modifier(a.modify_number),G=i("Format").$modifier(a.active_modify_number),K=_(L=a.prana)?"$"+a.prana:L,""+C+a.command+M+"@"+a.critical_numbers.$join(",")+"#"+a.fumble_numbers.$join(",")+K+G+a.cmp_op+a.target_number})}(E[0],w("Parsed"),E),function(f,u){var e=l(f,u,"Parsed2R6"),n=e.$$prototype;n.passive_modify_number=n.active_modify_number=n.critical_numbers=n.fumble_numbers=n.cmp_op=n.target_number=r,e.$attr_accessor("passive_modify_number"),c(e,"$to_s",function(){var i=this;return"2R6M["+i.passive_modify_number+","+i.active_modify_number+"]C["+i.critical_numbers.$join(",")+"]F["+i.fumble_numbers.$join(",")+"]"+i.cmp_op+i.target_number})}(E[0],w("Parsed")),c(p,"$parse_nw",function(u){try{g("eval_return");var n,$,s=r,o=r;return s=W(["^([-+]?\\d+)?",this.nw_command,"((?:[-+]\\d+)+)?(?:@(\\d+(?:,\\d+)*))?(?:#(\\d+(?:,\\d+)*))?(?:\\$(\\d+(?:,\\d+)*))?((?:[-+]\\d+)+)?(?:([>=]+)(\\d+))?$"]).$match(u),_(s)?((o=w("ParsedNW").$new(this.nw_command))["$base="](s["$[]"](1).$to_i()),o["$modify_number="](w("ArithmeticEvaluator").$eval(s["$[]"](2))),o["$critical_numbers="](_(s["$[]"](3))?z(s["$[]"](3).$split(","),"map",[],"to_i".$to_proc()):[10]),o["$fumble_numbers="](_(s["$[]"](4))?z(s["$[]"](4).$split(","),"map",[],"to_i".$to_proc()):[5]),o["$prana="]((n=s["$[]"](5))===r||null==n?r:n.$to_i()),o["$active_modify_number="](w("ArithmeticEvaluator").$eval(s["$[]"](6))),o["$cmp_op="](w("Normalize").$comparison_operator(s["$[]"](7))),o["$target_number="](($=s["$[]"](8))===r||null==$?r:$.$to_i()),o):r}catch(a){if(a===t.t_eval_return)return a.$v;throw a}}),c(p,"$parse_2r6",function(u){try{g("eval_return");var n,$=r,i=r;return $=/^2R6m\[([-+]?\d+(?:[-+]\d+)*)(?:,([-+]?\d+(?:[-+]\d+)*))?\](?:c\[(\d+(?:,\d+)*)\])?(?:f\[(\d+(?:,\d+)*)\])?(?:([>=]+)(\d+))?/i.$match(u),_($)?((i=w("Parsed2R6").$new())["$passive_modify_number="](w("ArithmeticEvaluator").$eval($["$[]"](1))),i["$active_modify_number="](w("ArithmeticEvaluator").$eval($["$[]"](2))),i["$critical_numbers="](_($["$[]"](3))?z($["$[]"](3).$split(","),"map",[],"to_i".$to_proc()):[10]),i["$fumble_numbers="](_($["$[]"](4))?z($["$[]"](4).$split(","),"map",[],"to_i".$to_proc()):[5]),i["$cmp_op="](w("Normalize").$comparison_operator($["$[]"](5))),i["$target_number="]((n=$["$[]"](6))===r||null==n?r:n.$to_i()),i):r}catch(s){if(s===t.t_eval_return)return s.$v;throw s}}),c(p,"$roll_nw",function(u){var e=this,n=r,$=r,i=r,s=r,o=r;for(e.critical_numbers=u.$critical_numbers(),e.fumble_numbers=u.$fumble_numbers(),e.total=0,e.interim_expr="",e.status=r,n=e.$roll_once_first();N(n,"critical");)n=e.$roll_once();return h(n,"fumble")&&_(u.$prana())&&(i=($=e.randomizer.$roll_barabara(u.$prana(),6)).$sum(),s=$.$join(","),e.total=m(e.total,i),e.interim_expr=m(e.interim_expr,"+"+i+"["+s+"]")),o=N(n,"fumble")?e.$fumble_base_number(u):m(u.$passive_modify_number(),u.$active_modify_number()),e.total=m(e.total,o),e.interim_expr=m(o.$to_s(),e.interim_expr),[e.total,e.interim_expr,e.status]}),c(p,"$roll_once",function(u){var $,i,e=this,n=r;return null==u&&(u=!1),$=(n=e.randomizer.$roll_barabara(2,6)).$sum(),i=n.$join(","),_(u)&&_(e.fumble_numbers["$include?"]($))?(e.total=b(e.total,10),e.interim_expr=m(e.interim_expr,"-10["+i+"]"),e.status="\u30d5\u30a1\u30f3\u30d6\u30eb","fumble"):_(e.critical_numbers["$include?"]($))?(e.total=m(e.total,10),e.interim_expr=m(e.interim_expr,"+10["+i+"]"),e.status="\u30af\u30ea\u30c6\u30a3\u30ab\u30eb","critical"):(e.total=m(e.total,$),e.interim_expr=m(e.interim_expr,"+"+$+"["+i+"]"),r)},-1),c(p,"$roll_once_first",function(){return this.$roll_once(!0)}),c(p,"$fumble_base_number",function(u){return u.$passive_modify_number()})},Opal.queue(function(t){var z,b,H,A,j,F,r,N,y=t.module,l=t.klass,d=t.const_set,x=t.send2,S=t.find_super,c=t.def,q=[];return t.top.$require("bcdice/game_system/NightWizard"),z=q,b=N=[y(q[0],"BCDice")].concat(z),F=[y(N[0],"GameSystem")].concat(b),r=t.$r(F),H=F,d((j=[A=l(F[0],r("NightWizard"),"SevenFortressMobius")].concat(H))[0],"ID","SevenFortressMobius"),d(j[0],"NAME","\u30bb\u30d6\u30f3\uff1d\u30d5\u30a9\u30fc\u30c8\u30ec\u30b9 \u30e1\u30d3\u30a6\u30b9"),d(j[0],"SORT_KEY","\u305b\u3075\u3093\u3075\u304a\u304a\u3068\u308c\u3059\u3081\u3072\u3046\u3059"),d(j[0],"HELP_MESSAGE",'\u30fb\u5224\u5b9a\u7528\u30b3\u30de\u30f3\u30c9\u3000(nSFM+m@x#y)\n\u3000"(\u57fa\u672c\u5024)SFM(\u5e38\u6642\u304a\u3088\u3073\u5e38\u6642\u306b\u6e96\u3058\u308b\u7279\u6280\u7b49\u53ca\u3073\u72b6\u614b\u7570\u5e38\uff08\u7701\u7565\u53ef\uff09)@(\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024)#(\u30d5\u30a1\u30f3\u30d6\u30eb\u5024)\uff08\u5e38\u6642\u4ee5\u5916\u306e\u7279\u6280\u7b49\u53ca\u3073\u5473\u65b9\u306e\u652f\u63f4\u52b9\u679c\u7b49\u306e\u5f71\u97ff\uff08\u7701\u7565\u53ef\uff09\uff09"\u3067\u30ed\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u3000R\u30b3\u30de\u30f3\u30c9(2R6m[n,m]c[x]f[y]>=t t\u306f\u76ee\u6a19\u5024)\u306b\u8aad\u66ff\u3055\u308c\u307e\u3059\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\u304c\u7121\u3044\u5834\u5408\u306f1\u308413\u306a\u3069\u306e\u3042\u308a\u5f97\u306a\u3044\u6570\u5024\u3092\u5165\u308c\u3066\u304f\u3060\u3055\u3044\u3002\n\u3000\u4f8b\uff0912SFM-5@7#2\u3000\u30001SFM\u3000\u300050SFM+5@7,10#2,5\u300050SFM-5+10@7,10#2,5+15+25\n'),A.$register_prefix("([-+]?\\d+)?SFM","2R6"),c(A,"$initialize",function D(I){var B=this;return D.$$p=null,x(B,S(B,"initialize",D,!1,!0),"initialize",[I],null),B.nw_command="SFM"})})}}]);