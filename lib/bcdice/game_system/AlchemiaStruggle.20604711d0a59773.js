(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[5225],{6510:(he,be,ve)=>{ve(9993),Opal.modules["i18n/backend/fallbacks"]=function(e){var G,i,r,a,s,v,F=e.module,B=e.class_variable_set,u=e.truthy,L=e.class_variable_get,w=e.def,T=e.send,U=e.send2,D=e.find_super,E=e.hash2,P=e.find_block_super,S=e.neqeq,j=e.thrower,Y=e.return_val,M=[],R=e.nil,g=e.$$$;return G=M,v=[s=F(M[0],"I18n")].concat(G),B(v[0],"@@fallbacks",R),i=e.get_singleton_class(s),r=[i].concat(v),a=e.$r(r),w(i,"$fallbacks",function(){var C=R;return B(r[1],"@@fallbacks",u(null!=r[1].$$cvars["@@fallbacks"]?"class variable":R)&&u(C=L(r[1],"@@fallbacks",!1))?C:g(g(a("I18n"),"Locale"),"Fallbacks").$new()),u(C=a("Thread").$current()["$[]"]("i18n_fallbacks"))?C:L(r[1],"@@fallbacks",!1)}),w(i,"$fallbacks=",function(I){var C;return B(r[1],"@@fallbacks",u(I["$is_a?"](a("Array")))?g(g(a("I18n"),"Locale"),"Fallbacks").$new(I):I),C=["i18n_fallbacks",L(r[1],"@@fallbacks",!1)],T(a("Thread").$current(),"[]=",C),C[C.length-1]}),function(i,q){var I,C,x,l,a=[F(i,"Backend")].concat(q);return I=a,x=[C=F(a[0],"Fallbacks")].concat(I),l=e.$r(x),w(C,"$translate",function b(_,p,c){try{var y=j("return"),o=b.$$p||R,A=this,m=R,f=R;return b.$$p=null,null==c&&(c=l("EMPTY_HASH")),u(c.$fetch("fallback",!0))?u(c["$[]"]("fallback_in_progress"))?U(A,D(A,"translate",b,!1,!0),"translate",[_,p,c],o):(u(c["$[]"]("default"))&&(m=A["$extract_non_symbol_default!"](c)),f=c.$merge(E(["fallback_in_progress"],{fallback_in_progress:!0})),T(l("I18n").$fallbacks()["$[]"](_),"each",[],function n(k){var t=null==n.$$s?this:n.$$s;null==k&&(k=R);try{return T(t,"catch",["exception"],function d(){var $=null==d.$$s?this:d.$$s,Q=R;if(Q=U($,P($,"translate",d.$$def||n.$$def||b,!1,!1),"translate",[k,p,f],null),u(Q["$nil?"]()))return R;S(_.$to_s(),k.$to_s())&&$.$on_fallback(_,k,p,c),y.$throw(Q)},{$$s:t,$$ret:y})}catch(d){if(!e.rescue(d,[g(l("I18n"),"InvalidLocale")]))throw d;try{return R}finally{e.pop_exception()}}},{$$s:A}),u(c["$key?"]("default"))&&u(c["$[]"]("default")["$nil?"]())?R:u(m)?U(A,D(A,"translate",b,!1,!0),"translate",[_,R,c.$merge(E(["default"],{default:m}))],null):A.$throw("exception",g(l("I18n"),"MissingTranslation").$new(_,p,c))):U(A,D(A,"translate",b,!1,!0),"translate",[_,p,c],o)}catch(n){if(n===y)return n.$v;throw n}},-3),w(C,"$extract_non_symbol_default!",function(_){var c,p=R;return p=[_["$[]"]("default")].$flatten(),c=T(p,"detect",[],function(o){return null==o&&(o=R),o["$is_a?"](l("Symbol"))["$!"]()}),u(c)&&_["$[]="]("default",p["$[]"](0,p.$index(c))),c}),w(C,"$exists?",function b(_,p,c){try{var y=j("return"),o=b.$$p||R,A=this;return b.$$p=null,null==c&&(c=l("EMPTY_HASH")),u(c.$fetch("fallback",!0))?(T(l("I18n").$fallbacks()["$[]"](_),"each",[],function m(f){var n=null==m.$$s?this:m.$$s;null==f&&(f=R);try{if(!u(U(n,P(n,"exists?",m.$$def||b,!1,!1),"exists?",[f,p],null)))return R;y.$throw(!0)}catch(k){if(!e.rescue(k,[g(l("I18n"),"InvalidLocale")]))throw k;try{return R}finally{e.pop_exception()}}},{$$s:A,$$ret:y}),!1):U(A,D(A,"exists?",b,!1,!0),"exists?",[_,p,c],o)}catch(m){if(m===y)return m.$v;throw m}},-3),C.$private(),w(C,"$on_fallback",Y(R))}(v[0],v)},Opal.modules["bcdice/randomizer"]=function(e){var s,h,I,C,x,l,i,q,B=e.klass,u=e.const_set,L=e.def,w=e.truthy,T=e.rb_gt,U=e.rb_plus,D=e.rb_le,E=e.send,P=e.rb_minus,S=e.eqeq,j=e.rb_times,Y=e.eqeqeq,M=e.rb_ge,R=[],g=e.nil,K=e.$$$;return s=R,i=[(0,e.module)(R[0],"BCDice")].concat(s),q=e.$r(i),h=i,C=[I=B(i[0],null,"Randomizer")].concat(h),x=e.$r(C),(l=I.$$prototype).rand_results=l.detailed_rand_results=g,u(C[0],"UPPER_LIMIT_DICE_TIMES",200),u(C[0],"UPPER_LIMIT_DICE_SIDES",1e4),u(C[0],"UPPER_LIMIT_RANDS",1e4),L(I,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),I.$attr_reader("rand_results"),I.$attr_reader("detailed_rand_results"),u(C[0],"DetailedRandResult",x("Struct").$new("kind","sides","value")),L(I,"$roll_barabara",function(_,p){var c=this;return w(T(U(c.rand_results.$size(),_),x("UPPER_LIMIT_RANDS")))&&c.$raise(x("TooManyRandsError")),w(D(_,0))||w(T(_,x("UPPER_LIMIT_DICE_TIMES")))?[]:E(x("Array"),"new",[_],function y(){return(null==y.$$s?this:y.$$s).$roll_once(p)},{$$s:c})}),L(I,"$roll_sum",function(_,p){return this.$roll_barabara(_,p).$sum()}),L(I,"$roll_once",function(_){var c=g;return w(D(_,0))||w(T(_,x("UPPER_LIMIT_DICE_SIDES")))?0:(c=this.$rand_inner(_),this.$push_to_detail("normal",_,c),c)}),L(I,"$roll_index",function(_){return P(this.$roll_once(_),1)}),L(I,"$roll_tens_d10",function(){var c,p=g;return p=this.$rand_inner(10),S(p,10)&&(p=0),c=j(p,10),this.$push_to_detail("tens_d10",10,c),c}),L(I,"$roll_d9",function(){var p;return p=P(this.$rand_inner(10),1),this.$push_to_detail("d9",10,p),p}),L(I,"$roll_d66",function(_){var y,c=g;return c=E(x("Array"),"new",[2],function o(){return(null==o.$$s?this:o.$$s).$roll_once(6)},{$$s:this}),Y(K(x("D66SortType"),"ASC"),y=_)?c["$sort!"]():Y(K(x("D66SortType"),"DESC"),y)&&c["$sort!"]()["$reverse!"](),U(j(c["$[]"](0),10),c["$[]"](1))}),I.$private(),L(I,"$rand_inner",function(_){var c,p=this;return w(M(p.rand_results.$size(),x("UPPER_LIMIT_RANDS")))&&p.$raise(x("TooManyRandsError")),c=p.$random(_),p.rand_results["$<<"]([c,_]),c}),L(I,"$random",function(_){return U(x("Kernel").$rand(_),1)}),L(I,"$push_to_detail",function(_,p,c){var o;return o=x("DetailedRandResult").$new(_,p,c),this.detailed_rand_results.$push(o)}),B(i[0],q("StandardError"),"TooManyRandsError"),g},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var E,Y,G,s,v,i,q,R,S,F=e.module,B=e.klass,u=e.def,L=e.truthy,w=e.return_val,T=[],U=e.nil;return E=T,Y=S=[F(T[0],"BCDice")].concat(E),G=R=[F(S[0],"DiceTable")].concat(Y),v=[s=B(R[0],null,"RollResult")].concat(G),i=e.$r(v),(q=s.$$prototype).table_name=q.value=q.body=U,u(s,"$initialize",function(a,h,I){var C=this;return C.table_name=a,C.value=h,C.body=I}),s.$attr_reader("table_name"),s.$attr_reader("value"),s.$attr_reader("body"),u(s,"$to_s",function(){var a=this;return a.table_name+"("+a.value+") \uff1e "+a.body}),u(s,"$last_body",function(){var a=this;return L(a.body["$is_a?"](i("RollResult")))?a.body.$last_body():a.body}),u(s,"$empty?",w(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var E,Y,G,s,v,i,q,R,S,F=e.module,B=e.klass,u=e.truthy,L=e.def,w=e.rb_minus,T=[],U=e.nil;return E=T,Y=S=[F(T[0],"BCDice")].concat(E),G=R=[F(S[0],"DiceTable")].concat(Y),v=[s=B(R[0],null,"ChainTable")].concat(G),i=e.$r(v),(q=s.$$prototype).times=q.sides=q.items=q.name=U,L(s,"$initialize",function(a,h,I){var C=this,x=U;return C.name=a,C.items=I.$freeze(),x=/(\d+)D(\d+)/i.$match(h),u(x)||C.$raise(i("ArgumentError"),"Unexpected table type: "+h),C.times=x["$[]"](1).$to_i(),C.sides=x["$[]"](2).$to_i()}),L(s,"$roll",function(a){var I,C,h=this,x=U;return I=a.$roll_sum(h.times,h.sides),C=w(I,h.times),x=h.items["$[]"](C),u(x["$respond_to?"]("roll"))&&(x=x.$roll(a)),i("RollResult").$new(h.name,I,x)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var j,g,i,q,r,a,h,G,M,F=e.module,B=e.klass,u=e.hash2,L=e.defs,w=e.def,T=e.rb_plus,U=e.rb_times,D=e.rb_minus,E=[],P=e.nil;return j=E,g=M=[F(E[0],"BCDice")].concat(j),i=G=[F(M[0],"DiceTable")].concat(g),r=[q=B(G[0],null,"D66GridTable")].concat(i),a=e.$r(r),(h=q.$$prototype).name=h.items=P,L(q,"$from_i18n",function(C,x){var b=P;return b=a("I18n").$t(C,u(["locale","raise"],{locale:x,raise:!0})),this.$new(b["$[]"]("name"),b["$[]"]("items"))}),w(q,"$initialize",function(C,x){return this.name=C,this.items=x.$freeze()}),w(q,"$roll",function(C){var l,b,_,p,c;return l=C.$roll_once(6),b=C.$roll_once(6),_=T(U(l,10),b),p=D(l,1),c=D(b,1),a("RollResult").$new(this.name,_,this.items["$[]"](p)["$[]"](c))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var P,M,v,i,q,r,g,K,j,F=e.module,B=e.klass,u=e.hash2,L=e.defs,w=e.def,U=[],D=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),P=U,M=j=[F(U[0],"BCDice")].concat(P),g=[F(j[0],"DiceTable")].concat(M),K=e.$r(g),v=g,q=[i=B(g[0],K("D66GridTable"),"D66HalfGridTable")].concat(v),r=e.$r(q),L(i,"$from_i18n",function(h,I){var x=D;return x=r("I18n").$t(h,u(["locale","raise"],{locale:I,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items_1_2_3"),x["$[]"]("items_4_5_6"))}),w(i,"$initialize",function(h,I,C){return this.name=h,this.items=[I,I,I,C,C,C].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var P,M,v,i,q,r,g,K,j,F=e.module,B=e.klass,u=e.hash2,L=e.defs,w=e.def,U=[],D=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),P=U,M=j=[F(U[0],"BCDice")].concat(P),g=[F(j[0],"DiceTable")].concat(M),K=e.$r(g),v=g,q=[i=B(g[0],K("D66GridTable"),"D66OneThirdTable")].concat(v),r=e.$r(q),L(i,"$from_i18n",function(h,I){var x=D;return x=r("I18n").$t(h,u(["locale","raise"],{locale:I,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items_1_2"),x["$[]"]("items_3_4"),x["$[]"]("items_5_6"))}),w(i,"$initialize",function(h,I,C,x){return this.name=h,this.items=[I,I,C,C,x,x].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var M,G,r,a,h,I,C,v,g,F=e.module,B=e.klass,u=e.hash2,L=e.defs,w=e.def,T=e.eqeqeq,U=e.rb_plus,D=e.rb_times,E=e.truthy,P=[],S=e.nil,j=e.$$$;return M=P,G=g=[F(P[0],"BCDice")].concat(M),r=v=[F(g[0],"DiceTable")].concat(G),h=[a=B(v[0],null,"D66Table")].concat(r),I=e.$r(h),(C=a.$$prototype).sort_type=C.items=C.name=S,L(a,"$from_i18n",function(l,b){var c,p=S;return p=I("I18n").$t(l,u(["locale"],{locale:b})),c=I("D66SortType").$const_get(p["$[]"]("d66_sort_type")),this.$new(p["$[]"]("name"),c,p["$[]"]("items"))}),w(a,"$initialize",function(l,b,_){var p=this;return p.name=l,p.sort_type=b,p.items=_.$freeze()}),w(a,"$roll",function(l){var b=this,_=S,p=S,c=S,y=S;return _=l.$roll_barabara(2,6),T(j(I("D66SortType"),"ASC"),p=b.sort_type)?_["$sort!"]():T(j(I("D66SortType"),"DESC"),p)&&_["$sort!"]()["$reverse!"](),c=U(D(_["$[]"](0),10),_["$[]"](1)),y=E(p=b.items["$[]"](c))?p:b.items["$[]"](c.$to_s()),E(y["$respond_to?"]("roll"))&&(y=y.$roll(l)),I("RollResult").$new(b.name,c,y)}),w(a,"$choice",function(l){return I("RollResult").$new(this.name,l,this.items["$[]"](l))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){var R,s,i,q,K,F=e.module,B=e.klass,u=e.hash2,L=e.send,w=e.to_ary,T=e.rb_plus,U=e.rb_times,D=e.send2,E=e.find_super,P=e.def,j=[],Y=e.nil;return e.top.$require("bcdice/dice_table/d66_table"),R=j,s=K=[F(j[0],"BCDice")].concat(R),i=[F(K[0],"DiceTable")].concat(s),q=e.$r(i),P(B(i[0],q("D66Table"),"D66LeftRangeTable"),"$initialize",function I(C,x,l){var p;return I.$$p=null,p=u([],{}),L(l,"each",[],function(y){var o,f;return null==y&&(y=Y),o=w(y),f=null==o[1]?Y:o[1],L(null==o[0]?Y:o[0],"each",[],function(k){return null==k&&(k=Y),L(f,"each_with_index",[],function(d,$){var Q,X;return null==d&&(d=Y),null==$&&($=Y),X=T(U(k,10),T($,1)),L(p,"[]=",Q=[X,d]),Q[Q.length-1]})})}),D(this,E(this,"initialize",I,!1,!0),"initialize",[C,x,p],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var Y,K,q,r,a,h,I,s,R,F=e.module,B=e.klass,u=e.hash2,L=e.defs,w=e.def,T=e.truthy,U=e.rb_minus,D=e.rb_plus,E=e.rb_times,P=[],S=e.nil;return Y=P,K=R=[F(P[0],"BCDice")].concat(Y),q=s=[F(R[0],"DiceTable")].concat(K),a=[r=B(s[0],null,"D66ParityTable")].concat(q),h=e.$r(a),(I=r.$$prototype).odd=I.even=I.name=S,L(r,"$from_i18n",function(x,l){var _=S;return _=h("I18n").$t(x,u(["locale","raise"],{locale:l,raise:!0})),this.$new(_["$[]"]("name"),_["$[]"]("odd"),_["$[]"]("even"))}),w(r,"$initialize",function(x,l,b){var _=this;return _.name=x,_.odd=l.$freeze(),_.even=b.$freeze()}),w(r,"$roll",function(x){var _,c,y,l=this,b=S;return b=x.$roll_once(6),_=x.$roll_once(6),c=(T(b["$odd?"]())?l.odd:l.even)["$[]"](U(_,1)),y=D(E(b,10),_),h("RollResult").$new(l.name,y,c)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var P,M,s,v,i,q,r,g,j,F=e.module,B=e.klass,u=e.def,L=e.rb_plus,w=e.rb_times,T=e.send,U=[],D=e.nil;return P=U,M=j=[F(U[0],"BCDice")].concat(P),s=g=[F(j[0],"DiceTable")].concat(M),i=[v=B(g[0],null,"D66RangeTable")].concat(s),q=e.$r(i),(r=v.$$prototype).items=r.name=D,u(v,"$initialize",function(h,I){return this.name=h,this.items=I.$freeze()}),u(v,"$roll",function(h){var C,x,l,b=D;return C=h.$roll_once(6),x=h.$roll_once(6),l=L(w(C,10),x),b=T(this.items,"find",[],function(p){return null==p&&(p=D),p["$[]"](0)["$include?"](l)}),q("RollResult").$new(this.name,l,b["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function(e){var Y,K,q,r,a,h,I,s,R,F=e.module,B=e.klass,u=e.const_set,L=e.send,w=e.truthy,T=e.def,U=e.eqeqeq,D=e.rb_times,E=e.rb_plus,P=[],S=e.nil;return Y=P,K=R=[F(P[0],"BCDice")].concat(Y),q=s=[F(R[0],"DiceTable")].concat(K),a=[r=B(s[0],null,"RangeTable")].concat(q),h=e.$r(a),(I=r.$$prototype).name=I.items=I.num_of_dice=I.num_of_sides=I.formatter=S,u(a[0],"RollResult",L(h("Struct"),"new",["sum","values","content","formatted"],function C(){return(null==C.$$s?this:C.$$s).$alias_method("to_s","formatted")},{$$s:r})),u(a[0],"Item",h("Struct").$new("range","content")),u(a[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),u(a[0],"DEFAULT_FORMATTER",L(r,"lambda",[],function(x,l){return null==x&&(x=S),null==l&&(l=S),x.$name()+"("+l.$sum()+") \uff1e "+l.$content()})),r.$attr_reader("name"),r.$attr_reader("num_of_dice"),r.$attr_reader("num_of_sides"),T(r,"$initialize",function C(x,l,b){var c,_=C.$$p||S,p=this,y=S;return C.$$p=null,p.name=x.$freeze(),p.formatter=w(c=_)?c:h("DEFAULT_FORMATTER"),y=h("DICE_ROLL_METHOD_RE").$match(l),w(y)||p.$raise(h("ArgumentError"),p.name+": invalid dice roll method: "+l),p.num_of_dice=y["$[]"](1).$to_i(),p.num_of_sides=y["$[]"](2).$to_i(),p.$store(b)}),T(r,"$fetch",function(x){var b,l=this;return b=L(l.items,"find",[],function(p){return null==p&&(p=S),p.$range()["$include?"](x)}),w(b)||l.$raise(h("RangeError"),l.name+": value is out of range: "+x),b}),T(r,"$roll",function(x){var _,l=this,b=S,p=S;return _=(b=x.$roll_barabara(l.num_of_dice,l.num_of_sides)).$sum(),(p=h("RollResult").$new(_,b,l.$fetch(_).$content()))["$formatted="](l.formatter["$[]"](l,p)),p}),r.$private(),T(r,"$store",function(x){var b,_,l=this;return b=L(x,"map",[],function p(c,y){return null==c&&(c=S),null==y&&(y=S),[(null==p.$$s?this:p.$$s).$coerce_to_int_range(c),y]},{$$s:l}),_=L(b,"sort_by",[],function(c,y){return null==c&&(c=S),null==y&&(y=S),c.$min()}),l.$assert_min_sum_is_covered(_),l.$assert_max_sum_is_covered(_),l.$assert_no_gap_or_overlap_in_ranges(_),l.items=L(_,"map",[],function(c,y){return null==c&&(c=S),null==y&&(y=S),h("Item").$new(c,y.$freeze()).$freeze()}).$freeze(),l}),T(r,"$coerce_to_int_range",function(x){var b;return U(h("Integer"),b=x)?h("Range").$new(x,x):U(h("Range"),b)&&w(x.$begin()["$is_a?"](h("Integer")))&&w(x.$end()["$is_a?"](h("Integer")))?x:this.$raise(h("TypeError"),this.name+": "+x+" ("+x.$class()+") must be an Integer or a Range with Integers ")}),T(r,"$assert_min_sum_is_covered",function(x){var b,l=this,_=S;return b=l.num_of_dice,_=x.$first()["$[]"](0),w(_["$include?"](b))||l.$raise(h("RangeError"),l.name+": min value ("+b+") is not covered: "+_),l}),T(r,"$assert_max_sum_is_covered",function(x){var b,l=this,_=S;return b=D(l.num_of_dice,l.num_of_sides),_=x.$last()["$[]"](0),w(_["$include?"](b))||l.$raise(h("RangeError"),l.name+": max value ("+b+") is not covered: "+_),l}),T(r,"$assert_no_gap_or_overlap_in_ranges",function(x){return L(x,"each_cons",[2],function b(_,p){var A,m,c=null==b.$$s?this:b.$$s,y=S,o=S;return null==c.name&&(c.name=S),null==_&&(_=S),null==p&&(p=S),y=_["$[]"](0),o=p["$[]"](0),A=y.$max(),m=E(A,1),w(o["$include?"](A))&&c.$raise(h("RangeError"),c.name+": Range overlap: "+y+" and "+o),w(o["$include?"](m))?S:c.$raise(h("RangeError"),c.name+": Range gap: "+y+" and "+o)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var S,R,v,h,I,C,x,q,K,Y,F=e.module,B=e.klass,u=e.send,L=e.def,w=e.rb_minus,T=e.return_ivar,U=[],D=e.nil,E=e.$$$;return S=U,R=Y=[F(U[0],"BCDice")].concat(S),v=K=[F(Y[0],"DiceTable")].concat(R),h=q=[B(K[0],null,"SaiFicSkillTable")].concat(v),C=[I=B(q[0],null,"Category")].concat(h),x=e.$r(C),L(I,"$initialize",function(b,_,p,c){var y=this;return y.name=b,y.skills=u(_.$map(),"with_index",[2],function(A,m){return null==A&&(A=D),null==m&&(m=D),E(x("SaiFicSkillTable"),"Skill").$new(b,A,p,m,c)}),y.dice=p}),L(I,"$roll",function(b){return this.$skills()["$[]"](w(b.$roll_sum(2,6),2))}),L(I,"$to_s",T("name")),I.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var D,j,K,q,r,s,M,P,F=e.module,B=e.klass,u=e.def,L=e.hash2,w=[],T=e.nil;return D=w,j=P=[F(w[0],"BCDice")].concat(D),K=M=[F(P[0],"DiceTable")].concat(j),s=[B(M[0],null,"SaiFicSkillTable")].concat(K),(r=(q=B(s[0],null,"Skill")).$$prototype).s_format=r.category_dice=r.row_dice=r.category_name=r.name=T,u(q,"$initialize",function(h,I,C,x,l){var b=this;return b.category_name=h,b.name=I,b.category_dice=C,b.row_dice=x,b.s_format=l}),u(q,"$to_s",function(){var h=this;return h.$format(h.s_format,L(["category_dice","row_dice","category_name","skill_name"],{category_dice:h.category_dice,row_dice:h.row_dice,category_name:h.category_name,skill_name:h.name}))}),q.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var s,r,x,l,b,_,p,h,i,F=e.module,B=e.klass,u=e.ensure_kwargs,L=e.hash2,w=e.send,U=e.defs,D=e.const_set,E=e.to_ary,P=e.def,S=e.truthy,j=e.rb_minus,Y=e.rb_plus,M=e.top,R=[],g=e.nil,K=e.$$$;return M.$require("bcdice/dice_table/sai_fic_skill_table/category"),M.$require("bcdice/dice_table/sai_fic_skill_table/skill"),s=R,r=i=[F(R[0],"BCDice")].concat(s),x=h=[F(i[0],"DiceTable")].concat(r),b=[l=B(h[0],null,"SaiFicSkillTable")].concat(x),_=e.$r(b),(p=l.$$prototype).rtt=p.rtt_format=p.rct=p.rct_format=p.rttn=p.rttn_format=p.categories=g,U(l,"$from_i18n",function(y,o,A){var m,f,n,$,d=g;return null==(m=(A=u(A)).$$smap.rtt)&&(m=g),null==(f=A.$$smap.rct)&&(f=g),null==(n=A.$$smap.rttn)&&(n=g),$=(d=_("I18n").$t("RTT",L(["locale","raise","default"],{locale:o,raise:!1,default:L([],{})})).$merge(_("I18n").$t(y,L(["locale","raise"],{locale:o,raise:!0}))))["$[]"]("items"),d=w(d,"select",[],function(X,V){return null==X&&(X=g),null==V&&(V=g),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](X)}),this.$new($,e.to_hash(d).$merge(L(["rtt","rct","rttn"],{rtt:m,rct:f,rttn:n})))},-3),D(b[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),D(b[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),D(b[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),D(b[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),P(l,"$initialize",function(y,o){var A,m,f,n,k,t,d,$=this;return null==(A=(o=u(o)).$$smap.rtt)&&(A=g),null==(m=o.$$smap.rct)&&(m=g),null==(f=o.$$smap.rttn)&&(f=g),null==(n=o.$$smap.rtt_format)&&(n=_("DEFAULT_RTT")),null==(k=o.$$smap.rct_format)&&(k=_("DEFAULT_RCT")),null==(t=o.$$smap.rttn_format)&&(t=_("DEFAULT_RTTN")),null==(d=o.$$smap.s_format)&&(d=_("DEFAULT_S")),$.categories=w(y.$map(),"with_index",[1],function(X,V){var ne,ue,ie;return null==X&&(X=g),null==V&&(V=g),ue=null==(ne=E(X))[0]?g:ne[0],ie=null==ne[1]?g:ne[1],K(_("SaiFicSkillTable"),"Category").$new(ue,ie,V,d)},{$$has_top_level_mlhs_arg:!0}),$.rtt=A,$.rct=m,$.rttn=f.$to_a(),$.rtt_format=n,$.rct_format=k,$.rttn_format=t},-2),D(b[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),l.$attr_reader("categories"),P(l,"$roll_command",function(y,o){var m,A=this,f=g,n=g;return S(["RTT",A.rtt]["$include?"](m=o))?A.$format_skill(A.rtt_format,A.$roll_skill(y)):S(["RCT",A.rct]["$include?"](m))?(f=A.$roll_category(y),A.$format(A.rct_format,L(["category_dice","category_name"],{category_dice:f.$dice(),category_name:f.$name()}))):S(n=_("RTTN").$index(m))||S(n=A.rttn.$index(m))?A.$format_skill(A.rttn_format,A.categories["$[]"](n).$roll(y)):g}),P(l,"$roll_category",function(y){return this.categories["$[]"](j(y.$roll_once(6),1))}),P(l,"$roll_skill",function(y){return this.$roll_category(y).$roll(y)}),P(l,"$prefixes",function(){var y=this;return Y(["RTT[1-6]?","RCT",y.rtt,y.rct],y.rttn).$compact()}),l.$private(),P(l,"$format_skill",function(y,o){return this.$format(y,L(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:o.$category_dice(),row_dice:o.$row_dice(),category_name:o.$category_name(),skill_name:o.$name(),text:o.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function(e){var S,R,v,i,q,r,a,K,Y,F=e.module,B=e.klass,u=e.hash2,L=e.defs,w=e.truthy,T=e.def,U=e.rb_minus,D=[],E=e.nil;return S=D,R=Y=[F(D[0],"BCDice")].concat(S),v=K=[F(Y[0],"DiceTable")].concat(R),q=[i=B(K[0],null,"Table")].concat(v),r=e.$r(q),(a=i.$$prototype).times=a.sides=a.name=a.items=E,L(i,"$from_i18n",function(I,C){var l=E;return l=r("I18n").$t(I,u(["locale"],{locale:C})),this.$new(l["$[]"]("name"),l["$[]"]("type"),l["$[]"]("items"))}),T(i,"$initialize",function(I,C,x){var l=this,b=E;return l.name=I,l.items=x.$freeze(),b=/(\d+)D(\d+)/i.$match(C),w(b)||l.$raise(r("ArgumentError"),"Unexpected table type: "+C),l.times=b["$[]"](1).$to_i(),l.sides=b["$[]"](2).$to_i()}),T(i,"$roll",function(I){var x,C=this;return x=I.$roll_sum(C.times,C.sides),C.$choice(x)}),T(i,"$choice",function(I){var x,C=this;return x=U(I,C.times),r("RollResult").$new(C.name,I,C.items["$[]"](x))})},Opal.modules["bcdice/dice_table"]=function(e){var F=e.top;return F.$require("bcdice/dice_table/roll_result"),F.$require("bcdice/dice_table/chain_table"),F.$require("bcdice/dice_table/d66_grid_table"),F.$require("bcdice/dice_table/d66_half_grid_table"),F.$require("bcdice/dice_table/d66_one_third_table"),F.$require("bcdice/dice_table/d66_left_range_table"),F.$require("bcdice/dice_table/d66_parity_table"),F.$require("bcdice/dice_table/d66_range_table"),F.$require("bcdice/dice_table/d66_table"),F.$require("bcdice/dice_table/range_table"),F.$require("bcdice/dice_table/sai_fic_skill_table"),F.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var T,P,j,D,F=e.module,B=e.const_set,u=[];return T=u,P=D=[F(u[0],"BCDice")].concat(T),j=[F(D[0],"D66SortType")].concat(P),B(j[0],"NO_SORT","no_sort"),B(j[0],"ASC","asc"),B(j[0],"DESC","desc"),function(E,P){var j=[F(E,"RoundType")].concat(P);return B(j[0],"CEIL","ceil"),B(j[0],"FLOOR","floor"),B(j[0],"ROUND","round")}(D[0],D)},Opal.modules["bcdice/translate"]=function(e){var P,M,R,g,K,j,F=e.module,B=e.ensure_kwargs,u=e.kwrestargs,w=e.hash2,T=e.def,U=[],D=e.nil;return P=U,M=j=[F(U[0],"BCDice")].concat(P),g=[R=F(j[0],"Translate")].concat(M),K=e.$r(g),T(R,"$translate",function(s,v){var i,q=this;return null==q.locale&&(q.locale=D),v=B(v),i=u(v,{}),K("I18n").$translate(s,w(["locale","raise"],{locale:q.locale,raise:!0}).$merge(e.to_hash(i)))},-2)},Opal.modules["bcdice/result"]=function(e){var R,G,g,P,j,B=e.klass,u=e.send,L=e.def,w=e.return_val,T=e.return_ivar,U=[],D=e.nil;return P=U,R=j=[(0,e.module)(U[0],"BCDice")].concat(P),[g=B(j[0],null,"Result")].concat(R),L(G=e.get_singleton_class(g),"$success",function(i){return u(this.$new(),"tap",[],function(a){var h;return null==a&&(a=D),a["$text="](i),u(a,"success=",h=[!0]),h[h.length-1]})}),L(G,"$failure",function(i){return u(this.$new(),"tap",[],function(a){var h;return null==a&&(a=D),a["$text="](i),u(a,"failure=",h=[!0]),h[h.length-1]})}),L(G,"$critical",function(i){return u(this.$new(),"tap",[],function(a){var h;return null==a&&(a=D),a["$text="](i),a["$critical="](!0),u(a,"success=",h=[!0]),h[h.length-1]})}),L(G,"$fumble",function(i){return u(this.$new(),"tap",[],function(a){var h;return null==a&&(a=D),a["$text="](i),a["$fumble="](!0),u(a,"failure=",h=[!0]),h[h.length-1]})}),L(G,"$nothing",w("nothing")),L(g,"$initialize",function(s){var v=this;return null==s&&(s=D),v.text=s,v.rands=D,v.detailed_rands=D,v.secret=!1,v.success=!1,v.failure=!1,v.critical=!1,v.fumble=!1},-1),g.$attr_accessor("text","rands","detailed_rands"),g.$attr_writer("secret","success","failure","critical","fumble"),L(g,"$secret?",T("secret")),L(g,"$success?",T("success")),L(g,"$failure?",T("failure")),L(g,"$critical?",T("critical")),L(g,"$fumble?",T("fumble")),L(g,"$condition=",function(s){return this.success=s,this.failure=s["$!"]()})},Opal.modules["racc/parser"]=function(e){var I,x,l,F=e.module,B=e.klass,u=e.truthy,L=e.const_set,w=e.defs,T=e.gvars,U=e.rb_lt,D=e.def,E=e.to_ary,P=e.send,S=e.neqeq,j=e.rb_plus,Y=e.eqeq,M=e.rb_ge,R=e.rb_gt,g=e.rb_minus,K=e.rb_le,G=e.rb_times,s=e.assign_ivar_val,i=[],q=e.$r(i),r=e.nil,a=e.$$$;return I=i,x=[F(i[0],"Racc")].concat(I),l=e.$r(x),B(x[0],l("StandardError"),"ParseError"),u(a("::","ParseError","skip_raise")?"constant":r)||L(i[0],"ParseError",a(q("Racc"),"ParseError")),function(h,I){var c,y,o,A,m,l=[F(h,"Racc")].concat(I),b=e.$r(l);return u(b("Racc_No_Extensions","skip_raise")?"constant":r)||L(l[0],"Racc_No_Extensions",!1),c=l,o=[y=B(l[0],null,"Parser")].concat(c),A=e.$r(o),(m=y.$$prototype).yydebug=m.racc_debug_out=m.racc_error_status=m.racc_t=m.racc_vstack=m.racc_val=m.racc_state=m.racc_tstack=r,L(o[0],"Racc_Runtime_Version","1.4.6"),L(o[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),L(o[0],"Racc_Runtime_Core_Version_R","1.4.6"),L(o[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),L(o[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),L(o[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),L(o[0],"Racc_Runtime_Core_Version",A("Racc_Runtime_Core_Version_R")),L(o[0],"Racc_Runtime_Core_Revision",A("Racc_Runtime_Core_Revision_R")),L(o[0],"Racc_Runtime_Type","ruby"),w(A("Parser"),"$racc_runtime_type",function(){return A("Racc_Runtime_Type")}),D(y,"$_racc_setup",function(){var n,k,t=this,d=r,$=r;return null==T.stderr&&(T.stderr=r),u(a(t.$class(),"Racc_debug_parser"))||(t.yydebug=!1),u(null!=(n=t.yydebug)&&n!==r?"instance-variable":r)||(t.yydebug=!1),u(t.yydebug)&&(u(null!=(k=t.racc_debug_out)&&k!==r?"instance-variable":r)||(t.racc_debug_out=T.stderr),t.racc_debug_out=u(d=t.racc_debug_out)?d:T.stderr),$=a(t.$class(),"Racc_arg"),u(U($.$size(),14))&&$["$[]="](13,!0),$}),D(y,"$_racc_init_sysvars",function(){var n=this;return n.racc_state=[0],n.racc_tstack=[],n.racc_vstack=[],n.racc_t=r,n.racc_val=r,n.racc_read_next=!0,n.racc_user_yyerror=!1,n.racc_error_status=0}),D(y,"$do_parse",function(){return this.$__send__(A("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),D(y,"$next_token",function(){return this.$raise(A("NotImplementedError"),this.$class()+"#next_token is not defined")}),D(y,"$_racc_do_parse_rb",function(n,k){var t,$=this,Q=r,X=r,V=r,ne=r,ue=r,ie=r,se=r,te=r;return t=E(n),Q=null==t[0]?r:t[0],X=null==t[1]?r:t[1],V=null==t[2]?r:t[2],ne=null==t[3]?r:t[3],ue=null==t[10]?r:t[10],$.$_racc_init_sysvars(),ie=se=te=r,P($,"catch",["racc_end_parse"],function W(){var z,Z,H=null==W.$$s?this:W.$$s,N=r;for(null==H.racc_state&&(H.racc_state=r),null==H.racc_read_next&&(H.racc_read_next=r),null==H.racc_t&&(H.racc_t=r),null==H.yydebug&&(H.yydebug=r),null==H.racc_val&&(H.racc_val=r);u(!0);)for(u(te=ne["$[]"](H.racc_state["$[]"](-1)))?(u(H.racc_read_next)&&S(H.racc_t,0)&&(Z=H.$next_token(),z=E(Z),ie=null==z[0]?r:z[0],H.racc_val=null==z[1]?r:z[1],H.racc_t=u(ie)?u(N=ue["$[]"](ie))?N:1:0,u(H.yydebug)&&H.$racc_read_token(H.racc_t,ie,H.racc_val),H.racc_read_next=!1),te=j(te,H.racc_t),u(M(te,0))&&u(se=Q["$[]"](te))&&Y(X["$[]"](te),H.racc_state["$[]"](-1))||(se=V["$[]"](H.racc_state["$[]"](-1)))):se=V["$[]"](H.racc_state["$[]"](-1));u(se=H.$_racc_evalact(se,n)););},{$$s:$})}),D(y,"$yyparse",function(n,k){return this.$__send__(A("Racc_YY_Parse_Method"),n,k,this.$_racc_setup(),!0)}),D(y,"$_racc_yyparse_rb",function(n,k,t,d){var $,X=this,V=r,ne=r,$e=r,ue=r,se=r,te=r,W=r;return $=E(t),V=null==$[0]?r:$[0],ne=null==$[1]?r:$[1],$e=null==$[2]?r:$[2],ue=null==$[3]?r:$[3],se=null==$[10]?r:$[10],X.$_racc_init_sysvars(),te=r,W=r,P(X,"catch",["racc_end_parse"],function z(){var Z=null==z.$$s?this:z.$$s;for(null==Z.racc_state&&(Z.racc_state=r);!u(W=ue["$[]"](Z.racc_state["$[]"](-1)));)for(;u(te=Z.$_racc_evalact($e["$[]"](Z.racc_state["$[]"](-1)),t)););return P(n,"__send__",[k],function H(N,ee){var O=null==H.$$s?this:H.$$s,re=r,J=r;for(null==O.racc_t&&(O.racc_t=r),null==O.racc_state&&(O.racc_state=r),null==O.racc_read_next&&(O.racc_read_next=r),null==N&&(N=r),null==ee&&(ee=r),O.racc_t=u(N)?u(re=se["$[]"](N))?re:1:0,O.racc_val=ee,O.racc_read_next=!1,W=j(W,O.racc_t),u(M(W,0))&&u(te=V["$[]"](W))&&Y(ne["$[]"](W),O.racc_state["$[]"](-1))||(te=$e["$[]"](O.racc_state["$[]"](-1)));u(te=O.$_racc_evalact(te,t)););for(;u(u(re=u(J=(W=ue["$[]"](O.racc_state["$[]"](-1)))["$!"]())?J:O.racc_read_next["$!"]())?re:O.racc_t["$=="](0));)for(u(W)&&u(W=j(W,O.racc_t))&&u(M(W,0))&&u(te=V["$[]"](W))&&Y(ne["$[]"](W),O.racc_state["$[]"](-1))||(te=$e["$[]"](O.racc_state["$[]"](-1)));u(te=O.$_racc_evalact(te,t)););},{$$s:Z})},{$$s:X})}),D(y,"$_racc_evalact",function(n,k){var t,$e,$=this,Q=r,X=r,ne=r,ue=r,ie=r,se=r;if(Q=null==(t=E(k))[0]?r:t[0],X=null==t[1]?r:t[1],ne=null==t[3]?r:t[3],$e=null==t[11]?r:t[11],ue=null==t[12]?r:t[12],u(R(n,0))&&u(U(n,$e)))u(R($.racc_error_status,0))&&(Y($.racc_t,1)||($.racc_error_status=g($.racc_error_status,1))),$.racc_vstack.$push($.racc_val),$.racc_state.$push(n),$.racc_read_next=!0,u($.yydebug)&&($.racc_tstack.$push($.racc_t),$.$racc_shift($.racc_t,$.racc_tstack,$.racc_vstack));else if(u(U(n,0))&&u(R(n,ue["$-@"]()))){if(ie=P($,"catch",["racc_jump"],function te(){var W=null==te.$$s?this:te.$$s;return null==W.racc_state&&(W.racc_state=r),W.racc_state.$push(W.$_racc_do_reduce(k,n)),!1},{$$s:$}),u(ie))switch(ie){case 1:return $.racc_user_yyerror=!0,ue["$-@"]();case 2:return $e;default:$.$raise("[Racc Bug] unknown jump code")}}else if(Y(n,$e))u($.yydebug)&&$.$racc_accept(),$.$throw("racc_end_parse",$.racc_vstack["$[]"](0));else{if(Y(n,ue["$-@"]())){switch($.racc_error_status){case 0:u(k["$[]"](21))||$.$on_error($.racc_t,$.racc_val,$.racc_vstack);break;case 3:Y($.racc_t,0)&&$.$throw("racc_end_parse",r),$.racc_read_next=!0}for($.racc_user_yyerror=!1,$.racc_error_status=3;u(!0)&&!(u(se=ne["$[]"]($.racc_state["$[]"](-1)))&&(se=j(se,1),u(M(se,0))&&u(n=Q["$[]"](se))&&Y(X["$[]"](se),$.racc_state["$[]"](-1))));)u(K($.racc_state.$size(),1))&&$.$throw("racc_end_parse",r),$.racc_state.$pop(),$.racc_vstack.$pop(),u($.yydebug)&&($.racc_tstack.$pop(),$.$racc_e_pop($.racc_state,$.racc_tstack,$.racc_vstack));return n}$.$raise("[Racc Bug] unknown action "+n.$inspect())}return u($.yydebug)&&$.$racc_next_state($.racc_state["$[]"](-1),$.racc_state),r}),D(y,"$_racc_do_reduce",function(n,k){var t,ue,se,N,ee,O,ae,$=this,X=r,V=r,ne=r,$e=r,ie=r,te=r,W=r,z=r,Z=r,H=r,re=r,J=r,ce=r;return X=null==(t=E(n))[4]?r:t[4],V=null==t[5]?r:t[5],ne=null==t[6]?r:t[6],$e=null==t[7]?r:t[7],ue=null==t[8]?r:t[8],ie=null==t[9]?r:t[9],se=null==t[13]?r:t[13],te=$.racc_state,W=$.racc_vstack,z=$.racc_tstack,Z=G(k,-3),H=ie["$[]"](Z),N=ie["$[]"](j(Z,1)),ee=ie["$[]"](j(Z,2)),O=[],u($.yydebug)&&(re=z["$[]"](H["$-@"](),H)),J=W["$[]"](H["$-@"](),H),u($.yydebug)&&z["$[]="](H["$-@"](),H,O),W["$[]="](H["$-@"](),H,O),te["$[]="](H["$-@"](),H,O),u(se)?W.$push($.$__send__(ee,J,W,J["$[]"](0))):W.$push($.$__send__(ee,J,W)),z.$push(N),u($.yydebug)&&$.$racc_reduce(re,N,z,W),ae=g(N,ue),u(Z=$e["$[]"](ae))&&(Z=j(Z,te["$[]"](-1)),u(M(Z,0))&&u(ce=X["$[]"](Z))&&Y(V["$[]"](Z),ae))?ce:ne["$[]"](ae)}),D(y,"$on_error",function(n,k,t){var $,d=this;return d.$raise(A("ParseError"),d.$sprintf("\nparse error on value %s (%s)",k.$inspect(),u($=d.$token_to_str(n))?$:"?"))}),D(y,"$yyerror",function(){return this.$throw("racc_jump",1)}),D(y,"$yyaccept",function(){return this.$throw("racc_jump",2)}),D(y,"$yyerrok",s("racc_error_status",0)),D(y,"$racc_read_token",function(n,k,t){var d=this;return d.racc_debug_out.$print("read    "),d.racc_debug_out.$print(k.$inspect(),"(",d.$racc_token2str(n),") "),d.racc_debug_out.$puts(t.$inspect()),d.racc_debug_out.$puts()}),D(y,"$racc_shift",function(n,k,t){var d=this;return d.racc_debug_out.$puts("shift   "+d.$racc_token2str(n)),d.$racc_print_stacks(k,t),d.racc_debug_out.$puts()}),D(y,"$racc_reduce",function(n,k,t,d){var $=this,Q=r;return(Q=$.racc_debug_out).$print("reduce "),u(n["$empty?"]())?Q.$print(" <none>"):P(n,"each",[],function X(V){return null==V&&(V=r),Q.$print(" ",(null==X.$$s?this:X.$$s).$racc_token2str(V))},{$$s:$}),Q.$puts(" --\x3e "+$.$racc_token2str(k)),$.$racc_print_stacks(t,d),$.racc_debug_out.$puts()}),D(y,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),D(y,"$racc_e_pop",function(n,k,t){var d=this;return d.racc_debug_out.$puts("error recovering mode: pop token"),d.$racc_print_states(n),d.$racc_print_stacks(k,t),d.racc_debug_out.$puts()}),D(y,"$racc_next_state",function(n,k){var t=this;return t.racc_debug_out.$puts("goto    "+n),t.$racc_print_states(k),t.racc_debug_out.$puts()}),D(y,"$racc_print_stacks",function(n,k){var d=r;return(d=this.racc_debug_out).$print("        ["),P(n,"each_index",[],function $(Q){return null==Q&&(Q=r),d.$print(" (",(null==$.$$s?this:$.$$s).$racc_token2str(n["$[]"](Q))," ",k["$[]"](Q).$inspect(),")")},{$$s:this}),d.$puts(" ]")}),D(y,"$racc_print_states",function(n){var t=r;return(t=this.racc_debug_out).$print("        ["),P(n,"each",[],function($){return null==$&&($=r),t.$print(" ",$)}),t.$puts(" ]")}),D(y,"$racc_token2str",function(n){var t;return u(t=a(this.$class(),"Racc_token_to_s_table")["$[]"](n))?t:this.$raise("[Racc Bug] can't convert token "+n+" to string")}),D(y,"$token_to_str",function(n){return a(this.$class(),"Racc_token_to_s_table")["$[]"](n)})}(i[0],i)},Opal.modules["bcdice/arithmetic/node"]=function(e){var s,r,C,c,y,l,b,h,i,F=e.module,B=e.klass,u=e.def,L=e.thrower,w=e.return_ivar,T=e.send2,U=e.find_super,D=e.eqeq,E=e.const_set,P=e.eqeqeq,S=e.rb_divide,j=e.truthy,Y=e.assign_ivar,M=e.alias,R=[],g=e.nil,K=e.$$$;return s=R,r=i=[F(R[0],"BCDice")].concat(s),C=h=[F(i[0],"Arithmetic")].concat(r),l=[F(h[0],"Node")].concat(C),b=e.$r(l),(y=(c=B(l[0],null,"BinaryOp")).$$prototype).lhs=y.rhs=y.op=g,u(c,"$initialize",function(A,m,f){var n=this;return n.lhs=A,n.op=m,n.rhs=f}),u(c,"$eval",function(A){try{L("eval_return");var k,f=this,n=g;return n=f.lhs.$eval(A),k=f.rhs.$eval(A),n.$send(f.op,k)}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),u(c,"$output",function(){var A=this;return""+A.lhs.$output()+A.op+A.rhs.$output()}),u(c,"$s_exp",function(){var A=this;return"("+A.$op_for_s_exp()+" "+A.lhs.$s_exp()+" "+A.rhs.$s_exp()+")"}),u(c,"$op_for_s_exp",w("op")),function(_,p,c){var y=B(_,p,"DivideBase"),o=[y].concat(c),A=e.$r(o),m=y.$$prototype;m.lhs=m.rhs=m.op=g,u(y,"$initialize",function f(n,k){return f.$$p=null,T(this,U(this,"initialize",f,!1,!0),"initialize",[n,"/",k],null)}),u(y,"$eval",function(n){try{L("eval_return");var d,$,t=this;return d=t.lhs.$eval(n),$=t.rhs.$eval(n),D($,0)&&t.$raise(A("ZeroDivisionError")),t.$divide_and_round(d,$,n)}catch(Q){if(Q===e.t_eval_return)return Q.$v;throw Q}}),u(y,"$output",function f(){var n=f.$$p||g,k=this;return f.$$p=null,""+T(k,U(k,"output",f,!1,!0),"output",[],n)+k.$rounding_method()}),y.$private(),u(y,"$rounding_method",function(){return K(this.$class(),"ROUNDING_METHOD")}),u(y,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),u(y,"$divide_and_round",function(n,k,t){return this.$raise(A("NotImplementedError"))})}(l[0],b("BinaryOp"),l),function(_,p,c){var y=B(_,p,"DivideWithGameSystemDefault"),o=[y].concat(c),A=e.$r(o);E(o[0],"ROUNDING_METHOD",""),y.$private(),u(y,"$divide_and_round",function(f,n,k){var t,d=g;return P(K(A("RoundType"),"CEIL"),t=k)?S(f.$to_f(),n).$ceil():P(K(A("RoundType"),"ROUND"),t)?(d=S(f.$to_f(),n),j(d["$negative?"]())?d.$abs().$round()["$-@"]():d.$round()):S(f,n).$floor()})}(l[0],b("DivideBase"),l),function(_,p,c){var y=B(_,p,"DivideWithCeil"),o=[y].concat(c);E(o[0],"ROUNDING_METHOD","C"),y.$private(),u(y,"$divide_and_round",function(m,f,n){return S(m.$to_f(),f).$ceil()})}(l[0],b("DivideBase"),l),function(_,p,c){var y=B(_,p,"DivideWithRound"),o=[y].concat(c);E(o[0],"ROUNDING_METHOD","R"),y.$private(),u(y,"$divide_and_round",function(m,f,n){var k=g;return k=S(m.$to_f(),f),j(k["$negative?"]())?k.$abs().$round()["$-@"]():k.$round()})}(l[0],b("DivideBase"),l),function(_,p,c){var y=B(_,p,"DivideWithFloor"),o=[y].concat(c);E(o[0],"ROUNDING_METHOD","F"),y.$private(),u(y,"$divide_and_round",function(m,f,n){return S(m,f).$floor()})}(l[0],b("DivideBase"),l),function(_,p){var c=B(_,null,"Negative");c.$$prototype.body=g,u(c,"$initialize",Y("body")),u(c,"$eval",function(A){try{return L("eval_return"),this.body.$eval(A)["$-@"]()}catch(n){if(n===e.t_eval_return)return n.$v;throw n}}),u(c,"$output",function(){return"-"+this.body.$output()}),u(c,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(l[0]),function(_,p){var c=B(_,null,"Parenthesis");c.$$prototype.expr=g,u(c,"$initialize",Y("expr")),u(c,"$eval",function(A){try{return L("eval_return"),this.expr.$eval(A)}catch(n){if(n===e.t_eval_return)return n.$v;throw n}}),u(c,"$output",function(){return"("+this.expr.$output()+")"}),u(c,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(l[0]),function(_,p){var c=B(_,null,"Number");return c.$$prototype.value=g,u(c,"$initialize",Y("value")),u(c,"$eval",w("value")),u(c,"$output",function(){return this.value.$to_s()}),M(c,"s_exp","output")}(l[0])},Opal.modules.strscan=function(e){var Y,M,R,g,K,B=e.def,u=e.truthy,L=e.eqeqeq,w=e.Opal,T=e.return_ivar,U=e.send,D=e.alias,E=[],P=e.nil;return Y=E,R=[M=(0,e.klass)(E[0],null,"StringScanner")].concat(Y),g=e.$r(R),(K=M.$$prototype).pos=K.string=K.working=K.matched=K.prev_pos=K.match=P,M.$attr_reader("pos","matched"),B(M,"$initialize",function(s){var v=this;return v.string=s,v.pos=0,v.matched=P,v.working=s,v.match=[]}),M.$attr_reader("string"),B(M,"$beginning_of_line?",function(){var s=this;return 0===s.pos||"\n"===s.string.charAt(s.pos-1)}),B(M,"$scan",function(s){var v=this,i=(s=v.$anchor(s)).exec(v.working);return null==i?v.matched=P:(v.prev_pos=v.pos,v.pos+=i[0].length,v.working=v.working.substring(i[0].length),v.matched=i[0],v.match=i,i[0])}),B(M,"$scan_until",function(s){var v=this;s=v.$anchor(s);for(var i=v.working,q=0;i.length!=q;++q){var r=s.exec(i.substr(q));if(null!==r){var a=q+r[0].length,h=i.substr(0,a);return v.matched=r[0],v.match=r,v.prev_pos=v.pos+q,v.pos+=a,v.working=i.substr(a),h}}return v.matched=P}),B(M,"$[]",function(s){var i;if(u(this.match["$empty?"]()))return P;L(g("Symbol"),i=s)?s=s.$to_s():L(g("String"),i)||(s=w["$coerce_to!"](s,g("Integer"),"to_int"));var q=this.match;return s<0&&(s+=q.length),s<0||s>=q.length||null==q[s]?P:q[s]}),B(M,"$check",function(s){var v=this,i=(s=v.$anchor(s)).exec(v.working);return v.matched=null==i?P:i[0]}),B(M,"$check_until",function(s){var v=this,i=v.prev_pos,q=v.pos,r=v.working,a=v.$scan_until(s);return v.prev_pos=i,v.pos=q,v.working=r,a}),B(M,"$peek",function(s){return this.working.substring(0,s)}),B(M,"$eos?",function(){return 0===this.working.length}),B(M,"$exist?",function(s){var i=s.exec(this.working);return null==i?P:0==i.index?0:i.index+1}),B(M,"$skip",function(s){var v=this,i=(s=v.$anchor(s)).exec(v.working);if(null==i)return v.match=[],v.matched=P;var q=i[0],r=q.length;return v.matched=q,v.match=i,v.prev_pos=v.pos,v.pos+=r,v.working=v.working.substring(r),r}),B(M,"$skip_until",function(s){var i=this.$scan_until(s);return i===P?P:(this.matched=i.substr(-1),i.length)}),B(M,"$get_byte",function(){var s=this,v=P;return s.pos<s.string.length?(s.prev_pos=s.pos,s.pos+=1,v=s.matched=s.working.substring(0,1),s.working=s.working.substring(1)):s.matched=P,v}),B(M,"$match?",function(s){var v=this,i=(s=v.$anchor(s)).exec(v.working);return null==i?P:(v.prev_pos=v.pos,i[0].length)}),B(M,"$pos=",function(s){var v=this;return s<0&&(s+=v.string.$length()),v.pos=s,v.working=v.string.slice(s)}),B(M,"$matched_size",function(){return this.matched===P?P:this.matched.length}),B(M,"$post_match",function(){var s=this;return s.matched===P?P:s.string.substr(s.pos)}),B(M,"$pre_match",function(){var s=this;return s.matched===P?P:s.string.substr(0,s.prev_pos)}),B(M,"$reset",function(){var s=this;return s.working=s.string,s.matched=P,s.pos=0}),B(M,"$rest",T("working")),B(M,"$rest?",function(){return 0!==this.working.length}),B(M,"$rest_size",function(){return this.$rest().$size()}),B(M,"$terminate",function(){var s,v=this;return v.match=P,s=[v.string.$length()],U(v,"pos=",s),s[s.length-1]}),B(M,"$unscan",function(){var s=this;return s.pos=s.prev_pos,s.prev_pos=P,s.match=P,s}),D(M,"bol?","beginning_of_line?"),D(M,"getch","get_byte"),M.$private(),B(M,"$anchor",function(s){var v=s.toString().match(/\/([^\/]+)$/);return v=v?v[1]:void 0,new RegExp("^(?:"+s.source+")",v)})},Opal.modules["bcdice/normalize"]=function(e){var D,j,P,F=e.module,B=e.eqeqeq,u=e.def,L=e.eqeq,w=[],T=e.nil;return D=w,P=[F(w[0],"BCDice")].concat(D),(j=F(P[0],"Normalize")).$module_function(),u(j,"$comparison_operator",function(M){var R;return B(/<=|=</,R=M)?"<=":B(/>=|=>/,R)?">=":B(/<>|!=|=!/,R)?"!=":B(/</,R)?"<":B(/>/,R)?">":B(/=/,R)?"==":T}),u(j,"$target_number",function(M){return L(M,"?")?M:M.$to_i()})},Opal.modules["bcdice/command/lexer"]=function(e){var Y,K,q,r,a,h,I,s,R,F=e.module,B=e.klass,u=e.const_set,L=e.hash2,w=e.truthy,T=e.send,U=e.def,D=e.thrower,E=e.top,P=[],S=e.nil;return E.$require("strscan"),E.$require("bcdice/normalize"),Y=P,K=R=[F(P[0],"BCDice")].concat(Y),q=s=[F(R[0],"Command")].concat(K),a=[r=B(s[0],null,"Lexer")].concat(q),h=e.$r(a),(I=r.$$prototype).scanner=I.notations=S,u(a[0],"SYMBOLS",L(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),U(r,"$initialize",function(x,l){var b,_,c;return x=w(c=(b=(_=x)===S||null==_?S:_.$split(" ",2))===S||null==b?S:b.$first())?c:"",this.scanner=h("StringScanner").$new(x),this.notations=T(l,"map",[],function(o){return null==o&&(o=S),w(o["$is_a?"](h("String")))?h("Regexp").$new(o):o})}),U(r,"$next_token",function(){try{var x=D("return"),l=this,b=S,_=S,c=S,y=S;return w(l.scanner["$eos?"]())?[!1,"$"]:(T(l.notations,"each",[],function o(A){var f,m=null==o.$$s?this:o.$$s;if(null==m.scanner&&(m.scanner=S),null==A&&(A=S),f=m.scanner.$scan(A),!w(f))return S;x.$throw(["NOTATION",f])},{$$s:l,$$ret:x}),w(b=l.scanner.$scan(/\d+/))?["NUMBER",b.$to_i()]:w(_=l.scanner.$scan(/[<>!=]+/))?(_=h("Normalize").$comparison_operator(_),[w(_)?"CMP_OP":"ILLEGAL",_]):(c=l.scanner.$getch().$upcase(),[w(y=h("SYMBOLS")["$[]"](c))?y:c.$to_sym(),c]))}catch(o){if(o===x)return o.$v;throw o}}),U(r,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function(e){var E,Y,G,s,v,i,q,R,S,F=e.module,B=e.klass,u=e.def,L=e.return_ivar,w=e.truthy,T=[],U=e.nil;return E=T,Y=S=[F(T[0],"BCDice")].concat(E),G=R=[F(S[0],"Command")].concat(Y),v=[s=B(R[0],null,"Parsed")].concat(G),i=e.$r(v),(q=s.$$prototype).critical=q.fumble=q.dollar=q.modify_number=q.question_target=q.target_number=q.prefix_number=q.command=q.suffix_number=q.cmp_op=U,s.$attr_accessor("command"),s.$attr_accessor("prefix_number"),s.$attr_accessor("suffix_number"),s.$attr_accessor("critical"),s.$attr_accessor("fumble"),s.$attr_accessor("dollar"),s.$attr_accessor("modify_number"),s.$attr_accessor("cmp_op"),s.$attr_accessor("target_number"),s.$attr_writer("question_target"),u(s,"$initialize",function(){var a=this;return a.prefix_number=U,a.suffix_number=U,a.critical=U,a.fumble=U,a.dollar=U,a.cmp_op=U,a.target_number=U,a.question_target=!1}),u(s,"$question_target?",L("question_target")),u(s,"$to_s",function(a){var h=this,I=U,C=U,x=U,l=U,b=U;switch(null==a&&(a="after_command"),I=w(h.critical)?"@"+h.critical:U,C=w(h.fumble)?"#"+h.fumble:U,x=w(h.dollar)?"$"+h.dollar:U,l=i("Format").$modifier(h.modify_number),b=w(h.question_target)?"?":h.target_number,a){case"after_command":return[h.prefix_number,h.command,h.suffix_number,I,C,x,l,h.cmp_op,b].$join();case"after_modify_number":return[h.prefix_number,h.command,h.suffix_number,l,I,C,x,h.cmp_op,b].$join();case"after_target_number":return[h.prefix_number,h.command,h.suffix_number,l,h.cmp_op,b,I,C,x].$join();default:return U}},-1)},Opal.modules["bcdice/command/parser"]=function(e){var a,x,y,f,n,k,t,d,$,Q,X,V,ue,o,A,m,te,b,_,I,F=e.klass,B=e.module,u=e.slice,L=e.extract_kwargs,w=e.ensure_kwargs,T=e.get_kwarg,U=e.send2,D=e.find_super,E=e.def,P=e.send,S=e.eqeq,j=e.thrower,Y=e.hash,M=e.const_set,R=e.truthy,g=e.to_ary,K=e.hash2,G=e.top,s=[],v=e.$r(s),i=e.nil,q=e.$$$;return G.$require("racc/parser.rb"),G.$require("bcdice/arithmetic/node"),G.$require("bcdice/command/lexer"),G.$require("bcdice/command/parsed"),F(q(v("BCDice"),"Command"),q(v("Racc"),"Parser"),"Parser"),a=s,x=I=[B(s[0],"BCDice")].concat(a),b=[B(I[0],"Command")].concat(x),_=e.$r(b),y=b,A=[o=F(b[0],q(_("Racc"),"Parser"),"Parser")].concat(y),m=e.$r(A),(te=o.$$prototype).notations=te.lexer=te.modifier=te.suffix_number=te.prefix_number=te.need_suffix_number=te.need_prefix_number=te.critical=te.fumble=te.dollar=te.allowed_cmp_op=te.question_target=i,E(o,"$initialize",function W(z,Z){var H,N,ee,O,J=this;return W.$$p=null,H=u(arguments),N=L(H),N=w(N),ee=H,O=T(N,"round_type"),U(J,D(J,"initialize",W,!1,!0),"initialize",[],null),J.notations=ee,J.round_type=O,J.prefix_number=!1,J.suffix_number=!1,J.need_prefix_number=!1,J.need_suffix_number=!1,J.modifier=!0,J.critical=!1,J.fumble=!1,J.dollar=!1,J.allowed_cmp_op=[i,">=",">","<=","<","==","!="],J.question_target=!1},-2),E(o,"$disable_modifier",function(){return this.modifier=!1,this}),E(o,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),E(o,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),E(o,"$has_prefix_number",function(){var z=this;return z.prefix_number=!0,z.need_prefix_number=!0,z}),E(o,"$has_suffix_number",function(){var z=this;return z.suffix_number=!0,z.need_suffix_number=!0,z}),E(o,"$enable_critical",function(){return this.critical=!0,this}),E(o,"$enable_fumble",function(){return this.fumble=!0,this}),E(o,"$enable_dollar",function(){return this.dollar=!0,this}),E(o,"$restrict_cmp_op_to",function(z){var Z,N=this;return Z=u(arguments),N.allowed_cmp_op=Z,N},-1),E(o,"$enable_question_target",function(){return this.question_target=!0,this}),E(o,"$parse",function(z){var Z=this;try{return Z.lexer=m("Lexer").$new(z,Z.notations),Z.$do_parse()}catch(H){if(!e.rescue(H,[m("ParseError"),m("ZeroDivisionError")]))throw H;try{return i}finally{e.pop_exception()}}}),o.$private(),E(o,"$parsed",function(z,Z,H,N){try{return j("eval_return"),P(m("Parsed").$new(),"tap",[],function re(J){var ae,ce,oe,fe,de,le,me,_e=null==re.$$s?this:re.$$s;return null==_e.round_type&&(_e.round_type=i),null==J&&(J=i),J["$command="](z["$[]"]("command")),J["$prefix_number="]((ae=z["$[]"]("prefix"))===i||null==ae?i:ae.$eval(_e.round_type)),J["$suffix_number="]((ce=z["$[]"]("suffix"))===i||null==ce?i:ce.$eval(_e.round_type)),J["$critical="]((oe=Z["$[]"]("critical"))===i||null==oe?i:oe.$eval(_e.round_type)),J["$fumble="]((fe=Z["$[]"]("fumble"))===i||null==fe?i:fe.$eval(_e.round_type)),J["$dollar="]((de=Z["$[]"]("dollar"))===i||null==de?i:de.$eval(_e.round_type)),J["$modify_number="](H.$eval(_e.round_type)),J["$cmp_op="](N["$[]"]("cmp_op")),S(N["$[]"]("target"),"?")?(J["$question_target="](!0),P(J,"target_number=",le=[0]),le[le.length-1]):(J["$question_target="](!1),le=[(me=N["$[]"]("target"),me===i||null==me?i:me.$eval(_e.round_type))],P(J,"target_number=",le),le[le.length-1])},{$$s:this})}catch(re){if(re===e.t_eval_return)return re.$v;throw re}}),E(o,"$next_token",function(){return this.lexer.$next_token()}),f=e.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),n=e.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),k=e.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),t=e.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),d=e.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),$=e.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),Q=[i,6,13,3,9,-1,27,-15,-10,-1,-38],X=[i,i,i,i,i,i,19,16,15,i,i],V=e.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),ue=Y(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),M(A[0],"Racc_arg",[f,n,t,k,d,$,X,Q,19,V,ue,58,35,!0]),M(A[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),M(A[0],"Racc_debug_parser",!1),E(o,"$_reduce_1",function(z,Z,H){var N,O=this;return R(O.modifier)||O.$raise(m("ParseError")),N=g(z),O.$parsed(null==N[0]?i:N[0],null==N[1]?i:N[1],null==N[2]?i:N[2],null==N[3]?i:N[3])}),E(o,"$_reduce_2",function(z,Z,H){var N,O=this;return R(O.modifier)||O.$raise(m("ParseError")),N=g(z),O.$parsed(null==N[0]?i:N[0],null==N[2]?i:N[2],null==N[1]?i:N[1],null==N[3]?i:N[3])}),E(o,"$_reduce_3",function(z,Z,H){var N,ae;return ae=null==(N=g(z))[2]?i:N[2],this.$parsed(null==N[0]?i:N[0],null==N[1]?i:N[1],q(q(m("Arithmetic"),"Node"),"Number").$new(0),ae)}),E(o,"$_reduce_4",function(z,Z,H){var N=this;return R(N.prefix_number)&&R(N.suffix_number)||N.$raise(m("ParseError")),K(["command","prefix","suffix"],{command:z["$[]"](1),prefix:z["$[]"](0),suffix:z["$[]"](2)})}),E(o,"$_reduce_5",function(z,Z,H){var N=this;return R(N.prefix_number)||N.$raise(m("ParseError")),R(N.need_suffix_number)&&N.$raise(m("ParseError")),K(["command","prefix"],{command:z["$[]"](1),prefix:z["$[]"](0)})}),E(o,"$_reduce_6",function(z,Z,H){var N=this;return R(N.suffix_number)||N.$raise(m("ParseError")),R(N.need_prefix_number)&&N.$raise(m("ParseError")),K(["command","suffix"],{command:z["$[]"](0),suffix:z["$[]"](1)})}),E(o,"$_reduce_7",function(z,Z,H){var N=this;return(R(N.need_prefix_number)||R(N.need_suffix_number))&&N.$raise(m("ParseError")),K(["command"],{command:z["$[]"](0)})}),E(o,"$_reduce_8",function(z,Z,H){return K([],{})}),E(o,"$_reduce_9",function(z,Z,H){var N,ae,re=i;return re=null==(N=g(z))[0]?i:N[0],ae=null==N[2]?i:N[2],R(this.critical)&&R(re["$[]"]("critical")["$nil?"]())||this.$raise(m("ParseError")),re["$[]="]("critical",ae),re}),E(o,"$_reduce_10",function(z,Z,H){var N,ae,re=i;return re=null==(N=g(z))[0]?i:N[0],ae=null==N[2]?i:N[2],R(this.fumble)&&R(re["$[]"]("fumble")["$nil?"]())||this.$raise(m("ParseError")),re["$[]="]("fumble",ae),re}),E(o,"$_reduce_11",function(z,Z,H){var N,ae,re=i;return re=null==(N=g(z))[0]?i:N[0],ae=null==N[2]?i:N[2],R(this.dollar)&&R(re["$[]"]("dollar")["$nil?"]())||this.$raise(m("ParseError")),re["$[]="]("dollar",ae),re}),E(o,"$_reduce_12",function(z,Z,H){return z["$[]"](1)}),E(o,"$_reduce_13",function(z,Z,H){return q(q(m("Arithmetic"),"Node"),"Negative").$new(z["$[]"](1))}),E(o,"$_reduce_14",function(z,Z,H){return q(q(m("Arithmetic"),"Node"),"BinaryOp").$new(z["$[]"](0),"+",z["$[]"](2))}),E(o,"$_reduce_15",function(z,Z,H){return q(q(m("Arithmetic"),"Node"),"BinaryOp").$new(z["$[]"](0),"-",z["$[]"](2))}),E(o,"$_reduce_16",function(z,Z,H){return R(this.allowed_cmp_op["$include?"](i))||this.$raise(m("ParseError")),K([],{})}),E(o,"$_reduce_17",function(z,Z,H){var N,re,J;return J=null==(N=g(z))[1]?i:N[1],R(this.allowed_cmp_op["$include?"](re=null==N[0]?i:N[0]))||this.$raise(m("ParseError")),K(["cmp_op","target"],{cmp_op:re,target:J})}),E(o,"$_reduce_18",function(z,Z,H){var ee,N=this;return ee=z["$[]"](0),R(N.question_target)||N.$raise(m("ParseError")),R(N.allowed_cmp_op["$include?"](ee))||N.$raise(m("ParseError")),K(["cmp_op","target"],{cmp_op:ee,target:"?"})}),E(o,"$_reduce_19",function(z,Z,H){return q(q(m("Arithmetic"),"Node"),"BinaryOp").$new(z["$[]"](0),"+",z["$[]"](2))}),E(o,"$_reduce_20",function(z,Z,H){return q(q(m("Arithmetic"),"Node"),"BinaryOp").$new(z["$[]"](0),"-",z["$[]"](2))}),E(o,"$_reduce_22",function(z,Z,H){return q(q(m("Arithmetic"),"Node"),"BinaryOp").$new(z["$[]"](0),"*",z["$[]"](2))}),E(o,"$_reduce_23",function(z,Z,H){return z["$[]"](3).$new(z["$[]"](0),z["$[]"](2))}),E(o,"$_reduce_25",function(z,Z,H){return q(q(m("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),E(o,"$_reduce_26",function(z,Z,H){return q(q(m("Arithmetic"),"Node"),"DivideWithCeil")}),E(o,"$_reduce_27",function(z,Z,H){return q(q(m("Arithmetic"),"Node"),"DivideWithCeil")}),E(o,"$_reduce_28",function(z,Z,H){return q(q(m("Arithmetic"),"Node"),"DivideWithRound")}),E(o,"$_reduce_29",function(z,Z,H){return q(q(m("Arithmetic"),"Node"),"DivideWithFloor")}),E(o,"$_reduce_30",function(z,Z,H){return z["$[]"](1)}),E(o,"$_reduce_31",function(z,Z,H){return q(q(m("Arithmetic"),"Node"),"Negative").$new(z["$[]"](1))}),E(o,"$_reduce_33",function(z,Z,H){return z["$[]"](1)}),E(o,"$_reduce_34",function(z,Z,H){return q(q(m("Arithmetic"),"Node"),"Number").$new(z["$[]"](0))}),E(o,"$_reduce_none",function(z,Z,H){return z["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function(e){var P,M,G,s,v,i,g,j,F=e.module,B=e.send,u=e.eqeqeq,L=e.truthy,w=e.def,T=e.return_val,U=[],D=e.nil;return P=U,M=j=[F(U[0],"BCDice")].concat(P),G=g=[F(j[0],"Deprecated")].concat(M),v=[s=F(g[0],"Checker")].concat(G),i=e.$r(v),s.$private(),w(s,"$check_result_legacy",function(r,a,h,I){var b,C=this,x=D,l=D,_=D,p=D;return x=B(a,"map",[],"sides".$to_proc()),b=(l=B(a,"map",[],"value".$to_proc())).$sum(),_=u([100],p=x)?C.$check_1D100(r,b,h,I):u([20],p)?C.$check_1D20(r,b,h,I):u([6,6],p)?C.$check_2D6(r,b,l,h,I):D,(L(_["$nil?"]())||L(_["$empty?"]()))&&(_=u([10],p=x.$uniq())?C.$check_nD10(r,b,l,h,I):u([6],p)?C.$check_nD6(r,b,l,h,I):D,L(_["$nil?"]())||L(_["$empty?"]()))?D:i("Result").$new(_.$delete_prefix(" \uff1e "))}),w(s,"$check_1D100",T(D)),w(s,"$check_1D20",T(D)),w(s,"$check_nD10",T(D)),w(s,"$check_2D6",T(D)),w(s,"$check_nD6",T(D))},Opal.modules["bcdice/base"]=function(e){var v,C,p,m,n,k,c,y,o,A,l,F=e.module,B=e.klass,u=e.slice,L=e.rb_plus,w=e.truthy,T=e.def,U=e.regexp,D=e.send,E=e.thrower,P=e.return_ivar,S=e.assign_ivar_val,j=e.eqeqeq,Y=e.eqeq,M=e.return_val,R=e.range,g=e.rb_minus,K=e.rb_divide,G=e.rb_times,s=e.rb_ge,i=e.top,q=[],r=e.$r(q),a=e.nil,h=e.$$$;return i.$require("i18n"),i.$require("i18n/backend/fallbacks"),i.$require("bcdice/randomizer"),i.$require("bcdice/dice_table"),i.$require("bcdice/enum"),i.$require("bcdice/translate"),i.$require("bcdice/result"),i.$require("bcdice/command/parser"),i.$require("bcdice/deprecated/checker"),C=q,p=l=[F(q[0],"BCDice")].concat(C),y=[c=B(l[0],null,"Base")].concat(p),o=e.$r(y),(A=c.$$prototype).raw_input=A.randomizer=A.enabled_upcase_input=A.debug=a,n=[m=e.get_singleton_class(c)].concat(y),k=e.$r(n),m.$attr_reader("prefixes"),T(m,"$register_prefix",function(d){var Q,X=this,V=a;return null==X.prefixes&&(X.prefixes=a),Q=u(arguments),X.prefixes=L(w(V=X.prefixes)?V:[],Q.$flatten())},-1),T(m,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),T(m,"$prefixes_pattern",function(){var d=this,$=a;return null==d.prefixes_pattern&&(d.prefixes_pattern=a),null==d.prefixes&&(d.prefixes=a),d.prefixes_pattern=w($=d.prefixes_pattern)?$:a,w(d.prefixes_pattern)?d.prefixes_pattern:(d.prefixes=w($=d.prefixes)?$:[],d.prefixes.$freeze(),d.prefixes_pattern=(w(d.prefixes["$empty?"]())?/(?!)/:U(["^(S)?(",d.prefixes.$join("|"),")"],"i")).$freeze())}),T(m,"$command_pattern",function(){var d=this,$=a,Q=a;return null==d.command_pattern&&(d.command_pattern=a),null==d.prefixes&&(d.prefixes=a),d.command_pattern=w($=d.command_pattern)?$:a,w(d.command_pattern)?d.command_pattern:(d.prefixes=w($=d.prefixes)?$:[],d.prefixes.$freeze(),Q=L(D(h(k("CommonCommand"),"COMMANDS"),"map",[],function(V){return null==V&&(V=a),h(V,"PREFIX_PATTERN").$source()}),d.prefixes),d.command_pattern=U(["^S?(",Q.$join("|"),")"],"i").$freeze())}),T(m,"$eval",function(d){try{return E("eval_return"),this.$new(d).$eval()}catch(X){if(X===e.t_eval_return)return X.$v;throw X}}),c.$include(o("Translate")),c.$include(h(o("Deprecated"),"Checker")),T(c,"$initialize",function(f){var n=this;return n.raw_input=f,n.sort_add_dice=!1,n.sort_barabara_dice=!1,n.d66_sort_type=h(o("D66SortType"),"NO_SORT"),n.enabled_d9=!1,n.round_type=h(o("RoundType"),"FLOOR"),n.sides_implicit_d=6,n.upper_dice_reroll_threshold=a,n.reroll_dice_reroll_threshold=a,n.default_cmp_op=a,n.default_target_number=a,n.enabled_upcase_input=!0,n.locale="ja_jp",n.randomizer=h(o("BCDice"),"Randomizer").$new(),n.debug=!1}),c.$attr_accessor("randomizer"),c.$attr_reader("d66_sort_type"),c.$attr_reader("round_type"),c.$attr_reader("sides_implicit_d"),c.$attr_reader("upper_dice_reroll_threshold"),c.$attr_reader("reroll_dice_reroll_threshold"),c.$attr_reader("default_cmp_op"),c.$attr_reader("default_target_number"),T(c,"$sort_add_dice?",P("sort_add_dice")),T(c,"$sort_barabara_dice?",P("sort_barabara_dice")),T(c,"$enabled_d9?",P("enabled_d9")),T(c,"$enable_debug",S("debug",!0)),T(c,"$eval",function(){var n,t,f=this,k=a;return n=h(o("BCDice"),"Preprocessor").$process(f.raw_input,f),k=w(t=f.$dice_command(n))?t:f.$eval_common_command(f.raw_input),w(k)?(k["$rands="](f.randomizer.$rand_results()),k["$detailed_rands="](f.randomizer.$detailed_rand_results()),k):a}),T(c,"$change_text",function(f){return f}),T(c,"$check_result",function(f,n,k,t){var d=this,$=a,Q=a,X=a,V=a,ne=a;return $=d.$check_result_legacy(f,n,k,t),w($)?$:(Q=D(n,"map",[],"sides".$to_proc()),V=(X=D(n,"map",[],"value".$to_proc())).$sum(),$=j([100],ne=Q)?d.$result_1d100(f,V,k,t):j([20],ne)?d.$result_1d20(f,V,k,t):j([6,6],ne)?d.$result_2d6(f,V,X,k,t):a,Y($,o("Result").$nothing())?a:w($)?$:($=j([10],ne=Q.$uniq())?d.$result_nd10(f,V,X,k,t):j([6],ne)?d.$result_nd6(f,V,X,k,t):a,Y($,o("Result").$nothing())?a:w($)?$:d.$result_ndx(f,k,t)))}),T(c,"$grich_text",M(a)),c.$private(),T(c,"$eval_common_command",function(f){try{E("eval_return");var k=E("return");return f=this.$change_text(f),D(h(o("CommonCommand"),"COMMANDS"),"each",[],function d($){var X,Q=null==d.$$s?this:d.$$s;if(null==Q.randomizer&&(Q.randomizer=a),null==$&&($=a),X=$.$eval(f,Q,Q.randomizer),!w(X))return a;k.$throw(X)},{$$s:this,$$ret:k}),a}catch(d){if(d===e.t_eval_return||d===k)return d.$v;throw d}}),T(c,"$dice_command",function(f){var n=this,k=a,t=a,d=a,$=a;return w(n.enabled_upcase_input)&&(f=f.$upcase()),k=n.$class().$prefixes_pattern().$match(f),w(k)?(t=k["$[]"](1)["$nil?"]()["$!"](),w(t)&&(f=f["$[]"](R(1,-1,!1))),d=n.$eval_game_system_specific_command(f),w(d["$is_a?"](o("Result")))?(d["$secret="](w($=d["$secret?"]())?$:t),d):w(d["$nil?"]())||w(d["$empty?"]())||Y(d,"1")?a:D(o("Result").$new(),"tap",[],function(X){var V;return null==X&&(X=a),X["$text="](d.$to_s()),D(X,"secret=",V=[t]),V[V.length-1]})):a}),T(c,"$eval_game_system_specific_command",M(a)),T(c,"$result_ndx",function(f,n,k){return w(k["$is_a?"](o("String")))?a:w(f.$send(n,k))?o("Result").$success(this.$translate("success")):o("Result").$failure(this.$translate("failure"))}),T(c,"$result_1d100",M(a)),T(c,"$result_1d20",M(a)),T(c,"$result_nd10",M(a)),T(c,"$result_2d6",M(a)),T(c,"$result_nd6",M(a)),T(c,"$get_table_by_2d6",function(f){return this.$get_table_by_nD6(f,2)}),T(c,"$get_table_by_1d6",function(f){return this.$get_table_by_nD6(f,1)}),T(c,"$get_table_by_nD6",function(f,n){return this.$get_table_by_nDx(f,n,6)}),T(c,"$get_table_by_nDx",function(f,n,k){var d,$=a;return d=this.randomizer.$roll_sum(n,k),$=this.$get_table_value(f["$[]"](g(d,n))),w($["$nil?"]())?["1",0]:[$,d]}),T(c,"$get_table_by_1d3",function(f){var t,d,n=this,$=a;return n.$debug("get_table_by_1d3"),t=n.randomizer.$roll_sum(1,6),n.$debug("num",t),d=K(g(t,1),2).$to_i(),n.$debug("index",d),$=f["$[]"](d),w($["$nil?"]())?["1",0]:[$,t]}),T(c,"$get_table_by_d66_swap",function(f){var k;return k=this.randomizer.$roll_d66(h(o("D66SortType"),"ASC")),[this.$get_table_by_number(k,f),k]}),T(c,"$get_table_by_d66",function(f){var k,t,d,Q,$=a;return k=this.randomizer.$roll_once(6),t=this.randomizer.$roll_once(6),d=L(G(g(k,1),6),g(t,1)),$=f["$[]"](d),Q=""+k+t,w($["$nil?"]())?["1",Q]:[$,Q]}),T(c,"$get_table_by_number",function(f,n,k){try{var t=E("return");return null==k&&(k="1"),D(n,"each",[],function $(Q){var V,X=null==$.$$s?this:$.$$s;if(null==Q&&(Q=a),V=Q["$[]"](0),!w(s(V,f)))return a;t.$throw(X.$get_table_value(Q["$[]"](1)))},{$$s:this,$$ret:t}),this.$get_table_value(k)}catch($){if($===t)return $.$v;throw $}},-3),T(c,"$get_table_value",function(f){return w(f["$is_a?"](o("Proc")))?f.$call():f}),T(c,"$roll_tables",function(f,n){var t=a;return t=n["$[]"](f),w(t)?t.$roll(this.randomizer).$to_s():a}),T(c,"$debug",function(f,n){var t,d=this,$=a,Q=a;return t=u(arguments,1),w(d.debug)?($=w(f["$is_a?"](o("String")))?f:f.$inspect(),w(t["$empty?"]())?d.$warn($):(Q=D(t,"map",[],function(V){return null==V&&(V=a),w(V["$is_a?"](o("String")))?'"'+V+'"':V.$inspect()}),d.$warn($+": "+Q.$join(", ")))):a},-2),h(h(r("I18n"),"Backend"),"Simple").$include(h(h(r("I18n"),"Backend"),"Fallbacks")),r("I18n").$load_path()["$<<"](r("Dir")["$[]"](r("File").$join("bcdice","../../i18n/**/*.yml"))),r("I18n")["$default_locale="]("ja_jp"),v=[["ja_jp"]],D(r("I18n").$fallbacks(),"defaults=",v),v[v.length-1]},Opal.queue(function(e){var G,q,x,c,y,l,b,_,p,a,h,v,F=e.module,B=e.klass,u=e.const_set,L=e.send2,w=e.find_super,T=e.def,U=e.truthy,D=e.send,E=e.hash2,P=e.rb_le,S=e.hash,j=e.rb_plus,M=[],R=e.nil,g=e.$$$;return e.top.$require("bcdice/base"),G=M,q=v=[F(M[0],"BCDice")].concat(G),a=[F(v[0],"GameSystem")].concat(q),h=e.$r(a),x=a,b=[l=B(a[0],h("Base"),"AlchemiaStruggle")].concat(x),_=e.$r(b),p=R,l.$$prototype.randomizer=R,u(b[0],"ID","AlchemiaStruggle"),u(b[0],"NAME","\u30a2\u30eb\u30b1\u30df\u30a2\u30fb\u30b9\u30c8\u30e9\u30b0\u30eb"),u(b[0],"SORT_KEY","\u3042\u308b\u3051\u307f\u3042\u3059\u3068\u3089\u304f\u308b"),u(b[0],"HELP_MESSAGE","\u25a0 \u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\uff08 xAS \uff09\n  xD\u3092\u30ed\u30fc\u30eb\u3057\u307e\u3059\u3002\n  \u4f8b\uff09 5AS\n\n\u25a0 \u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\uff06\u6700\u5927\u306b\u306a\u308b\u3088\u3046\u306b\u30d4\u30c3\u30af\uff08 xASy \uff09\n  xD\u3092\u30ed\u30fc\u30eb\u3057\u3001\u305d\u3053\u304b\u3089\u6700\u5927\u306b\u306a\u308b\u3088\u3046\u306by\u500b\u3092\u30d4\u30c3\u30af\u3057\u307e\u3059\u3002\n  \u4f8b\uff09 4AS3\n\n\u25a0 \u30a6\u30eb\u30c0\u30a4\u30b9\u306e\u7372\u5f97\uff08 xUL \uff09\n  xD\u306e\u30a6\u30eb\u30c0\u30a4\u30b9\u3092\u632f\u308a\u3001\u51fa\u305f\u51fa\u76ee\u306e\u500b\u6570\u3092No.\u3054\u3068\u306b\u30ab\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\n  \u4f8b\uff09 6UL\n\n\u25a0 \u8868\n  \u30fb\u5947\u8de1\u306e\u89e6\u5a92\n    \u30fb\u30a8\u30ec\u30e1\u30f3\u30c8 (CELE, CElement)\n    \u30fb\u30a2\u30eb\u30b1\u30df\u30a2 (CALC, CAlchemia)\n    \u30fb\u30a4\u30f3\u30d5\u30a9\u30fc\u30de\u30f3\u30c8 (CINF, CInformant)\n    \u30fb\u30a4\u30ce\u30bb\u30f3\u30b9 (CINN, CInnocence)\n    \u30fb\u30a2\u30af\u30ef\u30a4\u30e4\u30fc\u30c9 (CACQ, CAcquired)\n  \u30fb\u643a\u884c\u54c1\n    \u30fb\uff33\u30b5\u30a4\u30ba (ARS, ArticleS)\n    \u30fb\uff2d\u30b5\u30a4\u30ba (ARM, ArticleM)\n    \u30fb\uff2c\u30b5\u30a4\u30ba (ARL, ArticleL)\n  \u30fb\uff30\uff23\u60c5\u5831\u7372\u5f97\u8868 (PCI, PCInformation)\n  \u30fb\u7406\u7531\u8868 (REA, Reason)\n  \u30fb\u4ea4\u6d41\u8868 (ASS, Associate)\n  \u30fb\u63a5\u89e6\u306e\u304d\u3063\u304b\u3051\u8868 (CON, Contact)\n"),u(b[0],"ROLL_REG",/^(\d+)AS(\d+)?$/i.$freeze()),l.$register_prefix("\\d+AS","\\d+UL"),T(l,"$initialize",function A(m){var n=this;return A.$$p=null,L(n,w(n,"initialize",A,!1,!0),"initialize",[m],null),n.sort_add_dice=!0,n.sort_barabara_dice=!0,n.round_type=g(_("RoundType"),"CEIL")}),T(l,"$eval_game_system_specific_command",function(m){var n,t,f=this,k=R;return n=U(k=_("ALIAS")["$[]"](m))?k:m,U(k=U(t=f.$try_roll_alchemia(n))?t:f.$try_roll_uldice(n))?k:f.$roll_tables(n,_("TABLES"))}),T(l,"$try_roll_alchemia",function(m){var f=this,n=R,k=R,t=R,d=R;return n=_("ROLL_REG").$match(m),U(n)?(k=n["$[]"](1).$to_i(),U(n["$[]"](2)["$nil?"]())?(t=f.$roll_alchemia(k),f.$make_roll_text(t)):(d=n["$[]"](2).$to_i(),t=f.$roll_alchemia_and_pick(k,d),f.$make_roll_and_pick_text(t["$[]"]("rolled_dices"),d,t["$[]"]("picked_dices")))):R}),T(l,"$try_roll_uldice",function(m){var n=R,k=R,t=R;return n=/^(\d+)UL$/.$match(m),U(n)?["("+(k=n["$[]"](1).$to_i())+"D6)","["+(t=this.randomizer.$roll_barabara(k,6).$sort()).$join(",")+"]",D(D(t,"group_by",[],"itself".$to_proc()),"map",[],function(V,ne){return null==V&&(V=R),null==ne&&(ne=R),"No."+V+": "+ne.$size()+"\u500b"}).$join(", ")].$join(" \uff1e "):R}),T(l,"$roll_alchemia",function(m){return this.randomizer.$roll_barabara(m,6)}),T(l,"$roll_alchemia_and_pick",function(m,f){var k;return k=this.$roll_alchemia(m),E(["rolled_dices","picked_dices"],{rolled_dices:k,picked_dices:this.$pick_maximum(k,f)})}),T(l,"$pick_maximum",function(m,f){return U(P(m.$size(),f))?m:m.$sort().$pop(f)}),T(l,"$make_roll_text",function(m){return"("+m.$size()+"D6) \uff1e "+this.$make_dice_text(m)}),T(l,"$make_roll_and_pick_text",function(m,f,n){return"("+m.$size()+"D6|>"+f+"D6) \uff1e "+this.$make_dice_text(m)+" >> "+this.$make_dice_text(n)+" \uff1e "+n.$sum()}),T(l,"$make_dice_text",function(m){return"["+m.$sort().$join(", ")+"]"}),u(b[0],"CATALYST_TABLES",D(E(["CElement","CAlchemia","CInformant","CInnocence","CAcquired"],{CElement:g(_("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a8\u30ec\u30e1\u30f3\u30c8\uff09","1D6",["\u30ef\u30f3\u30c9","\u6c34\u6676\u7389","\u30ab\u30fc\u30c9","\u30b9\u30c6\u30c3\u30ad","\u624b\u93e1","\u5b9d\u77f3"]),CAlchemia:g(_("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a2\u30eb\u30b1\u30df\u30a2\uff09","1D6",["\u6307\u8f2a","\u30d6\u30ec\u30b9\u30ec\u30c3\u30c8","\u30a4\u30e4\u30ea\u30f3\u30b0","\u30cd\u30c3\u30af\u30ec\u30b9","\u30d6\u30ed\u30fc\u30c1","\u30d8\u30a2\u30d4\u30f3"]),CInformant:g(_("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a4\u30f3\u30d5\u30a9\u30fc\u30de\u30f3\u30c8\uff09","1D6",["\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3","\u30bf\u30d6\u30ec\u30c3\u30c8","\u30ce\u30fc\u30c8\u30d1\u30bd\u30b3\u30f3","\u7121\u7dda\u6a5f\uff08\u30c8\u30e9\u30f3\u30b7\u30fc\u30d0\u30fc\uff09","\u30a6\u30a7\u30a2\u30e9\u30d6\u30eb\u30c7\u30d0\u30a4\u30b9","\u643a\u5e2f\u30b2\u30fc\u30e0\u6a5f"]),CInnocence:g(_("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a4\u30ce\u30bb\u30f3\u30b9\uff09","1D6",["\u624b\u888b","\u7b1b","\u9774","\u9234","\u62e1\u58f0\u5668","\u5f26\u697d\u5668"]),CAcquired:g(_("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a2\u30af\u30ef\u30a4\u30e4\u30fc\u30c9\uff09","1D6",["\u30dc\u30bf\u30f3","\u97f3\u58f0","\u30e2\u30fc\u30b7\u30e7\u30f3","\u8133\u6ce2","\u8a18\u9332\u5a92\u4f53","\uff21\uff29"])}),"transform_keys",[],"upcase".$to_proc()).$freeze()),u(b[0],"ARTICLE_TABLES",D(E(["ArticleS","ArticleM","ArticleL"],{ArticleS:g(_("DiceTable"),"D66Table").$new("\u643a\u884c\u54c1\uff08\uff33\u30b5\u30a4\u30ba\uff09",g(_("D66SortType"),"ASC"),S(11,"\u30de\u30c3\u30c1",12,"\u30da\u30c3\u30c8\u30dc\u30c8\u30eb",13,"\u8a66\u9a13\u7ba1",14,"\u56e3\u6247",15,"\u690d\u7269",16,"\u30cf\u30f3\u30ab\u30c1",22,"\u5316\u7ca7\u7528\u5177",23,"\u30d9\u30eb\u30c8",24,"\u30bf\u30d0\u30b3",25,"\u30c1\u30a7\u30fc\u30f3",26,"\u96fb\u6c60",33,"\u304a\u83d3\u5b50",34,"\u91dd\u91d1",35,"\u30b3\u30a4\u30f3",36,"\u30ca\u30a4\u30d5",44,"\u30ab\u30c8\u30e9\u30ea\u30fc",45,"\u7802",46,"\u30b9\u30d7\u30ec\u30fc",55,"\u77f3",56,"\u6587\u623f\u5177",66,"\u30da\u30f3\u30e9\u30a4\u30c8")),ArticleM:g(_("DiceTable"),"D66ParityTable").$new("\u643a\u884c\u54c1\uff08\uff2d\u30b5\u30a4\u30ba\uff09",["\u672c","\u5098","\u91d1\u5c5e\u677f","\u82b1\u706b","\u30a8\u30a2\u30ac\u30f3","\u5305\u5e2f"],["\u5de5\u5177","\u30b8\u30e3\u30b1\u30c3\u30c8","\u30ed\u30fc\u30d7","\u4eba\u5f62","\u8efd\u98df","\u30ac\u30e9\u30b9\u74f6"]),ArticleL:g(_("DiceTable"),"D66ParityTable").$new("\u643a\u884c\u54c1\uff08\uff2c\u30b5\u30a4\u30ba\uff09",["\u6728\u5200","\u91e3\u308a\u5177","\u81ea\u8ee2\u8eca","\u30d0\u30c3\u30c8","\u5bdd\u888b","\u4e38\u592a"],["\u7269\u5e72\u3057\u7aff","\u934b","\u30b9\u30b1\u30fc\u30c8\u30dc\u30fc\u30c9","\u30b7\u30e3\u30d9\u30eb\uff08\u30b9\u30b3\u30c3\u30d7\uff09","\u30bf\u30f3\u30af","\u811a\u7acb"])}),"transform_keys",[],"upcase".$to_proc()).$freeze()),u(b[0],"DRAMA_SEQUENCE_TABLES",D(E(["PCInformation","Reason","Associate","Contact"],{PCInformation:g(_("DiceTable"),"D66ParityTable").$new("\uff30\uff23\u60c5\u5831\u7372\u5f97\u8868",["\u524d\u306e\u5834\u9762\u306e\u76f4\u5f8c \u2015\u2015 \u76f4\u524d\u306b\u3084\u308a\u53d6\u308a\u3092\u3057\u3066\u3044\u305f\u5834\u6240\u3002\u805e\u304d\u305f\u3044\u3053\u3068\u3092\u7a81\u304d\u3064\u3051\u308b\u9803\u5408\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002","\u81ea\u5206\u306e\u62e0\u70b9 \u2015\u2015 \u81ea\u5206\u306e\u5fc3\u8eab\u3092\u4f11\u3081\u3089\u308c\u308b\u5834\u6240\u3002\u3053\u3061\u3089\u306e\u30da\u30fc\u30b9\u306b\u5f15\u304d\u8fbc\u307f\u3001\u3086\u3055\u3076\u308a\u3092\u304b\u3051\u308b\u3002","\u76f8\u624b\u306e\u62e0\u70b9 \u2015\u2015 \u76f8\u624b\u304c\u751f\u6d3b\u306e\u57fa\u70b9\u306b\u3057\u3066\u3044\u308b\u5834\u6240\u3002\u76f8\u624b\u306e\u30da\u30fc\u30b9\u306b\u5451\u307e\u308c\u306a\u3044\u3088\u3046\u3001\u614e\u91cd\u306b\u3044\u3053\u3046\u3002","\u81ea\u5b66\u6d3e\u306e\u62e0\u70b9 \u2015\u2015 \u81ea\u5206\u304c\u5b66\u6d3e\u306e\u4ef2\u9593\u3068\u5171\u306b\u4f7f\u7528\u3059\u308b\u5834\u6240\u3002\u4ef2\u9593\u306b\u624b\u306f\u51fa\u3055\u305b\u305a\u3001\u3042\u304f\u307e\u3067\u30d7\u30ec\u30c3\u30b7\u30e3\u30fc\u3092\u4e0e\u3048\u308b\u3060\u3051\u306b\u3057\u3066\u3082\u3089\u3046\u3002","\u30ab\u30d5\u30a7\u3001\u30d0\u30fc \u2015\u2015 \u53b3\u304b\u306a\u7a7a\u6c17\u306b\u5305\u307e\u308c\u305f\u5927\u4eba\u306e\u5834\u6240\u3002\u3053\u3053\u3067\u58f0\u3092\u8352\u3052\u308b\u306e\u306f\u7d33\u58eb\u7684\u3067\u306f\u306a\u3044\u3002","\u8def\u5730\u88cf \u2015\u2015 \u5efa\u7269\u3068\u5efa\u7269\u306e\u9593\u3084\u3001\u4eba\u901a\u308a\u306e\u5c11\u306a\u3044\u88cf\u901a\u308a\u3002\u591a\u5c11\u624b\u8352\u306a\u624b\u6bb5\u306b\u51fa\u3066\u3082\u76ee\u7acb\u3061\u306f\u3057\u306a\u3044\u3060\u308d\u3046\u3002"],["\u5ec3\u589f \u2015\u2015 \u5ec3\u30d3\u30eb\u3001\u5ec3\u5de5\u5834\u306e\u3088\u3046\u306a\u4eba\u304c\u7acb\u3061\u5165\u3089\u306a\u3044\u5834\u6240\u3002\u304a\u3042\u3064\u3089\u3048\u5411\u304d\u306e\u5834\u6240\u3092\u7528\u610f\u3057\u3066\u3084\u3063\u305f\u3002","\u516c\u5171\u4ea4\u901a\u6a5f\u95a2 \u2015\u2015 \u30d0\u30b9\u3001\u96fb\u8eca\u306a\u3069\u3002\u663c\u591c\u554f\u308f\u305a\u591a\u304f\u306e\u4eba\u304c\u5229\u7528\u3059\u308b\u4e57\u308a\u7269\u3002\u6562\u3048\u3066\u4eba\u76ee\u306b\u4ed8\u304f\u5834\u6240\u3067\u8a70\u3081\u5bc4\u308a\u3001\u52d5\u63fa\u3092\u8a98\u3046\u3002","\u96d1\u6728\u6797 \u2015\u2015 \u8349\u6728\u304c\u63fa\u308c\u308b\u97f3\u3001\u866b\u3084\u9ce5\u306e\u9cf4\u304d\u58f0\u3060\u3051\u304c\u805e\u3053\u3048\u308b\u3002\u305d\u3053\u306b\u90aa\u9b54\u3059\u308b\u8005\u306f\u3044\u306a\u3044\u3002","\u591c\u306e\u516c\u5712 \u2015\u2015 \u5bdd\u9759\u307e\u3063\u305f\u8857\u306e\u516c\u5712\u3002\u8857\u706f\u306b\u7167\u3089\u3055\u308c\u306a\u3044\u5834\u6240\u306a\u3089\u76ee\u7acb\u3064\u3053\u3068\u3082\u306a\u3044\u3060\u308d\u3046\u3002","\u99d0\u8eca\u5834 \u2015\u2015 \u7acb\u4f53\u3001\u5e73\u9762\u3001\u5730\u4e0b\u3092\u554f\u308f\u305a\u8eca\u3092\u505c\u3081\u308b\u5834\u6240\u3002\u4eba\u306e\u51fa\u5165\u308a\u306e\u6fc0\u3057\u3055\u306b\u5bfe\u3057\u3001\u305d\u3053\u306b\u7559\u307e\u308b\u4eba\u306f\u5c11\u306a\u3044\u3002\u76ee\u6483\u8005\u3082\u591a\u304f\u306f\u306a\u3044\u3060\u308d\u3046\u3002","\u9ad8\u67b6\u4e0b \u2015\u2015 \u7dda\u8def\u3001\u9053\u8def\u306e\u6a4b\u306e\u4e0b\u3002\u97ff\u304f\u9a12\u97f3\u304c\u81ea\u5206\u305f\u3061\u306e\u5b58\u5728\u3092\u8584\u3081\u3066\u304f\u308c\u308b\u3002"]),Reason:g(_("DiceTable"),"Table").$new("\u7406\u7531\u8868","1D6",["\u4e0d\u4fe1\u611f \u2015\u2015 \u884c\u52d5\u3084\u8a00\u52d5\u306b\u306a\u306b\u304b\u91c8\u7136\u3068\u3057\u306a\u3044\u90e8\u5206\u3092\u611f\u3058\u308b\u3002\u767d\u9ed2\u306f\u3063\u304d\u308a\u3055\u305b\u3088\u3046\u3002","\u597d\u5947\u5fc3 \u2015\u2015 \u76f8\u624b\u306e\u3053\u3068\u3092\u77e5\u308a\u305f\u3044\u3068\u63bb\u304d\u7acb\u3066\u3089\u308c\u308b\u3002\u77e5\u308a\u305f\u3044\u6c17\u6301\u3061\u3092\u6291\u3048\u3089\u308c\u306a\u3044\u3002","\u5e87\u8b77\u611f \u2015\u2015 \u77e5\u53e4\u306e\u59ff\u3092\u91cd\u306d\u3066\u5b88\u308a\u305f\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3002\u4fe1\u983c\u95a2\u4fc2\u3092\u541b\u3068\u7bc9\u304f\u305f\u3081\u3001\u8e0f\u307f\u8fbc\u3093\u3060\u3068\u3053\u308d\u307e\u3067\u77e5\u3063\u3066\u304a\u304d\u305f\u3044\u3002","\u5acc\u60aa\u611f \u2015\u2015 \u7406\u7531\u306f\u306a\u3044\u3051\u3069\u6c17\u306b\u98df\u308f\u306a\u3044\u3002\u60c5\u5831\u306e\u30a2\u30c9\u30d0\u30f3\u30c6\u30fc\u30b8\u3092\u63e1\u308b\u3053\u3068\u3067\u512a\u4f4d\u306b\u7acb\u3066\u308b\u306f\u305a\u3060\u3002","\u504f\u611b \u2015\u2015 \u611b\u3086\u3048\u306b\u77e5\u308a\u305f\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3002\u541b\u306e\u601d\u8003\u3001\u76ee\u7684\u3001\u611f\u60c5\u306e\u3059\u3079\u3066\u3092\u624b\u306b\u5165\u308c\u305f\u3044\u3002","\u76f4\u611f \u2015\u2015 \u6839\u62e0\u306f\u306a\u3044\u304c\u3001\u306a\u306b\u304b\u96a0\u3057\u3066\u3044\u308b\u6c17\u304c\u3059\u308b\u3002\u4e00\u304b\u516b\u304b\u3001\u52dd\u8ca0\u306b\u51fa\u3088\u3046\u3002"]),Associate:g(_("DiceTable"),"D66ParityTable").$new("\u4ea4\u6d41\u8868",["\u524d\u306e\u5834\u9762\u306e\u76f4\u5f8c \u2015\u2015 \u76f4\u524d\u306b\u3084\u308a\u53d6\u308a\u3092\u3057\u305f\u5834\u6240\u3002\u3061\u3087\u3063\u3068\u4e00\u606f\u3064\u304f\u3082\u306e\u3044\u3044\u3060\u308d\u3046\u3002","\u81ea\u5206\u306e\u62e0\u70b9 \u2015\u2015 \u81ea\u5206\u306e\u5fc3\u8eab\u3092\u4f11\u3081\u3089\u308c\u308b\u5834\u6240\u3002\u4e00\u7dd2\u306b\u304f\u3064\u308d\u304e\u306a\u304c\u3089\u8a71\u3092\u3057\u3088\u3046\u3002","\u76f8\u624b\u306e\u62e0\u70b9 \u2015\u2015 \u76f8\u624b\u304c\u751f\u6d3b\u306e\u57fa\u70b9\u306b\u3057\u3066\u3044\u308b\u5834\u6240\u3002\u3061\u3087\u3063\u3068\u304a\u90aa\u9b54\u3055\u305b\u3066\u3082\u3089\u3048\u306a\u3044\u3060\u308d\u3046\u304b\uff1f","\u76f8\u624b\u5b66\u6d3e\u306e\u62e0\u70b9 \u2015\u2015 \u76f8\u624b\u304c\u5b66\u6d3e\u306e\u4ef2\u9593\u3068\u5171\u306b\u4f7f\u7528\u3059\u308b\u5834\u6240\u3002\u82e5\u5e72\u306e\u5c45\u5fc3\u5730\u60aa\u3055\u306f\u3042\u308b\u304c\u3001\u597d\u611f\u3092\u6301\u3063\u3066\u3082\u3089\u3046\u305f\u3081\u306b\u306f\u6211\u6162\u3082\u5fc5\u8981\u3002","\u98df\u4e8b\u51e6 \u2015\u2015 \u30d5\u30a1\u30df\u30ec\u30b9\u3001\u5c45\u9152\u5c4b\u306a\u3069\u3002\u4eba\u3067\u306b\u304e\u308f\u3046\u98df\u4e8b\u51e6\u3002\u6c17\u8efd\u306b\u98f2\u307f\u98df\u3044\u3067\u304d\u308b\u7a7a\u9593\u3067\u3001\u8a71\u3082\u5f3e\u3080\u306f\u305a\u3002","\u30a2\u30df\u30e5\u30fc\u30ba\u30e1\u30f3\u30c8\u65bd\u8a2d \u2015\u2015 \u30ab\u30e9\u30aa\u30b1\u3001\u30dc\u30fc\u30ea\u30f3\u30b0\u3001\u30b2\u30fc\u30e0\u30bb\u30f3\u30bf\u30fc\u306a\u3069\u306e\u5a2f\u697d\u65bd\u8a2d\u3002\u904a\u3079\u3070\u4eba\u3068\u306a\u308a\u304c\u308f\u304b\u308b\u3002\u624b\u3063\u53d6\u308a\u65e9\u304f\u3044\u3053\u3046\u3002"],["\u304a\u796d\u308a \u2015\u2015 \u8001\u82e5\u7537\u5973\u304c\u53c2\u52a0\u3059\u308b\u30a4\u30d9\u30f3\u30c8\u3002\u975e\u65e5\u5e38\u7684\u306a\u7a7a\u6c17\u3092\u697d\u3057\u3080\u3053\u3068\u3067\u3001\u6c17\u5206\u8ee2\u63db\u3082\u3067\u304d\u308b\u3060\u308d\u3046\u3002","\u663c\u9593\u306e\u516c\u5712 \u2015\u2015 \u6563\u6b69\u3059\u308b\u4eba\u3084\u5b50\u9023\u308c\u306e\u5bb6\u65cf\u3067\u6ea2\u308c\u308b\u516c\u5712\u3002\u50d5\u3089\u306b\u3082\u3042\u3042\u3084\u3063\u3066\u751f\u304d\u308b\u9053\u304c\u3042\u3063\u305f\u306e\u3060\u308d\u3046\u304b\u3002","\u601d\u3044\u51fa\u306e\u5834\u6240 \u2015\u2015 \u81ea\u5206\u306b\u3068\u3063\u3066\u601d\u3044\u5165\u308c\u306e\u3042\u308b\u5927\u4e8b\u306a\u5834\u6240\u3002\u3053\u306e\u4eba\u306b\u306a\u3089\u80f8\u306e\u5185\u3092\u660e\u304b\u3057\u3066\u3082\u3044\u3044\u6c17\u5206\u306b\u306a\u3063\u305f\u3002","\u30b9\u30dd\u30fc\u30c4\u89b3\u6226 \u2015\u2015 \u91ce\u7403\u3001\u30b5\u30c3\u30ab\u30fc\u3001\u30d0\u30b9\u30b1\u306a\u3069\u3002\u30d7\u30ed\u30a2\u30de\u554f\u308f\u305a\u89b3\u6226\u3059\u308b\u3002\u624b\u306b\u6c57\u63e1\u308b\u5c55\u958b\u3092\u5171\u306b\u898b\u5c4a\u3051\u3088\u3046\u3002","\u5c4b\u4e0a \u2015\u2015 \u8857\u3068\u4eba\u3092\u898b\u4e0b\u308d\u3059\u773a\u3081\u306e\u3044\u3044\u5834\u6240\u3002\u3053\u306e\u666f\u8272\u3092\u541b\u306f\u559c\u3076\u3060\u308d\u3046\u304b\u3001\u6016\u304c\u308b\u3060\u308d\u3046\u304b\u3002","\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0 \u2015\u2015 \u5927\u578b\u5546\u696d\u65bd\u8a2d\u3084\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0\u30b9\u30c8\u30ea\u30fc\u30c8\u306b\u5411\u304b\u3046\u3002\u4e92\u3044\u306e\u8208\u5473\u304c\u3042\u308b\u3082\u306e\u3092\u77e5\u308b\u3044\u3044\u6a5f\u4f1a\u3060\u3002"]),Contact:g(_("DiceTable"),"Table").$new("\u63a5\u89e6\u306e\u304d\u3063\u304b\u3051\u8868","1D6",["\u4f53\u52e2\u3092\u5d29\u3059 \u2015\u2015 \u8ee2\u3073\u305d\u3046\u306b\u306a\u3063\u305f\u3068\u3053\u308d\u3092\u652f\u3048\u308b\u3001\u652f\u3048\u3089\u308c\u308b\u3002","\u4ed8\u7740\u7269\u3092\u3068\u308b \u2015\u2015 \u9aea\u3084\u670d\u306b\u3064\u3044\u3066\u3044\u308b\u30b4\u30df\u3001\u6c5a\u308c\u3092\u3068\u3063\u3066\u3042\u3052\u308b\u3002","\u601d\u308f\u305a\u624b\u304c\u51fa\u308b \u2015\u2015 \u8a00\u8449\u3088\u308a\u5148\u306b\u3001\u5f37\u3081\u306b\u624b\u304c\u51fa\u3066\u3057\u307e\u3046\u3002","\u7269\u3054\u3057\u306b\u89e6\u308c\u308b \u2015\u2015 \u7269\u3092\u6e21\u3059\u3001\u62fe\u3046\u969b\u306b\u6307\u5148\u540c\u58eb\u304c\u3076\u3064\u304b\u308b\u3002","\u53cb\u597d\u306e\u30b5\u30a4\u30f3 \u2015\u2015 \u80a9\u3092\u7d44\u3080\u3001\u63e1\u624b\u3092\u3059\u308b\u3001\u30cf\u30b0\u3092\u3059\u308b\u306a\u3069\u3002","\u30b1\u30a2\u3092\u3057\u3066\u3042\u3052\u308b \u2015\u2015 \u9aea\u3092\u3068\u304b\u3059\u3001\u80a9\u3092\u3082\u3080\u3001\u982d\u3092\u64ab\u3067\u308b\u3002\u76f8\u624b\u3092\u52b4\u3063\u3066\u3059\u308b\u884c\u70ba\u5168\u822c\u3002"])}),"transform_keys",[],"upcase".$to_proc()).$freeze()),u(b[0],"TABLES",_("CATALYST_TABLES").$merge(_("ARTICLE_TABLES")).$merge(_("DRAMA_SEQUENCE_TABLES"))),p=D(_("CATALYST_TABLES").$keys(),"map",[],function(m){return null==m&&(m=R),[m["$[]"](0,4),m]}).$to_h(),c=D(_("ARTICLE_TABLES").$keys(),"map",[],function(m){return null==m&&(m=R),[j(m["$[]"](0,2),m["$[]"](-1)),m]}).$to_h(),y=D(_("DRAMA_SEQUENCE_TABLES").$keys(),"map",[],function(m){return null==m&&(m=R),[m["$[]"](0,3),m]}).$to_h(),u(b[0],"ALIAS",p.$merge(c).$merge(y).$freeze()),l.$register_prefix(_("ALIAS").$keys(),_("TABLES").$keys())})}}]);