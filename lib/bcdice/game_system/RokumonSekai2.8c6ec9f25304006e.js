(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[9495],{3592:(Z,T,G)=>{G(9993),Opal.queue(function(n){var L,F,W,l,v,_,q,Q,C,w=n.module,B=n.klass,x=n.const_set,D=n.send2,P=n.find_super,k=n.def,g=n.send,u=n.truthy,M=n.to_ary,j=n.neqeq,o=n.rb_plus,H=n.thrower,E=n.rb_lt,y=n.rb_ge,z=n.rb_le,I=n.eqeq,A=[],e=n.nil;return L=A,F=C=[w(A[0],"BCDice")].concat(L),q=[w(C[0],"GameSystem")].concat(F),Q=n.$r(q),W=q,v=[l=B(q[0],Q("Base"),"RokumonSekai2")].concat(W),_=n.$r(v),l.$$prototype.randomizer=e,x(v[0],"ID","RokumonSekai2"),x(v[0],"NAME","\u516d\u9580\u4e16\u754cRPG \u30bb\u30ab\u30f3\u30c9\u30a8\u30c7\u30a3\u30b7\u30e7\u30f3"),x(v[0],"SORT_KEY","\u308d\u304f\u3082\u3093\u305b\u304b\u3044RPG2"),x(v[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\naRSm<=t\n\u80fd\u529b\u5024a,\u4fee\u6b63\u5024m,\u76ee\u6a19\u5024t\u3067\u5224\u5b9a\u30ed\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059\u3002\nR\u30b3\u30de\u30f3\u30c9(3R6m<=t[a])\u306b\u8aad\u307f\u66ff\u3048\u307e\u3059\u3002\n\u6210\u529f\u5ea6\u3001\u8a55\u4fa1\u3001\u30dc\u30fc\u30ca\u30b9\u30c0\u30a4\u30b9\u3092\u81ea\u52d5\u8868\u793a\u3057\u307e\u3059\u3002\n\u3000\u4f8b) 3RS+1<=9\u30003R6+1<=9[3]\n"),l.$register_prefix("\\d+RS","3R6"),k(l,"$initialize",function m(r){var $=this;return m.$$p=null,D($,P($,"initialize",m,!1,!0),"initialize",[r],null),$.sort_add_dice=!0}),k(l,"$replace_text",function(r){return r=g(r,"gsub",[/(\d+)RS([+-][+\-\d]+)<=(\d+)/i],function(){return"3R6"+_("Regexp").$last_match(2)+"<="+_("Regexp").$last_match(3)+"["+_("Regexp").$last_match(1)+"]"}),g(r,"gsub",[/(\d+)RS<=(\d+)/i],function(){return"3R6<="+_("Regexp").$last_match(2)+"["+_("Regexp").$last_match(1)+"]"})}),k(l,"$eval_game_system_specific_command",function(r){try{H("eval_return");var $,b,t=this,s=e,S=e,R=e,f=e,d=e,h=e;return r=t.$replace_text(r),u(/3R6([+\-\d]*)<=(\d+)\[(\d+)\]/i["$=~"](r))?(s=_("Regexp").$last_match(1),S=_("Regexp").$last_match(2).$to_i(),R=_("Regexp").$last_match(3).$to_i(),f=0,u(s)&&(f=_("ArithmeticEvaluator").$eval(s)),b=t.$rokumon2_roll(f,S,R),h=(null==($=M(b))[2]?e:$[2])+"["+(null==$[0]?e:$[0])+"] \uff1e "+(d=null==$[1]?e:$[1])+" \uff1e \u8a55\u4fa1"+t.$rokumon2_suc_rank(d),j(d,0)&&(h=o(h,"(+"+d+"d6)")),h="("+r+") \uff1e "+h):e}catch(p){if(p===n.t_eval_return)return p.$v;throw p}}),k(l,"$rokumon2_roll",function(r,a,$){var S,t=e,s=e,R=e,f=e,c=e;return t=0,S=(s=this.randomizer.$roll_barabara(o(3,r.$abs()),6).$sort()).$join(","),g(r.$abs(),"times",[],function(i){return null==i&&(i=e),u(E(r,0))?s.$shift():s.$pop()}),R=0,f=0,c=0,g(s,"each",[],function(i){return null==i&&(i=e),u(y(i,5))&&(R=o(R,1)),u(z(i,2))&&(f=o(f,1)),u(z(i,$))&&(t=o(t,1)),c=o(c,i)}),u(E(c,a))?t=o(t,2):I(c,a)&&(t=o(t,1)),u(y(R,3))&&(t=0),u(y(f,3))&&(t=5),[S,t,c]}),k(l,"$rokumon2_suc_rank",function(r){return["E","D","C","B","A","S"]["$[]"](r)})})}}]);