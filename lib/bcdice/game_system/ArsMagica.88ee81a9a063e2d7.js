(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[5734],{3655:(re,te,J)=>{J(9993),Opal.modules["bcdice/normalize"]=function(e){var i,g,y,p=e.module,_=e.eqeqeq,h=e.def,o=e.eqeq,A=[],b=e.nil;return i=A,y=[p(A[0],"BCDice")].concat(i),(g=p(y[0],"Normalize")).$module_function(),h(g,"$comparison_operator",function(f){var s;return _(/<=|=</,s=f)?"<=":_(/>=|=>/,s)?">=":_(/<>|!=|=!/,s)?"!=":_(/</,s)?"<":_(/>/,s)?">":_(/=/,s)?"==":b}),h(g,"$target_number",function(f){return o(f,"?")?f:f.$to_i()})},Opal.modules["bcdice/format"]=function(e){var y,f,s,N,F,g,p=e.module,_=e.eqeqeq,h=e.def,o=e.truthy,A=e.eqeq,b=e.rb_gt,S=[],i=e.nil;return y=S,f=g=[p(S[0],"BCDice")].concat(y),N=[s=p(g[0],"Format")].concat(f),F=e.$r(N),s.$module_function(),h(s,"$comparison_operator",function(q){var x;return _("==",x=q)?"=":_("!=",x)?"<>":_(F("Symbol"),x)?q.$to_s():i}),h(s,"$modifier",function(q){return o(q["$nil?"]())?i:A(q,0)?"":o(b(q,0))?"+"+q:q.$to_s()})},Opal.queue(function(e){var x,V,ee,z,C,D,M,G,X,P,p=e.module,_=e.klass,h=e.const_set,o=e.truthy,A=e.rb_minus,b=e.eqeq,S=e.send,i=e.rb_plus,E=e.neqeq,y=e.rb_gt,w=e.rb_lt,g=e.rb_times,R=e.rb_ge,f=e.def,s=e.thrower,N=e.top,F=[],r=e.nil;return N.$require("bcdice/normalize"),N.$require("bcdice/format"),x=F,V=P=[p(F[0],"BCDice")].concat(x),G=[p(P[0],"GameSystem")].concat(V),X=e.$r(G),ee=G,C=[z=_(G[0],X("Base"),"ArsMagica")].concat(ee),D=e.$r(C),(M=z.$$prototype).target_numner=M.botch=M.modify_number=M.cmp_op=M.randomizer=r,h(C[0],"ID","ArsMagica"),h(C[0],"NAME","\u30a2\u30eb\u30b9\u30de\u30ae\u30ab"),h(C[0],"SORT_KEY","\u3042\u308b\u3059\u307e\u304d\u304b"),h(C[0],"HELP_MESSAGE",'\u30fb\u30b9\u30c8\u30ec\u30b9\u30c0\u30a4\u30b9\u3000(ArSx+y)\n\u3000"ArS(\u30dc\u30c3\u30c1\u30c0\u30a4\u30b9)+(\u4fee\u6b63)"\u3067\u3059\u3002\u5224\u5b9a\u306b\u3082\u4f7f\u3048\u307e\u3059\u3002R\u30b3\u30de\u30f3\u30c9(1R10+y[m])\u306b\u8aad\u66ff\u3092\u3057\u307e\u3059\u3002\n\u3000\u30dc\u30c3\u30c1\u30c0\u30a4\u30b9\u3068\u4fee\u6b63\u306f\u7701\u7565\u53ef\u80fd\u3067\u3059\u3002(\u30dc\u30c3\u30c1\u30c0\u30a4\u30b9\u3092\u7701\u7565\u3059\u308b\u30681\u3068\u3057\u3066\u6271\u3044\u307e\u3059)\n\u3000botch\u30c0\u30a4\u30b9\u306e0\u306e\u6570\u304c2\u4ee5\u4e0a\u306e\u6642\u306f\u3001\u6570\u3048\u3066\u8868\u793a\u3057\u307e\u3059\u3002\n\u3000\uff08\u6ce8\u610f\uff01\uff09 botch\u306e\u5224\u65ad\u304c\u767a\u751f\u3057\u305f\u3068\u304d\u306b\u306f\u3001\u305d\u306e\u30c0\u30a4\u30b9\u3092\u542b\u3081\u3066\u30ed\u30fc\u30eb\u3057\u305f\u5168\u3066\u306e\u30c0\u30a4\u30b9\u3092[]\u306e\u4e2d\u306b\u4e26\u3079\u3066\u8868\u793a\u3057\u307e\u3059\u3002\n\u3000\u4f8b) (1R10[5]) \uff1e 0[0,1,8,0,8,1] \uff1e Botch!\n\u3000\u3000\u6700\u521d\u306e0\u304c\u5224\u65ad\u57fa\u6e96\u3067\u3001\u305d\u306e\u53f3\u50745\u3064\u304c\u30dc\u30c3\u30c1\u30c0\u30a4\u30b9\u3067\u3059\u30021*2,8*2,0*1\u306a\u306e\u30671botch\u3068\u3044\u3046\u8a33\u3067\u3059\u3002\n'),z.$register_prefix("ArS","1R10"),f(z,"$eval_game_system_specific_command",function(d){var a,m,l,t,$=this,c=r,u=r,H=r,v=r,n=r,k=r,I=r,B=r;if(!o($.$parse_ars(d))&&!o($.$parse_1r10(d)))return r;if(a=o(m=$.target_numner)?m:0,l=$.botch,t=$.modify_number,c=1,u=0,H=$.cmp_op,v=A($.randomizer.$roll_once(10),1),n="("+$.$expr()+") \uff1e ",b(v,0))k=0,I=[],S(l,"times",[],function T(Y){var L,K=null==T.$$s?this:T.$$s;return null==K.randomizer&&(K.randomizer=r),null==Y&&(Y=r),L=A(K.randomizer.$roll_once(10),1),b(L,0)&&(k=i(k,1)),I.$push(L)},{$$s:$}),n=i(n,"0["+v+","+I.$join(",")+"]"),E(k,0)?(n=o(y(k,1))?i(n," \uff1e "+k+"Botch!"):i(n," \uff1e Botch!"),H=r):(n=o(y(t,0))?i(n,"+"+t+" \uff1e "+t):o(w(t,0))?i(n,t+" \uff1e "+t):i(n," \uff1e 0"),u=t);else if(b(v,1)){for(B="";b(v,1);)c=g(c,2),v=$.randomizer.$roll_once(10),B=i(B,v+",");u=g(v,c),B=B.$sub(/,$/,""),n=i(n,u.$to_s()),n=i(n,"[1,"+B+"]"),u=i(u,t),o(y(t,0))?n=i(n,"+"+t+" \uff1e "+u):o(w(t,0))&&(n=i(n,t+" \uff1e "+u))}else u=i(v,t),n=o(y(t,0))?i(n,v+"+"+t+" \uff1e "+u):o(w(t,0))?i(n,""+v+t+" \uff1e "+u):i(n,u.$to_s());return b(H,">=")&&(n=i(n,o(R(u,a))?" \uff1e \u6210\u529f":" \uff1e \u5931\u6557")),n.$to_s()}),z.$private(),f(z,"$parse_ars",function(d){try{s("eval_return");var a,m,l=this,t=r,c=r;return t=/^ArS(\d+)?((?:[+-]-?\d+)+)?(?:([>=]+)(\d+))?$/i.$match(d),!!o(t)&&(l.botch=o(c=(a=t["$[]"](1))===r||null==a?r:a.$to_i())?c:1,l.modify_number=D("ArithmeticEvaluator").$eval(o(c=t["$[]"](2))?c:""),l.cmp_op=D("Normalize").$comparison_operator(t["$[]"](3)),l.target_numner=(m=t["$[]"](4))===r||null==m?r:m.$to_i(),!0)}catch(u){if(u===e.t_eval_return)return u.$v;throw u}}),f(z,"$parse_1r10",function(d){try{s("eval_return");var a,m,l=this,t=r,c=r;return t=/^1R10((?:[+-]-?\d+)+)?(?:\[(\d+)\])?(?:([>=]+)(\d+))?$/i.$match(d),!!o(t)&&(l.modify_number=D("ArithmeticEvaluator").$eval(o(c=t["$[]"](1))?c:""),l.botch=o(c=(a=t["$[]"](2))===r||null==a?r:a.$to_i())?c:1,l.cmp_op=D("Normalize").$comparison_operator(t["$[]"](3)),l.target_numner=(m=t["$[]"](4))===r||null==m?r:m.$to_i(),!0)}catch(u){if(u===e.t_eval_return)return u.$v;throw u}}),f(z,"$expr",function(){var d=this;return"1R10"+D("Format").$modifier(d.modify_number)+"["+d.botch+"]"+d.cmp_op+d.target_numner})})}}]);