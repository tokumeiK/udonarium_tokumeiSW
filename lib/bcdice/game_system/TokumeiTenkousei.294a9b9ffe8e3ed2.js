(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[5101],{4905:(Q,U,w)=>{w(9993),Opal.queue(function(i){var M,I,J,s,d,f,x,b,L,q,y=i.module,P=i.klass,l=i.const_set,D=i.send2,j=i.find_super,m=i.def,C=i.hash2,o=i.truthy,S=i.rb_plus,v=i.rb_gt,g=i.eqeq,R=i.send,A=i.rb_times,z=[],e=i.nil,B=i.$$$;return M=z,I=q=[y(z[0],"BCDice")].concat(M),b=[y(q[0],"GameSystem")].concat(I),L=i.$r(b),J=b,d=[s=P(b[0],L("Base"),"TokumeiTenkousei")].concat(J),f=i.$r(d),(x=s.$$prototype).randomizer=x.dice_list=e,l(d[0],"ID","TokumeiTenkousei"),l(d[0],"NAME","\u7279\u547d\u8ee2\u653b\u751f"),l(d[0],"SORT_KEY","\u3068\u304f\u3081\u3044\u3066\u3093\u3053\u3046\u305b\u3044"),l(d[0],"HELP_MESSAGE",'\u30fb\u5224\u5b9a (xD6+y>=n)\n\u3000\u30be\u30ed\u76ee\u3067\u306e\u81ea\u52d5\u632f\u308a\u8db3\u3057\n\u30001\u306e\u51fa\u76ee\u306b\u5fdc\u3058\u3066EPP\u306e\u7372\u5f97\u91cf\u3092\u8868\u793a\n\u3000\u76ee\u6a19\u5024 "?" \u306b\u306f\u672a\u5bfe\u5fdc\n'),m(s,"$initialize",function u(t){var $=this;return u.$$p=null,D($,j($,"initialize",u,!1,!0),"initialize",[t],null),$.sort_add_dice=!0}),s.$register_prefix("\\d+D6"),m(s,"$eval_game_system_specific_command",function(t){var a,h,E,n=this,r=e,c=e,_=e,k=e,p=e,T=e;if(r=B(f("Command"),"Parser").$new(/\d+D6/,C(["round_type"],{round_type:n.$round_type()})).$parse(t),!o(r))return e;for(a=r.$command().$to_i(),c=n.randomizer.$roll_barabara(a,6).$sort(),n.dice_list=[c];o(n["$same_all_dice?"](c));)c=n.randomizer.$roll_barabara(a,6).$sort(),n.dice_list.$push(c);return h=(_=n.dice_list.$flatten()).$sum(),E=_.$count(1),k=S(h,r.$modify_number()),p=o(r.$cmp_op())?o(k.$send(r.$cmp_op(),r.$target_number()))?f("Result").$success("\u6210\u529f"):f("Result").$failure("\u5931\u6557"):e,T=["("+r+")",n.$interim_expr(r,h),k.$to_s(),p.$text(),n.$epp(E)].$compact(),p["$text="](T.$join(" \uff1e ")),p}),m(s,"$same_all_dice?",function(t){var n;return o(n=v(t.$size(),1))?t.$uniq().$size()["$=="](1):n}),m(s,"$interim_expr",function(t,n){var r=e,a=e;return g(this.dice_list.$flatten().$size(),1)&&g(t.$modify_number(),0)?e:(r=R(this.dice_list,"map",[],function(_){return null==_&&(_=e),"["+_.$join(",")+"]"}).$join(""),a=f("Format").$modifier(t.$modify_number()),[n.$to_s(),r,a].$join(""))}),m(s,"$epp",function(t){return o(v(t,0))?A(t,5)+"EPP\u7372\u5f97":e})})}}]);