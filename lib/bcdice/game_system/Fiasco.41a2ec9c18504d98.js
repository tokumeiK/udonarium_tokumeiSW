(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[6739],{6587:(N,P,F)=>{F(9993),Opal.queue(function(o){var C,G,K,t,$,u,f,w,k,j,q,x=o.module,B=o.klass,h=o.const_set,_=o.truthy,c=o.def,m=o.send,p=o.rb_plus,y=o.hash2,W=o.eqeqeq,v=o.eqeq,z=o.rb_gt,g=o.rb_minus,S=[],e=o.nil;return C=S,G=q=[x(S[0],"BCDice")].concat(C),k=[x(q[0],"GameSystem")].concat(G),j=o.$r(k),K=k,f=[u=B(k[0],j("Base"),"Fiasco")].concat(K),w=o.$r(f),u.$$prototype.randomizer=e,h(f[0],"ID","Fiasco"),h(f[0],"NAME","\u30d5\u30a3\u30a2\u30b9\u30b3"),h(f[0],"SORT_KEY","\u3075\u3044\u3042\u3059\u3053"),h(f[0],"HELP_MESSAGE","  \u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9(FSx, WxBx)\n    \u76f8\u95a2\u56f3\u30fb\u8ee2\u843d\u8981\u7d20\u7528(FSx)\uff1a\u76f8\u95a2\u56f3\u3084\u8ee2\u843d\u8981\u7d20\u306e\u305f\u3081\u306bx\u500b\u30c0\u30a4\u30b9\u3092\u632f\u308a\u3001\u51fa\u76ee\u3054\u3068\u306b\u5206\u985e\u3059\u308b\n    \u9ed2\u767d\u5dee\u5206\u5224\u5b9a\u7528(WxBx)  \uff1a\u8ee2\u843d\u3001\u6b8b\u97ff\u306e\u305f\u3081\u306b\u767d\u30c0\u30a4\u30b9(W\u6307\u5b9a)\u3068\u9ed2\u30c0\u30a4\u30b9(B\u6307\u5b9a)\u3067\u5dee\u5206\u3092\u6c42\u3081\u308b\n      \u203b W\u3068B\u306f\u7247\u65b9\u6307\u5b9a(Bx, Wx)\u3001\u5165\u66ff\u6307\u5b9a(WxBx,BxWx)\u53ef\u80fd\n"),u.$register_prefix("FS","W","B"),c(u,"$eval_game_system_specific_command",function(n){var $,i,t=this;return _($=_(i=t.$roll_fs(n))?i:t.$roll_white_black(n))?$:t.$roll_white_black_single(n)}),u.$private(),c(u,"$roll_fs",function(n){var $=e,i=e,l=e,r=e;return $=/^FS(\d+)$/.$match(n),_($)?(i=$["$[]"](1).$to_i(),l=this.randomizer.$roll_barabara(i,6),r=[e,0,0,0,0,0,0],m(l,"each",[],function(s){var b;return null==s&&(s=e),b=[s,p(r["$[]"](s),1)],m(r,"[]=",b),b[b.length-1]}),m(r,"map!",[],function a(s){return null==s&&(s=e),(null==a.$$s?this:a.$$s).$translate("Fiasco.fs.count",y(["count"],{count:s}))},{$$s:this}),"1 => "+r["$[]"](1)+", 2 => "+r["$[]"](2)+", 3 => "+r["$[]"](3)+", 4 => "+r["$[]"](4)+", 5 => "+r["$[]"](5)+", 6 => "+r["$[]"](6)):e}),c(u,"$roll_white_black_single",function(n){var $=e,i=e;return $=/^([WB])(\d+)$/.$match(n),_($)?(i=w("Side").$new(this.$color($["$[]"](1)),$["$[]"](2).$to_i())).$roll(this.randomizer)+" \uff1e "+i.$color()+i.$total():e}),c(u,"$roll_white_black",function(n){var t=this,$=e,i=e,l=e,a=e;return $=/^([WB])(\d+)([WB])(\d+)$/.$match(n),_($)?W(/^W\d+W\d+$/,i=n)?n+"\uff1a"+t.$translate("Fiasco.wb.duplicate_error.white"):W(/^B\d+B\d+$/,i)?n+"\uff1a"+t.$translate("Fiasco.wb.duplicate_error.black"):(l=w("Side").$new(t.$color($["$[]"](1)),$["$[]"](2).$to_i())).$roll(t.randomizer)+" "+(a=w("Side").$new(t.$color($["$[]"](3)),$["$[]"](4).$to_i())).$roll(t.randomizer)+" \uff1e "+l.$diff(a):e}),c(u,"$color",function(n){return v(n,"W")?this.$translate("Fiasco.white"):this.$translate("Fiasco.black")}),($=(t=B(f[0],null,"Side")).$$prototype).count=$.dice_list=$.color=$.total=e,c(t,"$initialize",function(l,r){return this.color=l,this.count=r}),c(t,"$roll",function(l){var r=this;return r.dice_list=v(r.count,0)?[0]:l.$roll_barabara(r.count,6),r.total=r.dice_list.$sum(),""+r.color+r.total+"["+r.dice_list.$join(",")+"]"}),c(t,"$diff",function(l){var r=this;return v(r.total,l.$total())?"0":_(z(r.total,l.$total()))?""+r.color+g(r.total,l.$total()):""+l.$color()+g(l.$total(),r.total)}),t.$attr_reader("color","total")})}}]);