(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[5309],{6250:(J,Q,I)=>{I(9993),Opal.modules["bcdice/game_system/Kamigakari"]=function($){var B,K,Y,_,a,t,m,k,R,M,j,z,E=$.module,G=$.klass,c=$.const_set,A=$.send2,x=$.find_super,o=$.def,q=$.eqeqeq,f=$.truthy,b=$.to_ary,D=$.hash2,y=$.rb_plus,P=$.rb_lt,N=$.rb_gt,w=[],e=$.nil,g=$.$$$;return B=w,K=z=[E(w[0],"BCDice")].concat(B),M=[E(z[0],"GameSystem")].concat(K),j=$.$r(M),Y=M,k=[m=G(M[0],j("Base"),"Kamigakari")].concat(Y),R=$.$r(k),m.$$prototype.randomizer=e,c(k[0],"ID","Kamigakari"),c(k[0],"NAME","\u795e\u6211\u72e9"),c(k[0],"SORT_KEY","\u304b\u307f\u304b\u304b\u308a"),c(k[0],"HELP_MESSAGE","\u30fb\u5404\u7a2e\u8868\n \u30fb\u611f\u60c5\u8868(ET)\n \u30fb\u970a\u7d0b\u6d88\u8cbb\u306e\u4ee3\u511f\u8868(RT)\n \u30fb\u4f1d\u5947\u540d\u5b57\u30fb\u540d\u524d\u6c7a\u5b9a\u8868(NT)\n \u30fb\u9b54\u5883\u81e8\u754c\u8868(KT)\n \u30fb\u7372\u5f97\u7d20\u6750\u30c1\u30e3\u30fc\u30c8(MTx x\u306f\uff3b\u6cd5\u5247\u969c\u5bb3\uff3d\u306e\uff3b\u5f37\u5ea6\uff3d\u3002\u7701\u7565\u6642\u306f\uff11)\n\u3000\u3000\u4f8b\uff09 MT\u3000MT3\u3000MT9\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),o(m,"$initialize",function _(l){var t=this;return _.$$p=null,A(t,x(t,"initialize",_,!1,!0),"initialize",[l],null),t.sort_add_dice=!0,t.d66_sort_type=g(R("D66SortType"),"NO_SORT")}),o(m,"$eval_game_system_specific_command",function(l){var a,t,r=this,n=e,i=e,u=e,T=e,S=e;return n="",i="",r.$debug("eval_game_system_specific_command command",l),q(/^MT(\d*)$/,l.$upcase())?(u=R("Regexp").$last_match(1),u=(u=f(T=u)?T:1).$to_i(),t=r.$getGetMaterialTableResult(u),n=null==(a=b(t))[0]?e:a[0],S=null==a[2]?e:a[2],f((i=null==a[1]?e:a[1])["$empty?"]())?"":n+"("+S+") \uff1e "+i):r.$roll_tables(l,g(r.$class(),"TABLES"))}),o(m,"$getGetMaterialTableResult",function(l){var a,t,n,i,T,r=this,s=e,u=e,v=e;return n=r.$translate("Kamigakari.MT.name"),i=r.$translate("Kamigakari.MT.items"),t=r.$get_table_by_d66(i),s=null==(a=b(t))[0]?e:a[0],u=null==a[1]?e:a[1],t=r.$getMaterialEffect(l),u=u+","+(null==(a=b(t))[1]?e:a[1]),v=r.$getPrice(T=null==a[0]?e:a[0]),s=r.$translate("Kamigakari.MT.result_format",D(["material","effect"],{material:s,effect:T})),f(v["$nil?"]())||(s=y(s,"\uff1a"+v)),[n,s,u]}),o(m,"$getMaterialEffect",function(l){var a,t,r=this,n=e,i=e,s=e,u=e;return n=r.randomizer.$roll_once(6),i="",s="",f(P(n,6))?(t=r.$getMaterialEffectNomal(l),i=null==(a=b(t))[0]?e:a[0],u=null==a[1]?e:a[1],s=r.$translate("Kamigakari.MT.common_material.name")):(t=r.$getMaterialEffectRare(),i=null==(a=b(t))[0]?e:a[0],u=null==a[1]?e:a[1],s=r.$translate("Kamigakari.MT.rare_material.name")),[i=s+"\uff1a"+i,n=n+","+u]}),o(m,"$getMaterialEffectNomal",function(l){var a,t,n,r=this,i=e,s=e,T=e;return n=r.$translate("Kamigakari.MT.common_material.items"),i=r.randomizer.$roll_d66(g(R("D66SortType"),"NO_SORT")),s=r.$get_table_by_number(i,n),r.$debug("getMaterialEffectNomal result",s),f(s["$=~"](/\+n/))&&(t=r.$getMaterialEffectPower(l),T=null==(a=b(t))[1]?e:a[1],s=s.$sub(/\+n/,"+"+(null==a[0]?e:a[0])),i=i+","+T),[s,i]}),o(m,"$getMaterialEffectPower",function(l){var a,t,n,i;return n=[[4,[1,1,1,2,2,3]],[8,[1,1,2,2,3,3]],[9,[1,2,3,3,4,5]]],f(N(l,9))&&(l=9),i=this.$get_table_by_number(l,n),t=this.$get_table_by_1d6(i),[null==(a=b(t))[0]?e:a[0],null==a[1]?e:a[1]]}),o(m,"$getMaterialEffectRare",function(){var l,a,r,t=this,n=e,i=e,u=e;return r=[[3,y("**",t.$translate("Kamigakari.MT.rare_material.give_attribute"))],[5,y("**",t.$translate("Kamigakari.MT.rare_material.halve_damage"))],[6,t.$translate("Kamigakari.MT.rare_material.optional_by_GM")]],n=t.randomizer.$roll_once(6),i=t.$get_table_by_number(n,r),t.$debug("getMaterialEffectRare result",i),f(i["$include?"]("**"))&&(a=t.$getAttribute(),u=null==(l=b(a))[1]?e:l[1],i=i.$sub("**",(null==l[0]?e:l[0]).$to_s()),n=n+","+u),[i,n]}),o(m,"$getAttribute",function(){var a,t,l=this;return a=l.$translate("Kamigakari.MT.attribute"),t=l.randomizer.$roll_d66(g(R("D66SortType"),"NO_SORT")),[l.$get_table_by_number(t,a),t]}),o(m,"$getPrice",function(l){var t,a=this,r=e;return t=f(r=l.$match(/\+(\d+)/))?r["$[]"](1).$to_i():f(l["$include?"](a.$translate("Kamigakari.MT.rare_material.give_attribute")))?3:f(l["$include?"](a.$translate("Kamigakari.MT.rare_material.halve_damage")))?4:0,[e,"500G("+a.$translate("Kamigakari.MT.effect_power")+":1)","1000G("+a.$translate("Kamigakari.MT.effect_power")+":2)","1500G("+a.$translate("Kamigakari.MT.effect_power")+":3)","2000G("+a.$translate("Kamigakari.MT.effect_power")+":4)","3000G("+a.$translate("Kamigakari.MT.effect_power")+":5)"]["$[]"](t)}),a=[_=$.get_singleton_class(m)].concat(k),t=$.$r(a),_.$private(),o(_,"$translate_tables",function(n){return D(["RT","ET","KT","NT"],{RT:g(t("DiceTable"),"Table").$from_i18n("Kamigakari.table.RT",n),ET:g(t("DiceTable"),"D66Table").$from_i18n("Kamigakari.table.ET",n),KT:g(t("DiceTable"),"D66Table").$from_i18n("Kamigakari.table.KT",n),NT:g(t("DiceTable"),"D66Table").$from_i18n("Kamigakari.table.NT",n)})}),c(k[0],"TABLES",m.$translate_tables("ja_jp")),m.$register_prefix("MT",R("TABLES").$keys())},Opal.queue(function($){var y,e,C,K,d,h,B,N,E=$.module,G=$.klass,c=$.const_set,A=$.send2,x=$.find_super,o=$.def,f=[];return $.top.$require("bcdice/game_system/Kamigakari"),y=f,e=N=[E(f[0],"BCDice")].concat(y),h=[E(N[0],"GameSystem")].concat(e),B=$.$r(h),C=h,c((d=[K=G(h[0],B("Kamigakari"),"Kamigakari_Korean")].concat(C))[0],"ID","Kamigakari:Korean"),c(d[0],"NAME","\uce74\ubbf8\uac00\uce74\ub9ac"),c(d[0],"SORT_KEY","\u56fd\u969b\u5316:Korean:\uce74\ubbf8\uac00\uce74\ub9ac"),c(d[0],"HELP_MESSAGE","\u30fb\uac01\uc885\ud45c\n \u30fb\uac10\uc815\ud45c(ET)\n \u30fb\uc601\ubb38\uc18c\ube44\uc758 \ub313\uac00\ud45c(RT)\n \u30fb\uc804\uae30 \uc131\uc528\u30fb\uc774\ub984 \uacb0\uc815\ud45c(NT)\n \u30fb\ub9c8\uacbd\uc784\uacc4\ud45c(KT)\n \u30fb\ud68d\ub4dd \uc18c\uc7ac \ucc28\ud2b8(MTx x\ub294\uff3b\ubc95\uce59\uc7a5\ud574\uff3d\uc758\uff3b\uac15\ub3c4\uff3d.\uc0dd\ub7b5\ud560 \ub54c\ub294\uff11)\n\u3000\u3000\uc608\uff09 MT\u3000MT3\u3000MT9\n\u30fbD66\uc8fc\uc0ac\uc704 \uac00\ub2a5\n"),K.$register_prefix_from_super_class(),o(K,"$initialize",function M(j){var p=this;return M.$$p=null,A(p,x(p,"initialize",M,!1,!0),"initialize",[j],null),p.locale="ko_kr"}),c(d[0],"TABLES",K.$translate_tables("ko_kr").$freeze())})}}]);