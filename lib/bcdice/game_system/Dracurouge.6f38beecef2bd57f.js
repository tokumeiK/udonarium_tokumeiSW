(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[2697],{2204:(oe,le,M)=>{M(9993),Opal.queue(function(u){var Z,De,ae,t,D,$,n,a,f,R,y,k,re,q,N=u.module,F=u.klass,P=u.const_set,V=u.send2,W=u.find_super,m=u.def,_=u.truthy,S=u.rb_plus,j=u.rb_divide,Y=u.eqeq,p=u.send,I=u.rb_le,X=u.rb_lt,E=u.rb_minus,A=u.rb_times,G=u.hash2,J=u.defs,w=u.to_ary,U=u.thrower,L=[],e=u.nil,v=u.$$$;return Z=L,De=q=[N(L[0],"BCDice")].concat(Z),k=[N(q[0],"GameSystem")].concat(De),re=u.$r(k),ae=k,R=[f=F(k[0],re("Base"),"Dracurouge")].concat(ae),y=u.$r(R),f.$$prototype.randomizer=e,P(R[0],"ID","Dracurouge"),P(R[0],"NAME","\u30c9\u30e9\u30af\u30eb\u30fc\u30b8\u30e5"),P(R[0],"SORT_KEY","\u3068\u3089\u304f\u308b\u3046\u3057\u3086"),P(R[0],"HELP_MESSAGE","\u30fb\u884c\u3044\u5224\u5b9a\uff08DRx+y\uff09\n\u3000x\uff1a\u632f\u308b\u30b5\u30a4\u30b3\u30ed\u306e\u6570\uff08\u7701\u7565\u6642\uff14\uff09\u3001y\uff1a\u6e07\u304d\u4fee\u6b63\uff08\u7701\u7565\u6642\uff10\uff09\n\u3000\u4f8b\uff09 DR\u3000DR6\u3000DR+1\u3000DR5+2\n\u30fb\u6297\u3044\u5224\u5b9a\uff08DRRx\uff09\n\u3000x\uff1a\u632f\u308b\u30b5\u30a4\u30b3\u30ed\u306e\u6570\n\u3000\u4f8b\uff09 DRR3\n\u30fb\u539f\u98a8\u666f\u8868\uff08ST\uff09\u3001\u53d9\u52f2\u8868\uff08CO\uff09\u3001\u53d9\u52f2\u5f8c\u8868\uff08CA\uff09\u3001\u9065\u304b\u904e\u53bb\u8868\uff08EP\uff09\n\u3000\u539f\u7f6a\u8868\uff08OS\uff09\u3001\u53d7\u96e3\u8868\uff08PN\uff09\u3001\u8fd1\u6cc1\u8868\uff08RS\uff09\u3001\u5e73\u548c\u306a\u904e\u53bb\u8868\uff08PP\uff09\n\u30fb\u5815\u843d\u8868\uff08CTx\uff09 x\uff1a\u6e07\u304d \uff08\u4f8b\uff09 CT3\n\u30fb\u5815\u843d\u306e\u5146\u3057\u8868\uff08CS\uff09\u3001\u62e1\u5f35\u30fb\u5815\u843d\u306e\u5146\u3057\u8868\uff08ECS\uff09\n\u30fb\u7d46\u5185\u5bb9\u6c7a\u5b9a\u8868\uff08BT\uff09\n\u30fb\u53cd\u5fdc\u8868\uff08RTxy\uff09x\uff1a\u8840\u7d71\u3001y\uff1a\u9053\u3000xy\u7701\u7565\u3067\u4e00\u62ec\u8868\u793a\n\u3000\u8840\u7d71\u3000D\uff1a\u30c9\u30e9\u30af\u3001R\uff1a\u30ed\u30fc\u30bc\u30f3\u30d6\u30eb\u30af\u3001H\uff1a\u30d8\u30eb\u30ba\u30ac\u30eb\u30c9\u3001M\uff1a\u30c0\u30b9\u30c8\u30cf\u30a4\u30e0\n\u3000\u3000\u3000\u3000A\uff1a\u30a2\u30f4\u30a1\u30ed\u30fc\u30e0\u3000N\uff1a\u30ce\u30b9\u30d5\u30a7\u30e9\u30b9\u3001G\uff1a\u30b2\u30a4\u30ba\u30f4\u30a1\u30eb\u30c8\u3001K\uff1a\u30ab\u30a4\u30f3\u30b7\u30eb\u30c8\n\u3000\u9053\u3000F\uff1a\u9818\u4e3b\u3001G\uff1a\u8fd1\u885b\u3001R\uff1a\u904d\u6b74\u3001W\uff1a\u8ce2\u8005\u3001J\uff1a\u72e9\u4eba\u3001N\uff1a\u591c\u7363\n\u3000\u3000\u3000E\uff1a\u5c06\u8ecd\u3001B\uff1a\u50e7\u6b63\u3001H\uff1a\u7a7a\u99c6\u3001K\uff1a\u8239\u9577\u3001L\uff1a\u5bf5\u7ae5\u3001V\uff1a\u4ef2\u7acb\u3001U\uff1a\u6280\u5e2b\u3001D\uff1a\u535a\u58eb\n\u3000\u3000\u3000S\uff1a\u661f\u8aad\u3001G2\uff1a\u5f8c\u898b\n\u3000\u4f8b\uff09RT\uff08\u4e00\u62ec\u8868\u793a\uff09\u3001RTDF\uff08\u30c9\u30e9\u30af\u306e\u9818\u4e3b\uff09\u3001RTAG2\uff08\u30a2\u30f4\u30a1\u30ed\u30fc\u30e0\u306e\u5f8c\u898b\u4eba\uff09\n\u30fb\u7570\u7aef\u306e\u53cd\u5fdc\u8868\uff08HRTxy\uff09x\uff1a\u8840\u7d71\u3001y\uff1a\u9053\u3000xy\u7701\u7565\u3067\u4e00\u62ec\u8868\u793a\n\u3000\u8840\u7d71\u3000L\uff1a\u7570\u7aef\u537f\u3001V\uff1a\u30f4\u30eb\u30b3\u30e9\u30af\u3001N\uff1a\u30ca\u30cf\u30c4\u30a7\u30fc\u30e9\u3001K\uff1a\u30ab\u30eb\u30f3\u30b7\u30e5\u30bf\u30a4\u30f3\n\u3000\u3000\u3000\u3000G\uff1a\u30b0\u30ea\u30de\u30eb\u30ad\u30f3\u3001S\uff1a\u30b9\u30c8\u30ea\u30ac\u3001M\uff1a\u30e1\u30ea\u30e5\u30b8\u30fc\u30cc\u3001F\uff1a\u30d5\u30a9\u30fc\u30f3\n\u3000\u3000\u3000\u3000H\uff1a\u30db\u30e0\u30f3\u30af\u30eb\u30b9\u3001E\uff1a\u30a8\u30ca\u30e1\u30eb\u30e0\u3001S2\uff1a\u30b5\u30f3\u30b0\u30a3\u30ca\u30ea\u30a8\u3001A\uff1a\u30a2\u30fc\u30eb\u30f4\n\u3000\u3000\u3000\u3000V2\uff1a\u30f4\u30a3\u30fc\u30f4\u30eb\u3001L2\uff1a\u30eb\u30fc\u30ac\u30eb\u30fc\u3001A2\uff1a\u30a2\u30eb\u30e9\u30a6\u30cd\u3001F2\uff1a\u30d5\u30ea\u30c3\u30ac\n\u3000\u9053\u3000W\uff1a\u91ce\u4f0f\u3001N\uff1a\u6d41\u6d6a\u3001S\uff1a\u5bc6\u4f7f\u3001H\uff1a\u9b54\u5973\u3001F\uff1a\u5263\u58eb\u3001X\uff1a\u691c\u4f53\n\u3000\u4f8b\uff09HRT\uff08\u4e00\u62ec\u8868\u793a\uff09\u3001HRTVW\uff08\u30f4\u30eb\u30b3\u30e9\u30af\u306e\u91ce\u4f0f\uff09\u3001HRTF2X\uff08\u30d5\u30ea\u30c3\u30ac\u306e\u691c\u4f53\uff09\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),m(f,"$initialize",function c(r){var D=this;return c.$$p=null,V(D,W(D,"initialize",c,!1,!0),"initialize",[r],null),D.d66_sort_type=v(y("D66SortType"),"NO_SORT")}),m(f,"$eval_game_system_specific_command",function(r){var D,$,n,a,o,t=this;return _(D=_($=_(n=_(a=_(o=t.$roll_conduct_dice(r))?o:t.$roll_resist_dice(r))?a:t.$getReactionDiceCommandResult(r))?n:t.$getHeresyReactionDiceCommandResult(r))?$:t.$getCorruptionDiceCommandResult(r))?D:t.$roll_tables(r,v(t.$class(),"TABLES"))}),f.$private(),m(f,"$roll_conduct_dice",function(r){var t,D=this,$=e,n=e,a=e,o=e,s=e,b=e,i=e;return $=/^DR(\d*[1-9])?(\+\d+)?$/.$match(r),_($)?(n=_(a=(t=$["$[]"](1))===e||null==t?e:t.$to_i())?a:4,o=$["$[]"](2).$to_i(),s=D.randomizer.$roll_barabara(n,6).$sort(),b=D.$count_glory_dice(s),s=S(s,y("Array").$new(b,10)),i=D.$apply_thirsty_point(s,o),["("+r+")",n+"D6"+y("Format").$modifier(o),i,"[ "+s.$join(", ")+" ]"].$compact().$join(" \uff1e ")):e}),m(f,"$count_glory_dice",function(r){var t,D;return t=r.$count(1),D=r.$count(6),S(j(t,2).$to_i(),j(D,2).$to_i())}),m(f,"$apply_thirsty_point",function(r,t){var D=e,$=e;return Y(t,0)?e:(D=p(r,"rindex",[],function(a){return null==a&&(a=e),I(a,6)}),($=p(r,"map",[],"to_s".$to_proc()))["$[]="](D,S($["$[]"](D),"+"+t)),r["$[]="](D,S(r["$[]"](D),t)),"[ "+$.$join(", ")+" ]")}),m(f,"$roll_resist_dice",function(r){var D=e,$=e,n=e,a=e;return D=/^DRR(\d+)$/.$match(r),_(D)?($=D["$[]"](1).$to_i(),Y($,0)&&($=4),a=(n=this.randomizer.$roll_barabara($,6).$sort()).$sum(),"("+r+") \uff1e "+$+"D6 \uff1e [ "+n.$join(", ")+" ] \uff1e "+a):e}),m(f,"$getReactionDiceCommandResult",function(r){var t=this,D=e,$=e,n=e,a=e,o=e;return _(r["$=~"](/^RT((\w\d*)(\w\d*))?/))?(D=y("Regexp").$last_match(2),$=y("Regexp").$last_match(3),n=t.$translate("Dracurouge.RT.name"),a=t.$translate("Dracurouge.RT.blood"),o=t.$translate("Dracurouge.RT.style"),t.$getReactionText(n,D,$,a,o)):e}),m(f,"$getHeresyReactionDiceCommandResult",function(r){var t=this,D=e,$=e,n=e,a=e,o=e;return _(r["$=~"](/^HRT((\w\d*)(\w\d*))?/))?(D=y("Regexp").$last_match(2),$=y("Regexp").$last_match(3),n=t.$translate("Dracurouge.HRT.name"),a=t.$translate("Dracurouge.HRT.blood"),o=t.$translate("Dracurouge.HRT.style"),t.$getReactionText(n,D,$,a,o)):e}),m(f,"$getReactionText",function(r,t,D,$,n){var o,s,b,i,g,a=this,l=e,T=e,d=e,h=e;if(!_(a.$checkTypeText(t,$))||!_(a.$checkTypeText(D,n)))return e;if(b=""+(o=a.randomizer.$roll_once(6))+(s=a.randomizer.$roll_once(6)),i=X(o,4),l=_(i)?$:n,T=_(i)?t:D,g=S(E(s,1),A(_(i)?E(o,1):E(o,4),6)),a.$debug("index",g),_(T["$nil?"]()))d=a.$getReactionTextFull(l,g);else{if(h=l["$[]"](T.$to_sym()),_(h["$nil?"]()))return e;d=a.$getReactionTex(h,g)}return r+"("+b+") \uff1e "+d}),m(f,"$checkTypeText",function(r,t){return!!_(r["$nil?"]())||t.$keys()["$include?"](r.$to_sym())}),m(f,"$getReactionTextFull",function(r,t){var $=e;return $=[],p(r,"each_value",[],function n(a){return null==a&&(a=e),$["$<<"]((null==n.$$s?this:n.$$s).$getReactionTex(a,t))},{$$s:this}),$.$join("\uff0f")}),m(f,"$getReactionTex",function(r,t){return r["$[]"]("name")+"\uff1a"+r["$[]"]("table")["$[]"](t)}),m(f,"$getCorruptionDiceCommandResult",function(r){var t=this,D=e,$=e,n=e,a=e,o=e,s=e,b=e;return _(r["$=~"](/^CT(\d+)$/))?(D=y("Regexp").$last_match(1).$to_i(),$=t.$translate("Dracurouge.CT.name"),n=[[0,t.$translate("Dracurouge.CT.table.0")],[1,t.$translate("Dracurouge.CT.table.1")],[3,t.$translate("Dracurouge.CT.table.3")],[5,t.$translate("Dracurouge.CT.table.5")],[6,t.$translate("Dracurouge.CT.table.6")],[7,t.$translate("Dracurouge.CT.table.7")],[8,t.$translate("Dracurouge.CT.table.8")],[99,t.$translate("Dracurouge.CT.table.99")]],o=(a=t.randomizer.$roll_barabara(2,6)).$sum(),s=a.$join(","),b=E(o,D),t.$debug("index",b),"2D6["+s+"]-"+D+" \uff1e  "+$+"("+b+") \uff1e "+t.$get_table_by_number(b,n)):e}),t=R,$=[D=F(R[0],null,"YearTable")].concat(t),n=u.$r($),(a=D.$$prototype).items=a.name=a.year_title=e,J(D,"$from_i18n",function(s,b,i){var g,T=e;return g=(T=n("I18n").$translate(s,G(["locale","raise"],{locale:b,raise:!0})))["$[]"]("items").$zip(i),this.$new(T["$[]"]("name"),T["$[]"]("year_title"),g)}),m(D,"$initialize",function(s,b,i){var l=this;return l.name=s,l.year_title=b,l.items=i.$freeze()}),m(D,"$roll",function(s){try{U("eval_return");var i,l,g,d,h,z,C,K,T=this,x=e;return l=s.$roll_barabara(2,6),d=null==(i=w(l))[1]?e:i[1],h=S(A(E(g=null==i[0]?e:i[0],1),6),E(d,1)),l=T.items["$[]"](h),z=null==(i=w(l))[0]?e:i[0],x=p(C=null==i[1]?e:i[1],"gsub",[/\d+D6+/],function H(B){return null==B&&(B=e),(null==H.$$s?this:H.$$s).$roll_d6x(B,s)},{$$s:T}),K=n("ArithmeticEvaluator").$eval(x.$gsub("\xd7","*")),T.name+"("+g+d+") \uff1e "+z+" \uff1e "+T.year_title+"\uff1a"+C+" \uff1e ("+x+") \uff1e "+T.year_title+"\uff1a"+K+"\u5e74"}catch(H){if(H===u.t_eval_return)return H.$v;throw H}}),D.$private(),m(D,"$roll_d6x",function(s,b){var i,l,T=e,g=e;return l=s.$split("D",2),i=w(l),g=null==i[1]?e:i[1],T=(T=null==i[0]?e:i[0]).$to_i(),p(n("Array"),"new",[T],function(){return p(b.$roll_barabara(g.$length(),6).$reverse().$map(),"with_index",[],function(C,x){return null==C&&(C=e),null==x&&(x=e),A(C,10["$**"](x).$to_i())}).$sum()}).$sum()}),function(c,r){var t=[c].concat(r),D=u.$r(t);c.$private(),m(c,"$translate_tables",function(n){return G(["CO","CA","EP","OS","RS","PP","ST","PN","CS","ECS","BT"],{CO:D("YearTable").$from_i18n("Dracurouge.table.CO",n,["7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","10+2D6","7+1D6\xd71D6","14+1D6\xd71D6","7+1D6\xd71D6","10+1D6\xd71D6","7+1D6\xd71D6","10+2D6","7+1D6\xd71D6","14+1D6\xd71D6","10+2D6","7+1D6\xd71D6","14+1D6\xd71D6","18+1D6\xd71D6","10+2D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","30+1D6\xd71D6","14+1D6\xd71D6","7+1D6\xd71D6","14+1D6\xd71D6","10+2D6","14+1D6\xd71D6","14+1D6\xd71D6","7+4D6","14+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6"]),CA:D("YearTable").$from_i18n("Dracurouge.table.CA",n,["2D6\xd710","1D6\xd71D6","1D6\xd71D6","2D6\xd75","2D6\xd710","1D6\xd71D6","2D6\xd710","1D6\xd75","2D6\xd710","2D6\xd73","1D6\xd71D6","1D6\xd71D6","2D6\xd710","2D6\xd710","2D6\xd720","2D6\xd710","2D6\xd720","1D6\xd71D6","1D6\xd73","1D6\xd71D6","1D6\xd75","2D6\xd710","1D6\xd71D6","2D6\xd710","2D6","1D6\xd71D6","2D6","1D6\xd71D6","2D6\xd720","2D6\xd710","1D6\xd71D6","2D6\xd750","2D6\xd710","1D6\xd71D6","2D6\xd75","1D6\xd71D6"]),EP:D("YearTable").$from_i18n("Dracurouge.table.EP",n,["1D66+1300","1D666","1D666","1D666","1D66+1250","1D666","3D6\xd7100","2D6\xd7100","1D66+1210","1D666","2D6\xd7100","3D6\xd7100","1D66+1300","2D6\xd7100","1D6+1250","1D666","1D666","1D666","1D66+1250","2D6\xd7100","1D666","3D6\xd7100","2D6\xd7100","2D6\xd7100","1D6\xd7150","2D6\xd7100","1D66+1250","1D66+400","1212","2D6\xd7100","2D6\xd7100","1D66\xd710","3D6\xd7100","3D6\xd7100","1D66+1300","1D66+1833"]),OS:D("YearTable").$from_i18n("Dracurouge.table.OS",n,["7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","13+1D6\xd71D6","7+1D6\xd71D6","13+1D6\xd71D6","7+1D6\xd71D6","13+1D6\xd71D6","13+1D6\xd71D6","13+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","10+1D6\xd71D6","7+1D6\xd71D6","15+1D6\xd71D6","6+2D6","7+1D6\xd71D6","7+1D6\xd71D6","13+1D6\xd71D6","35+1D6\xd71D6","9+2D6","13+1D6\xd71D6","9+2D6","6+2D6","7+1D6\xd71D6","7+2D6","7+1D6\xd71D5","7+1D6\xd71D6","13+1D6\xd71D6","7+1D6\xd71D6"]),RS:D("YearTable").$from_i18n("Dracurouge.table.RS",n,["2D6\xd710","1D6\xd71D6","1D6\xd71D6","1D6\xd71D6","3D6\xd730","3D6\xd730","2D6\xd710","2D6\xd710","2D6\xd710","2D6\xd710","2D6\xd720","1D6\xd71D6","1D6\xd71D6","1D6\xd71D6","1","2D6\xd710","2D6\xd720","1D6\xd71D6","1D6\xd71D6","3D6\xd730","3D6\xd720","1D6\xd71D6","3D6\xd730","3D6\xd720","1D6\xd71D6","1D6\xd71D6","1D6\xd71D6","1D6\xd71D6","1D6\xd710","2D6\xd710","3D6\xd750","1D6\xd71D6","3D6\xd720","2D6\xd710","1D6\xd71D6","3D6\xd750"]),PP:D("YearTable").$from_i18n("Dracurouge.table.PP",n,["8+2D6","6+2D6","7+1D6\xd71D6","15+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","6+2D6","7+1D6\xd71D6","9+2D6","15+1D6\xd71D6","9+3D6","7+1D6\xd71D6","10+1D6\xd71D6","9+2D6","9+2D6","9+3D6","6+2D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","6+2D6","10+1D6\xd71D6","7+1D6\xd71D6","12+1D6\xd71D6","15+1D6\xd71D6","9+3D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","12+4D6"]),ST:v(D("DiceTable"),"D66Table").$from_i18n("Dracurouge.table.ST",n),PN:v(D("DiceTable"),"D66Table").$from_i18n("Dracurouge.table.PN",n),CS:v(D("DiceTable"),"Table").$from_i18n("Dracurouge.table.CS",n),ECS:v(D("DiceTable"),"D66Table").$from_i18n("Dracurouge.table.ECS",n),BT:v(D("DiceTable"),"Table").$from_i18n("Dracurouge.table.BT",n)})})}(u.get_singleton_class(f),R),P(R[0],"TABLES",f.$translate_tables("ja_jp")),f.$register_prefix("DR","RT","HRT","CT",y("TABLES").$keys())})}}]);